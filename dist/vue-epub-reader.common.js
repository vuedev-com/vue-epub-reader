module.exports=function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=111)}([function(module,exports,__webpack_require__){"use strict";function string2binary(str){var result=null;return result=support.uint8array?new Uint8Array(str.length):new Array(str.length),stringToArrayLike(str,result)}function identity(input){return input}function stringToArrayLike(str,array){for(var i=0;i<str.length;++i)array[i]=255&str.charCodeAt(i);return array}function arrayLikeToString(array){var chunk=65536,type=exports.getTypeOf(array),canUseApply=!0;if("uint8array"===type?canUseApply=arrayToStringHelper.applyCanBeUsed.uint8array:"nodebuffer"===type&&(canUseApply=arrayToStringHelper.applyCanBeUsed.nodebuffer),canUseApply)for(;chunk>1;)try{return arrayToStringHelper.stringifyByChunk(array,type,chunk)}catch(e){chunk=Math.floor(chunk/2)}return arrayToStringHelper.stringifyByChar(array)}function arrayLikeToArrayLike(arrayFrom,arrayTo){for(var i=0;i<arrayFrom.length;i++)arrayTo[i]=arrayFrom[i];return arrayTo}var support=__webpack_require__(6),base64=__webpack_require__(43),nodejsUtils=__webpack_require__(18),setImmediate=__webpack_require__(129),external=__webpack_require__(13);exports.newBlob=function(part,type){exports.checkSupport("blob");try{return new Blob([part],{type:type})}catch(e){try{var Builder=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,builder=new Builder;return builder.append(part),builder.getBlob(type)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var arrayToStringHelper={stringifyByChunk:function(array,type,chunk){var result=[],k=0,len=array.length;if(len<=chunk)return String.fromCharCode.apply(null,array);for(;k<len;)"array"===type||"nodebuffer"===type?result.push(String.fromCharCode.apply(null,array.slice(k,Math.min(k+chunk,len)))):result.push(String.fromCharCode.apply(null,array.subarray(k,Math.min(k+chunk,len)))),k+=chunk;return result.join("")},stringifyByChar:function(array){for(var resultStr="",i=0;i<array.length;i++)resultStr+=String.fromCharCode(array[i]);return resultStr},applyCanBeUsed:{uint8array:function(){try{return support.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return support.nodebuffer&&1===String.fromCharCode.apply(null,nodejsUtils.allocBuffer(1)).length}catch(e){return!1}}()}};exports.applyFromCharCode=arrayLikeToString;var transform={};transform.string={string:identity,array:function(input){return stringToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return transform.string.uint8array(input).buffer},uint8array:function(input){return stringToArrayLike(input,new Uint8Array(input.length))},nodebuffer:function(input){return stringToArrayLike(input,nodejsUtils.allocBuffer(input.length))}},transform.array={string:arrayLikeToString,array:identity,arraybuffer:function(input){return new Uint8Array(input).buffer},uint8array:function(input){return new Uint8Array(input)},nodebuffer:function(input){return nodejsUtils.newBufferFrom(input)}},transform.arraybuffer={string:function(input){return arrayLikeToString(new Uint8Array(input))},array:function(input){return arrayLikeToArrayLike(new Uint8Array(input),new Array(input.byteLength))},arraybuffer:identity,uint8array:function(input){return new Uint8Array(input)},nodebuffer:function(input){return nodejsUtils.newBufferFrom(new Uint8Array(input))}},transform.uint8array={string:arrayLikeToString,array:function(input){return arrayLikeToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return input.buffer},uint8array:identity,nodebuffer:function(input){return nodejsUtils.newBufferFrom(input)}},transform.nodebuffer={string:arrayLikeToString,array:function(input){return arrayLikeToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return transform.nodebuffer.uint8array(input).buffer},uint8array:function(input){return arrayLikeToArrayLike(input,new Uint8Array(input.length))},nodebuffer:identity},exports.transformTo=function(outputType,input){if(input||(input=""),!outputType)return input;exports.checkSupport(outputType);var inputType=exports.getTypeOf(input);return transform[inputType][outputType](input)},exports.getTypeOf=function(input){return"string"==typeof input?"string":"[object Array]"===Object.prototype.toString.call(input)?"array":support.nodebuffer&&nodejsUtils.isBuffer(input)?"nodebuffer":support.uint8array&&input instanceof Uint8Array?"uint8array":support.arraybuffer&&input instanceof ArrayBuffer?"arraybuffer":void 0},exports.checkSupport=function(type){if(!support[type.toLowerCase()])throw new Error(type+" is not supported by this platform")},exports.MAX_VALUE_16BITS=65535,exports.MAX_VALUE_32BITS=-1,exports.pretty=function(str){var code,i,res="";for(i=0;i<(str||"").length;i++)code=str.charCodeAt(i),res+="\\x"+(code<16?"0":"")+code.toString(16).toUpperCase();return res},exports.delay=function(callback,args,self){setImmediate(function(){callback.apply(self||null,args||[])})},exports.inherits=function(ctor,superCtor){var Obj=function(){};Obj.prototype=superCtor.prototype,ctor.prototype=new Obj},exports.extend=function(){var i,attr,result={};for(i=0;i<arguments.length;i++)for(attr in arguments[i])arguments[i].hasOwnProperty(attr)&&void 0===result[attr]&&(result[attr]=arguments[i][attr]);return result},exports.prepareContent=function(name,inputData,isBinary,isOptimizedBinaryString,isBase64){return external.Promise.resolve(inputData).then(function(data){return support.blob&&(data instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(data)))&&"undefined"!=typeof FileReader?new external.Promise(function(resolve,reject){var reader=new FileReader;reader.onload=function(e){resolve(e.target.result)},reader.onerror=function(e){reject(e.target.error)},reader.readAsArrayBuffer(data)}):data}).then(function(data){var dataType=exports.getTypeOf(data);return dataType?("arraybuffer"===dataType?data=exports.transformTo("uint8array",data):"string"===dataType&&(isBase64?data=base64.decode(data):isBinary&&!0!==isOptimizedBinaryString&&(data=string2binary(data))),data):external.Promise.reject(new Error("Can't read the data of '"+name+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function uuid(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"==c?r:7&r|8).toString(16)})}function documentHeight(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function isElement(obj){return!(!obj||1!=obj.nodeType)}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function isFloat(n){var f=parseFloat(n);return f===n&&isNumber(n)&&Math.floor(f)!==n}function prefixed(unprefixed){var vendors=["Webkit","webkit","Moz","O","ms"],prefixes=["-webkit-","-webkit-","-moz-","-o-","-ms-"],upper=unprefixed[0].toUpperCase()+unprefixed.slice(1),length=vendors.length;if("undefined"==typeof document||void 0!==document.body.style[unprefixed])return unprefixed;for(var i=0;i<length;i++)if(void 0!==document.body.style[vendors[i]+upper])return prefixes[i]+unprefixed;return unprefixed}function defaults(obj){for(var i=1,length=arguments.length;i<length;i++){var source=arguments[i];for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}return obj}function extend(target){return[].slice.call(arguments,1).forEach(function(source){source&&Object.getOwnPropertyNames(source).forEach(function(propName){Object.defineProperty(target,propName,Object.getOwnPropertyDescriptor(source,propName))})}),target}function insert(item,array,compareFunction){var location=locationOf(item,array,compareFunction);return array.splice(location,0,item),location}function locationOf(item,array,compareFunction,_start,_end){var compared,start=_start||0,end=_end||array.length,pivot=parseInt(start+(end-start)/2);return compareFunction||(compareFunction=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),end-start<=0?pivot:(compared=compareFunction(array[pivot],item),end-start==1?compared>=0?pivot:pivot+1:0===compared?pivot:-1===compared?locationOf(item,array,compareFunction,pivot,end):locationOf(item,array,compareFunction,start,pivot))}function indexOfSorted(item,array,compareFunction,_start,_end){var compared,start=_start||0,end=_end||array.length,pivot=parseInt(start+(end-start)/2);return compareFunction||(compareFunction=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),end-start<=0?-1:(compared=compareFunction(array[pivot],item),end-start==1?0===compared?pivot:-1:0===compared?pivot:-1===compared?indexOfSorted(item,array,compareFunction,pivot,end):indexOfSorted(item,array,compareFunction,start,pivot))}function bounds(el){var style=window.getComputedStyle(el),widthProps=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],heightProps=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],width=0,height=0;return widthProps.forEach(function(prop){width+=parseFloat(style[prop])||0}),heightProps.forEach(function(prop){height+=parseFloat(style[prop])||0}),{height:height,width:width}}function borders(el){var style=window.getComputedStyle(el),widthProps=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],heightProps=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],width=0,height=0;return widthProps.forEach(function(prop){width+=parseFloat(style[prop])||0}),heightProps.forEach(function(prop){height+=parseFloat(style[prop])||0}),{height:height,width:width}}function windowBounds(){var width=window.innerWidth,height=window.innerHeight;return{top:0,left:0,right:width,bottom:height,width:width,height:height}}function indexOfNode(node,typeId){for(var sib,parent=node.parentNode,children=parent.childNodes,index=-1,i=0;i<children.length&&(sib=children[i],sib.nodeType===typeId&&index++,sib!=node);i++);return index}function indexOfTextNode(textNode){return indexOfNode(textNode,TEXT_NODE)}function indexOfElementNode(elementNode){return indexOfNode(elementNode,ELEMENT_NODE)}function isXml(ext){return["xml","opf","ncx"].indexOf(ext)>-1}function createBlob(content,mime){return new Blob([content],{type:mime})}function createBlobUrl(content,mime){var blob=createBlob(content,mime);return _URL.createObjectURL(blob)}function revokeBlobUrl(url){return _URL.revokeObjectURL(url)}function createBase64Url(content,mime){var data;if("string"==typeof content)return data=btoa(encodeURIComponent(content)),"data:"+mime+";base64,"+data}function type(obj){return Object.prototype.toString.call(obj).slice(8,-1)}function parse(markup,mime,forceXMLDom){var Parser;return Parser="undefined"==typeof DOMParser||forceXMLDom?__webpack_require__(72).DOMParser:DOMParser,65279===markup.charCodeAt(0)&&(markup=markup.slice(1)),(new Parser).parseFromString(markup,mime)}function qs(el,sel){var elements;if(!el)throw new Error("No Element Provided");return void 0!==el.querySelector?el.querySelector(sel):(elements=el.getElementsByTagName(sel),elements.length?elements[0]:void 0)}function qsa(el,sel){return void 0!==el.querySelector?el.querySelectorAll(sel):el.getElementsByTagName(sel)}function qsp(el,sel,props){var q,filtered;if(void 0!==el.querySelector){sel+="[";for(var prop in props)sel+=prop+"~='"+props[prop]+"'";return sel+="]",el.querySelector(sel)}if(q=el.getElementsByTagName(sel),filtered=Array.prototype.slice.call(q,0).filter(function(el){for(var prop in props)if(el.getAttribute(prop)===props[prop])return!0;return!1}))return filtered[0]}function sprint(root,func){void 0!==(root.ownerDocument||root).createTreeWalker?treeWalker(root,func,NodeFilter.SHOW_TEXT):walk(root,function(node){node&&3===node.nodeType&&func(node)},!0)}function treeWalker(root,func,filter){for(var treeWalker=document.createTreeWalker(root,filter,null,!1),node=void 0;node=treeWalker.nextNode();)func(node)}function walk(node,callback){if(callback(node))return!0;if(node=node.firstChild)do{var walked=walk(node,callback);if(walked)return!0;node=node.nextSibling}while(node)}function blob2base64(blob){return new Promise(function(resolve,reject){var reader=new FileReader;reader.readAsDataURL(blob),reader.onloadend=function(){resolve(reader.result)}})}function defer(){var _this=this;this.resolve=null,this.reject=null,this.id=uuid(),this.promise=new Promise(function(resolve,reject){_this.resolve=resolve,_this.reject=reject}),Object.freeze(this)}function querySelectorByType(html,element,type){var query;if(void 0!==html.querySelector&&(query=html.querySelector(element+'[*|type="'+type+'"]')),query&&0!==query.length)return query;query=qsa(html,element);for(var i=0;i<query.length;i++)if(query[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===type||query[i].getAttribute("epub:type")===type)return query[i]}function findChildren(el){for(var result=[],childNodes=el.childNodes,i=0;i<childNodes.length;i++){var node=childNodes[i];1===node.nodeType&&result.push(node)}return result}function parents(node){for(var nodes=[node];node;node=node.parentNode)nodes.unshift(node);return nodes}function filterChildren(el,nodeName,single){for(var result=[],childNodes=el.childNodes,i=0;i<childNodes.length;i++){var node=childNodes[i];if(1===node.nodeType&&node.nodeName.toLowerCase()===nodeName){if(single)return node;result.push(node)}}if(!single)return result}function getParentByTagName(node,tagname){var parent=void 0;if(null!==node&&""!==tagname)for(parent=node.parentNode;1===parent.nodeType;){if(parent.tagName.toLowerCase()===tagname)return parent;parent=parent.parentNode}}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_require__.d(__webpack_exports__,"requestAnimationFrame",function(){return requestAnimationFrame}),__webpack_exports__.uuid=uuid,__webpack_exports__.documentHeight=documentHeight,__webpack_exports__.isElement=isElement,__webpack_exports__.isNumber=isNumber,__webpack_exports__.isFloat=isFloat,__webpack_exports__.prefixed=prefixed,__webpack_exports__.defaults=defaults,__webpack_exports__.extend=extend,__webpack_exports__.insert=insert,__webpack_exports__.locationOf=locationOf,__webpack_exports__.indexOfSorted=indexOfSorted,__webpack_exports__.bounds=bounds,__webpack_exports__.borders=borders,__webpack_exports__.windowBounds=windowBounds,__webpack_exports__.indexOfNode=indexOfNode,__webpack_exports__.indexOfTextNode=indexOfTextNode,__webpack_exports__.indexOfElementNode=indexOfElementNode,__webpack_exports__.isXml=isXml,__webpack_exports__.createBlob=createBlob,__webpack_exports__.createBlobUrl=createBlobUrl,__webpack_exports__.revokeBlobUrl=revokeBlobUrl,__webpack_exports__.createBase64Url=createBase64Url,__webpack_exports__.type=type,__webpack_exports__.parse=parse,__webpack_exports__.qs=qs,__webpack_exports__.qsa=qsa,__webpack_exports__.qsp=qsp,__webpack_exports__.sprint=sprint,__webpack_exports__.treeWalker=treeWalker,__webpack_exports__.walk=walk,__webpack_exports__.blob2base64=blob2base64,__webpack_exports__.defer=defer,__webpack_exports__.querySelectorByType=querySelectorByType,__webpack_exports__.findChildren=findChildren,__webpack_exports__.parents=parents,__webpack_exports__.filterChildren=filterChildren,__webpack_exports__.getParentByTagName=getParentByTagName,__webpack_require__.d(__webpack_exports__,"RangeObject",function(){return RangeObject});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),requestAnimationFrame="undefined"!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),ELEMENT_NODE=1,TEXT_NODE=3,_URL="undefined"!=typeof URL?URL:"undefined"!=typeof window?window.URL||window.webkitURL||window.mozURL:void 0,RangeObject=function(){function RangeObject(){_classCallCheck(this,RangeObject),this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}return _createClass(RangeObject,[{key:"setStart",value:function(startNode,startOffset){this.startContainer=startNode,this.startOffset=startOffset,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}},{key:"setEnd",value:function(endNode,endOffset){this.endContainer=endNode,this.endOffset=endOffset,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}},{key:"collapse",value:function(toStart){this.collapsed=!0,toStart?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}},{key:"selectNode",value:function(referenceNode){var parent=referenceNode.parentNode,index=Array.prototype.indexOf.call(parent.childNodes,referenceNode);this.setStart(parent,index),this.setEnd(parent,index+1)}},{key:"selectNodeContents",value:function(referenceNode){var endIndex=(referenceNode.childNodes[referenceNode.childNodes-1],3===referenceNode.nodeType?referenceNode.textContent.length:parent.childNodes.length);this.setStart(referenceNode,0),this.setEnd(referenceNode,endIndex)}},{key:"_commonAncestorContainer",value:function(startContainer,endContainer){var startParents=parents(startContainer||this.startContainer),endParents=parents(endContainer||this.endContainer);if(startParents[0]==endParents[0])for(var i=0;i<startParents.length;i++)if(startParents[i]!=endParents[i])return startParents[i-1]}},{key:"_checkCollapsed",value:function(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}},{key:"toString",value:function(){}}]),RangeObject}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),EpubCFI=function(){function EpubCFI(cfiFrom,base,ignoreClass){_classCallCheck(this,EpubCFI);var type;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof EpubCFI))return new EpubCFI(cfiFrom,base,ignoreClass);if("string"==typeof base?this.base=this.parseComponent(base):"object"===(void 0===base?"undefined":_typeof(base))&&base.steps&&(this.base=base),"string"===(type=this.checkType(cfiFrom)))return this.str=cfiFrom,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(this,this.parse(cfiFrom));if("range"===type)return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(this,this.fromRange(cfiFrom,this.base,ignoreClass));if("node"===type)return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(this,this.fromNode(cfiFrom,this.base,ignoreClass));if("EpubCFI"===type&&cfiFrom.path)return cfiFrom;if(cfiFrom)throw new TypeError("not a valid argument for EpubCFI");return this}return _createClass(EpubCFI,[{key:"checkType",value:function(cfi){return this.isCfiString(cfi)?"string":"object"!==(void 0===cfi?"undefined":_typeof(cfi))||"Range"!==__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.type)(cfi)&&void 0===cfi.startContainer?"object"===(void 0===cfi?"undefined":_typeof(cfi))&&void 0!==cfi.nodeType?"node":"object"===(void 0===cfi?"undefined":_typeof(cfi))&&cfi instanceof EpubCFI&&"EpubCFI":"range"}},{key:"parse",value:function(cfiStr){var baseComponent,pathComponent,range,cfi={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return"string"!=typeof cfiStr?{spinePos:-1}:(0===cfiStr.indexOf("epubcfi(")&&")"===cfiStr[cfiStr.length-1]&&(cfiStr=cfiStr.slice(8,cfiStr.length-1)),(baseComponent=this.getChapterComponent(cfiStr))?(cfi.base=this.parseComponent(baseComponent),pathComponent=this.getPathComponent(cfiStr),cfi.path=this.parseComponent(pathComponent),range=this.getRange(cfiStr),range&&(cfi.range=!0,cfi.start=this.parseComponent(range[0]),cfi.end=this.parseComponent(range[1])),cfi.spinePos=cfi.base.steps[1].index,cfi):{spinePos:-1})}},{key:"parseComponent",value:function(componentStr){var terminal,component={steps:[],terminal:{offset:null,assertion:null}},parts=componentStr.split(":"),steps=parts[0].split("/");return parts.length>1&&(terminal=parts[1],component.terminal=this.parseTerminal(terminal)),""===steps[0]&&steps.shift(),component.steps=steps.map(function(step){return this.parseStep(step)}.bind(this)),component}},{key:"parseStep",value:function(stepStr){var type,num,index,has_brackets,id;if(has_brackets=stepStr.match(/\[(.*)\]/),has_brackets&&has_brackets[1]&&(id=has_brackets[1]),num=parseInt(stepStr),!isNaN(num))return num%2==0?(type="element",index=num/2-1):(type="text",index=(num-1)/2),{type:type,index:index,id:id||null}}},{key:"parseTerminal",value:function(termialStr){var characterOffset,textLocationAssertion,assertion=termialStr.match(/\[(.*)\]/);return assertion&&assertion[1]?(characterOffset=parseInt(termialStr.split("[")[0]),textLocationAssertion=assertion[1]):characterOffset=parseInt(termialStr),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(characterOffset)||(characterOffset=null),{offset:characterOffset,assertion:textLocationAssertion}}},{key:"getChapterComponent",value:function(cfiStr){return cfiStr.split("!")[0]}},{key:"getPathComponent",value:function(cfiStr){var indirection=cfiStr.split("!");if(indirection[1]){return indirection[1].split(",")[0]}}},{key:"getRange",value:function(cfiStr){var ranges=cfiStr.split(",");return 3===ranges.length&&[ranges[1],ranges[2]]}},{key:"getCharecterOffsetComponent",value:function(cfiStr){return cfiStr.split(":")[1]||""}},{key:"joinSteps",value:function(steps){return steps?steps.map(function(part){var segment="";return"element"===part.type&&(segment+=2*(part.index+1)),"text"===part.type&&(segment+=1+2*part.index),part.id&&(segment+="["+part.id+"]"),segment}).join("/"):""}},{key:"segmentString",value:function(segment){var segmentString="/";return segmentString+=this.joinSteps(segment.steps),segment.terminal&&null!=segment.terminal.offset&&(segmentString+=":"+segment.terminal.offset),segment.terminal&&null!=segment.terminal.assertion&&(segmentString+="["+segment.terminal.assertion+"]"),segmentString}},{key:"toString",value:function(){var cfiString="epubcfi(";return cfiString+=this.segmentString(this.base),cfiString+="!",cfiString+=this.segmentString(this.path),this.range&&this.start&&(cfiString+=",",cfiString+=this.segmentString(this.start)),this.range&&this.end&&(cfiString+=",",cfiString+=this.segmentString(this.end)),cfiString+=")"}},{key:"compare",value:function(cfiOne,cfiTwo){var stepsA,stepsB,terminalA,terminalB;if("string"==typeof cfiOne&&(cfiOne=new EpubCFI(cfiOne)),"string"==typeof cfiTwo&&(cfiTwo=new EpubCFI(cfiTwo)),cfiOne.spinePos>cfiTwo.spinePos)return 1;if(cfiOne.spinePos<cfiTwo.spinePos)return-1;cfiOne.range?(stepsA=cfiOne.path.steps.concat(cfiOne.start.steps),terminalA=cfiOne.start.terminal):(stepsA=cfiOne.path.steps,terminalA=cfiOne.path.terminal),cfiTwo.range?(stepsB=cfiTwo.path.steps.concat(cfiTwo.start.steps),terminalB=cfiTwo.start.terminal):(stepsB=cfiTwo.path.steps,terminalB=cfiTwo.path.terminal);for(var i=0;i<stepsA.length;i++){if(!stepsA[i])return-1;if(!stepsB[i])return 1;if(stepsA[i].index>stepsB[i].index)return 1;if(stepsA[i].index<stepsB[i].index)return-1}return stepsA.length<stepsB.length?1:terminalA.offset>terminalB.offset?1:terminalA.offset<terminalB.offset?-1:0}},{key:"step",value:function(node){var nodeType=3===node.nodeType?"text":"element";return{id:node.id,tagName:node.tagName,type:nodeType,index:this.position(node)}}},{key:"filteredStep",value:function(node,ignoreClass){var nodeType,filteredNode=this.filter(node,ignoreClass);if(filteredNode)return nodeType=3===filteredNode.nodeType?"text":"element",{id:filteredNode.id,tagName:filteredNode.tagName,type:nodeType,index:this.filteredPosition(filteredNode,ignoreClass)}}},{key:"pathTo",value:function(node,offset,ignoreClass){for(var step,segment={steps:[],terminal:{offset:null,assertion:null}},currentNode=node;currentNode&&currentNode.parentNode&&9!=currentNode.parentNode.nodeType;)step=ignoreClass?this.filteredStep(currentNode,ignoreClass):this.step(currentNode),step&&segment.steps.unshift(step),currentNode=currentNode.parentNode;return null!=offset&&offset>=0&&(segment.terminal.offset=offset,"text"!=segment.steps[segment.steps.length-1].type&&segment.steps.push({type:"text",index:0})),segment}},{key:"equalStep",value:function(stepA,stepB){return!(!stepA||!stepB)&&(stepA.index===stepB.index&&stepA.id===stepB.id&&stepA.type===stepB.type)}},{key:"fromRange",value:function(range,base,ignoreClass){var cfi={range:!1,base:{},path:{},start:null,end:null},start=range.startContainer,end=range.endContainer,startOffset=range.startOffset,endOffset=range.endOffset,needsIgnoring=!1;if(ignoreClass&&(needsIgnoring=null!=start.ownerDocument.querySelector("."+ignoreClass)),"string"==typeof base?(cfi.base=this.parseComponent(base),cfi.spinePos=cfi.base.steps[1].index):"object"===(void 0===base?"undefined":_typeof(base))&&(cfi.base=base),range.collapsed)needsIgnoring&&(startOffset=this.patchOffset(start,startOffset,ignoreClass)),cfi.path=this.pathTo(start,startOffset,ignoreClass);else{cfi.range=!0,needsIgnoring&&(startOffset=this.patchOffset(start,startOffset,ignoreClass)),cfi.start=this.pathTo(start,startOffset,ignoreClass),needsIgnoring&&(endOffset=this.patchOffset(end,endOffset,ignoreClass)),cfi.end=this.pathTo(end,endOffset,ignoreClass),cfi.path={steps:[],terminal:null};var i,len=cfi.start.steps.length;for(i=0;i<len&&this.equalStep(cfi.start.steps[i],cfi.end.steps[i]);i++)i===len-1?cfi.start.terminal===cfi.end.terminal&&(cfi.path.steps.push(cfi.start.steps[i]),cfi.range=!1):cfi.path.steps.push(cfi.start.steps[i]);cfi.start.steps=cfi.start.steps.slice(cfi.path.steps.length),cfi.end.steps=cfi.end.steps.slice(cfi.path.steps.length)}return cfi}},{key:"fromNode",value:function(anchor,base,ignoreClass){var cfi={range:!1,base:{},path:{},start:null,end:null};return"string"==typeof base?(cfi.base=this.parseComponent(base),cfi.spinePos=cfi.base.steps[1].index):"object"===(void 0===base?"undefined":_typeof(base))&&(cfi.base=base),cfi.path=this.pathTo(anchor,null,ignoreClass),cfi}},{key:"filter",value:function(anchor,ignoreClass){var needsIgnoring,sibling,parent,previousSibling,nextSibling,isText=!1;return 3===anchor.nodeType?(isText=!0,parent=anchor.parentNode,needsIgnoring=anchor.parentNode.classList.contains(ignoreClass)):(isText=!1,needsIgnoring=anchor.classList.contains(ignoreClass)),needsIgnoring&&isText?(previousSibling=parent.previousSibling,nextSibling=parent.nextSibling,previousSibling&&3===previousSibling.nodeType?sibling=previousSibling:nextSibling&&3===nextSibling.nodeType&&(sibling=nextSibling),sibling||anchor):!(needsIgnoring&&!isText)&&anchor}},{key:"patchOffset",value:function(anchor,offset,ignoreClass){if(3!=anchor.nodeType)throw new Error("Anchor must be a text node");var curr=anchor,totalOffset=offset;for(anchor.parentNode.classList.contains(ignoreClass)&&(curr=anchor.parentNode);curr.previousSibling;){if(1===curr.previousSibling.nodeType){if(!curr.previousSibling.classList.contains(ignoreClass))break;totalOffset+=curr.previousSibling.textContent.length}else totalOffset+=curr.previousSibling.textContent.length;curr=curr.previousSibling}return totalOffset}},{key:"normalizedMap",value:function(children,nodeType,ignoreClass){var i,currNodeType,prevNodeType,output={},prevIndex=-1,len=children.length;for(i=0;i<len;i++)currNodeType=children[i].nodeType,1===currNodeType&&children[i].classList.contains(ignoreClass)&&(currNodeType=3),i>0&&3===currNodeType&&3===prevNodeType?output[i]=prevIndex:nodeType===currNodeType&&(prevIndex+=1,output[i]=prevIndex),prevNodeType=currNodeType;return output}},{key:"position",value:function(anchor){var children,index;return 1===anchor.nodeType?(children=anchor.parentNode.children,children||(children=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.findChildren)(anchor.parentNode)),index=Array.prototype.indexOf.call(children,anchor)):(children=this.textNodes(anchor.parentNode),index=children.indexOf(anchor)),index}},{key:"filteredPosition",value:function(anchor,ignoreClass){var children,index,map;return 1===anchor.nodeType?(children=anchor.parentNode.children,map=this.normalizedMap(children,1,ignoreClass)):(children=anchor.parentNode.childNodes,anchor.parentNode.classList.contains(ignoreClass)&&(anchor=anchor.parentNode,children=anchor.parentNode.childNodes),map=this.normalizedMap(children,3,ignoreClass)),index=Array.prototype.indexOf.call(children,anchor),map[index]}},{key:"stepsToXpath",value:function(steps){var xpath=[".","*"];return steps.forEach(function(step){var position=step.index+1;step.id?xpath.push("*[position()="+position+" and @id='"+step.id+"']"):"text"===step.type?xpath.push("text()["+position+"]"):xpath.push("*["+position+"]")}),xpath.join("/")}},{key:"stepsToQuerySelector",value:function(steps){var query=["html"];return steps.forEach(function(step){var position=step.index+1;step.id?query.push("#"+step.id):"text"===step.type||query.push("*:nth-child("+position+")")}),query.join(">")}},{key:"textNodes",value:function(container,ignoreClass){return Array.prototype.slice.call(container.childNodes).filter(function(node){return 3===node.nodeType||!(!ignoreClass||!node.classList.contains(ignoreClass))})}},{key:"walkToNode",value:function(steps,_doc,ignoreClass){var children,step,i,doc=_doc||document,container=doc.documentElement,len=steps.length;for(i=0;i<len&&(step=steps[i],"element"===step.type?step.id?container=doc.getElementById(step.id):(children=container.children||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.findChildren)(container),container=children[step.index]):"text"===step.type&&(container=this.textNodes(container,ignoreClass)[step.index]),container);i++);return container}},{key:"findNode",value:function(steps,_doc,ignoreClass){var container,xpath,doc=_doc||document;return ignoreClass||void 0===doc.evaluate?container=ignoreClass?this.walkToNode(steps,doc,ignoreClass):this.walkToNode(steps,doc):(xpath=this.stepsToXpath(steps),container=doc.evaluate(xpath,doc,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),container}},{key:"fixMiss",value:function(steps,offset,_doc,ignoreClass){var child,len,container=this.findNode(steps.slice(0,-1),_doc,ignoreClass),children=container.childNodes,map=this.normalizedMap(children,3,ignoreClass),lastStepIndex=steps[steps.length-1].index;for(var childIndex in map){if(!map.hasOwnProperty(childIndex))return;if(map[childIndex]===lastStepIndex){if(child=children[childIndex],len=child.textContent.length,!(offset>len)){container=1===child.nodeType?child.childNodes[0]:child;break}offset-=len}}return{container:container,offset:offset}}},{key:"toRange",value:function(_doc,ignoreClass){var range,start,end,startContainer,endContainer,startSteps,endSteps,missed,doc=_doc||document,cfi=this,needsIgnoring=!!ignoreClass&&null!=doc.querySelector("."+ignoreClass);if(range=void 0!==doc.createRange?doc.createRange():new __WEBPACK_IMPORTED_MODULE_0__utils_core__.RangeObject,cfi.range?(start=cfi.start,startSteps=cfi.path.steps.concat(start.steps),startContainer=this.findNode(startSteps,doc,needsIgnoring?ignoreClass:null),end=cfi.end,endSteps=cfi.path.steps.concat(end.steps),endContainer=this.findNode(endSteps,doc,needsIgnoring?ignoreClass:null)):(start=cfi.path,startSteps=cfi.path.steps,startContainer=this.findNode(cfi.path.steps,doc,needsIgnoring?ignoreClass:null)),!startContainer)return console.log("No startContainer found for",this.toString()),null;try{null!=start.terminal.offset?range.setStart(startContainer,start.terminal.offset):range.setStart(startContainer,0)}catch(e){missed=this.fixMiss(startSteps,start.terminal.offset,doc,needsIgnoring?ignoreClass:null),range.setStart(missed.container,missed.offset)}if(endContainer)try{null!=end.terminal.offset?range.setEnd(endContainer,end.terminal.offset):range.setEnd(endContainer,0)}catch(e){missed=this.fixMiss(endSteps,cfi.end.terminal.offset,doc,needsIgnoring?ignoreClass:null),range.setEnd(missed.container,missed.offset)}return range}},{key:"isCfiString",value:function(str){return"string"==typeof str&&0===str.indexOf("epubcfi(")&&")"===str[str.length-1]}},{key:"generateChapterComponent",value:function(_spineNodeIndex,_pos,id){var pos=parseInt(_pos),spineNodeIndex=2*(_spineNodeIndex+1),cfi="/"+spineNodeIndex+"/";return cfi+=2*(pos+1),id&&(cfi+="["+id+"]"),cfi}},{key:"collapse",value:function(toStart){this.range&&(this.range=!1,toStart?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}]),EpubCFI}();__webpack_exports__.a=EpubCFI},function(module,exports,__webpack_require__){"use strict";function GenericWorker(name){this.name=name||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}GenericWorker.prototype={push:function(chunk){this.emit("data",chunk)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(name,listener){return this._listeners[name].push(listener),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(name,arg){if(this._listeners[name])for(var i=0;i<this._listeners[name].length;i++)this._listeners[name][i].call(this,arg)},pipe:function(next){return next.registerPrevious(this)},registerPrevious:function(previous){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=previous.streamInfo,this.mergeStreamInfo(),this.previous=previous;var self=this;return previous.on("data",function(chunk){self.processChunk(chunk)}),previous.on("end",function(){self.end()}),previous.on("error",function(e){self.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var withError=!1;return this.generatedError&&(this.error(this.generatedError),withError=!0),this.previous&&this.previous.resume(),!withError},flush:function(){},processChunk:function(chunk){this.push(chunk)},withStreamInfo:function(key,value){return this.extraStreamInfo[key]=value,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var key in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(key)&&(this.streamInfo[key]=this.extraStreamInfo[key])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var me="Worker "+this.name;return this.previous?this.previous+" -> "+me:me}},module.exports=GenericWorker},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return DOM_EVENTS}),__webpack_require__.d(__webpack_exports__,"a",function(){return EVENTS});var DOM_EVENTS=["keydown","keyup","keypressed","mouseup","mousedown","click","touchend","touchstart"],EVENTS={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled"},VIEWS:{AXIS:"axis",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"}}},function(module,exports,__webpack_require__){"use strict";var on,_once2,off,emit,methods,descriptors,base,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},d=__webpack_require__(78),callable=__webpack_require__(106),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"===_typeof(data[type])?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},_once2=function(type,listener){var _once,self;return callable(listener),self=this,on.call(this,type,_once=function(){off.call(self,type,_once),apply.call(listener,this,arguments)}),_once.__eeOnceListener__=listener,this},off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(data=this.__ee__,!data[type])return this;if(listeners=data[type],"object"===(void 0===listeners?"undefined":_typeof(listeners)))for(i=0;candidate=listeners[i];++i)candidate!==listener&&candidate.__eeOnceListener__!==listener||(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else listeners!==listener&&listeners.__eeOnceListener__!==listener||delete data[type];return this},emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"===(void 0===listeners?"undefined":_typeof(listeners))){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}},methods={on:on,once:_once2,off:off,emit:emit},descriptors={on:d(on),once:d(_once2),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods},function(module,exports,__webpack_require__){"use strict";if(exports.base64=!0,exports.array=!0,exports.string=!0,exports.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,exports.nodebuffer="undefined"!=typeof Buffer,exports.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)exports.blob=!1;else{var buffer=new ArrayBuffer(0);try{exports.blob=0===new Blob([buffer],{type:"application/zip"}).size}catch(e){try{var Builder=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,builder=new Builder;builder.append(buffer),exports.blob=0===builder.getBlob("application/zip").size}catch(e){exports.blob=!1}}}try{exports.nodestream=!!__webpack_require__(62).Readable}catch(e){exports.nodestream=!1}},function(module,exports,__webpack_require__){"use strict";function _has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if("object"!==(void 0===source?"undefined":_typeof(source)))throw new TypeError(source+"must be non-object");for(var p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)return void dest.set(src.subarray(src_offs,src_offs+len),dest_offs);for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_path_webpack__=__webpack_require__(20),__WEBPACK_IMPORTED_MODULE_0_path_webpack___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_path_webpack__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Path=function(){function Path(pathString){_classCallCheck(this,Path);var protocol,parsed;protocol=pathString.indexOf("://"),protocol>-1&&(pathString=new URL(pathString).pathname),parsed=this.parse(pathString),this.path=pathString,this.isDirectory(pathString)?this.directory=pathString:this.directory=parsed.dir+"/",this.filename=parsed.base,this.extension=parsed.ext.slice(1)}return _createClass(Path,[{key:"parse",value:function(what){return __WEBPACK_IMPORTED_MODULE_0_path_webpack___default.a.parse(what)}},{key:"isAbsolute",value:function(what){return __WEBPACK_IMPORTED_MODULE_0_path_webpack___default.a.isAbsolute(what||this.path)}},{key:"isDirectory",value:function(what){return"/"===what.charAt(what.length-1)}},{key:"resolve",value:function(what){return __WEBPACK_IMPORTED_MODULE_0_path_webpack___default.a.resolve(this.directory,what)}},{key:"relative",value:function(what){return __WEBPACK_IMPORTED_MODULE_0_path_webpack___default.a.relative(this.directory,what)}},{key:"splitPath",value:function(filename){return this.splitPathRe.exec(filename).slice(1)}},{key:"toString",value:function(){return this.path}}]),Path}();__webpack_exports__.a=Path},function(module,exports,__webpack_require__){"use strict";function Utf8DecodeWorker(){GenericWorker.call(this,"utf-8 decode"),this.leftOver=null}function Utf8EncodeWorker(){GenericWorker.call(this,"utf-8 encode")}for(var utils=__webpack_require__(0),support=__webpack_require__(6),nodejsUtils=__webpack_require__(18),GenericWorker=__webpack_require__(3),_utf8len=new Array(256),i=0;i<256;i++)_utf8len[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=support.uint8array?new Uint8Array(buf_len):new Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},utf8border=function(buf,max){var pos;for(max=max||buf.length,max>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0?max:0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max},buf2string=function(buf){var i,out,c,c_len,len=buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}return utf16buf.length!==out&&(utf16buf.subarray?utf16buf=utf16buf.subarray(0,out):utf16buf.length=out),utils.applyFromCharCode(utf16buf)};exports.utf8encode=function(str){return support.nodebuffer?nodejsUtils.newBufferFrom(str,"utf-8"):string2buf(str)},exports.utf8decode=function(buf){return support.nodebuffer?utils.transformTo("nodebuffer",buf).toString("utf-8"):(buf=utils.transformTo(support.uint8array?"uint8array":"array",buf),buf2string(buf))},utils.inherits(Utf8DecodeWorker,GenericWorker),Utf8DecodeWorker.prototype.processChunk=function(chunk){var data=utils.transformTo(support.uint8array?"uint8array":"array",chunk.data);if(this.leftOver&&this.leftOver.length){if(support.uint8array){var previousData=data;data=new Uint8Array(previousData.length+this.leftOver.length),data.set(this.leftOver,0),data.set(previousData,this.leftOver.length)}else data=this.leftOver.concat(data);this.leftOver=null}var nextBoundary=utf8border(data),usableData=data;nextBoundary!==data.length&&(support.uint8array?(usableData=data.subarray(0,nextBoundary),this.leftOver=data.subarray(nextBoundary,data.length)):(usableData=data.slice(0,nextBoundary),this.leftOver=data.slice(nextBoundary,data.length))),this.push({data:exports.utf8decode(usableData),meta:chunk.meta})},Utf8DecodeWorker.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:exports.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},exports.Utf8DecodeWorker=Utf8DecodeWorker,utils.inherits(Utf8EncodeWorker,GenericWorker),Utf8EncodeWorker.prototype.processChunk=function(chunk){this.push({data:exports.utf8encode(chunk.data),meta:chunk.meta})},exports.Utf8EncodeWorker=Utf8EncodeWorker},function(module,exports,__webpack_require__){"use strict";function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(self){self.end()}var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var processNextTick=__webpack_require__(30),util=__webpack_require__(11);util.inherits=__webpack_require__(12);var Readable=__webpack_require__(59),Writable=__webpack_require__(61);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}},function(module,exports){function isArray(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"===(void 0===arg?"undefined":_typeof(arg))}function isUndefined(arg){return void 0===arg}function isRegExp(re){return"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"===(void 0===arg?"undefined":_typeof(arg))&&null!==arg}function isDate(d){return"[object Date]"===objectToString(d)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"===(void 0===arg?"undefined":_typeof(arg))||void 0===arg}function objectToString(o){return Object.prototype.toString.call(o)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer},function(module,exports,__webpack_require__){try{var util=__webpack_require__(36);if("function"!=typeof util.inherits)throw"";module.exports=util.inherits}catch(e){module.exports=__webpack_require__(113)}},function(module,exports,__webpack_require__){"use strict";var ES6Promise=null;ES6Promise="undefined"!=typeof Promise?Promise:__webpack_require__(144),module.exports={Promise:ES6Promise}},function(module,exports){module.exports=require("buffer")},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_3__mapping__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_4__utils_replacements__=__webpack_require__(16),__WEBPACK_IMPORTED_MODULE_5__utils_constants__=__webpack_require__(4),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),isChrome=/Chrome/.test(navigator.userAgent),isWebkit=!isChrome&&/AppleWebKit/.test(navigator.userAgent),Contents=function(){function Contents(doc,content,cfiBase,sectionIndex){_classCallCheck(this,Contents),this.epubcfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a,this.document=doc,this.documentElement=this.document.documentElement,this.content=content||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=sectionIndex||0,this.cfiBase=cfiBase||"",this.epubReadingSystem("epub.js",ePub.VERSION),this.listeners()}return _createClass(Contents,[{key:"width",value:function(w){var frame=this.content;return w&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(w)&&(w+="px"),w&&(frame.style.width=w),this.window.getComputedStyle(frame).width}},{key:"height",value:function(h){var frame=this.content;return h&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(h)&&(h+="px"),h&&(frame.style.height=h),this.window.getComputedStyle(frame).height}},{key:"contentWidth",value:function(w){var content=this.content||this.document.body;return w&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(w)&&(w+="px"),w&&(content.style.width=w),this.window.getComputedStyle(content).width}},{key:"contentHeight",value:function(h){var content=this.content||this.document.body;return h&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(h)&&(h+="px"),h&&(content.style.height=h),this.window.getComputedStyle(content).height}},{key:"textWidth",value:function(){var width=void 0,range=this.document.createRange(),content=this.content||this.document.body,border=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.borders)(content);return range.selectNodeContents(content),width=range.getBoundingClientRect().width,border&&border.width&&(width+=border.width),Math.round(width)}},{key:"textHeight",value:function(){var height=void 0,range=this.document.createRange(),content=this.content||this.document.body,border=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.borders)(content);return range.selectNodeContents(content),height=range.getBoundingClientRect().height,height&&border.height&&(height+=border.height),Math.round(height)}},{key:"scrollWidth",value:function(){return this.documentElement.scrollWidth}},{key:"scrollHeight",value:function(){return this.documentElement.scrollHeight}},{key:"overflow",value:function(_overflow){return _overflow&&(this.documentElement.style.overflow=_overflow),this.window.getComputedStyle(this.documentElement).overflow}},{key:"overflowX",value:function(overflow){return overflow&&(this.documentElement.style.overflowX=overflow),this.window.getComputedStyle(this.documentElement).overflowX}},{key:"overflowY",value:function(overflow){return overflow&&(this.documentElement.style.overflowY=overflow),this.window.getComputedStyle(this.documentElement).overflowY}},{key:"css",value:function(property,value,priority){var content=this.content||this.document.body;return value&&content.style.setProperty(property,value,priority?"important":""),this.window.getComputedStyle(content)[property]}},{key:"viewport",value:function(options){var $viewport=this.document.querySelector("meta[name='viewport']"),parsed={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},newContent=[],settings={};if($viewport&&$viewport.hasAttribute("content")){var content=$viewport.getAttribute("content"),_width2=content.match(/width\s*=\s*([^,]*)/),_height2=content.match(/height\s*=\s*([^,]*)/),_scale2=content.match(/initial-scale\s*=\s*([^,]*)/),_minimum2=content.match(/minimum-scale\s*=\s*([^,]*)/),_maximum2=content.match(/maximum-scale\s*=\s*([^,]*)/),_scalable2=content.match(/user-scalable\s*=\s*([^,]*)/);_width2&&_width2.length&&void 0!==_width2[1]&&(parsed.width=_width2[1]),_height2&&_height2.length&&void 0!==_height2[1]&&(parsed.height=_height2[1]),_scale2&&_scale2.length&&void 0!==_scale2[1]&&(parsed.scale=_scale2[1]),_minimum2&&_minimum2.length&&void 0!==_minimum2[1]&&(parsed.minimum=_minimum2[1]),_maximum2&&_maximum2.length&&void 0!==_maximum2[1]&&(parsed.maximum=_maximum2[1]),_scalable2&&_scalable2.length&&void 0!==_scalable2[1]&&(parsed.scalable=_scalable2[1])}return settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.defaults)(options||{},parsed),options&&(settings.width&&newContent.push("width="+settings.width),settings.height&&newContent.push("height="+settings.height),settings.scale&&newContent.push("initial-scale="+settings.scale),"no"===settings.scalable?(newContent.push("minimum-scale="+settings.scale),newContent.push("maximum-scale="+settings.scale),newContent.push("user-scalable="+settings.scalable)):(settings.scalable&&newContent.push("user-scalable="+settings.scalable),settings.minimum&&newContent.push("minimum-scale="+settings.minimum),settings.maximum&&newContent.push("minimum-scale="+settings.maximum)),$viewport||($viewport=this.document.createElement("meta"),$viewport.setAttribute("name","viewport"),this.document.querySelector("head").appendChild($viewport)),$viewport.setAttribute("content",newContent.join(", ")),this.window.scrollTo(0,0)),settings}},{key:"expand",value:function(){this.emit(__WEBPACK_IMPORTED_MODULE_5__utils_constants__.a.CONTENTS.EXPAND)}},{key:"listeners",value:function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()}},{key:"removeListeners",value:function(){this.removeEventListeners(),this.removeSelectionListeners(),clearTimeout(this.expanding)}},{key:"resizeCheck",value:function(){var width=this.textWidth(),height=this.textHeight();width==this._size.width&&height==this._size.height||(this._size={width:width,height:height},this.onResize&&this.onResize(this._size),this.emit(__WEBPACK_IMPORTED_MODULE_5__utils_constants__.a.CONTENTS.RESIZE,this._size))}},{key:"resizeListeners",value:function(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}},{key:"transitionListeners",value:function(){var body=this.content;body.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",body.style.transitionDuration="0.001ms",body.style.transitionTimingFunction="linear",body.style.transitionDelay="0",this.document.addEventListener("transitionend",this.resizeCheck.bind(this))}},{key:"mediaQueryListeners",value:function(){for(var sheets=this.document.styleSheets,mediaChangeHandler=function(m){m.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),i=0;i<sheets.length;i+=1){var rules;try{rules=sheets[i].cssRules}catch(e){return}if(!rules)return;for(var j=0;j<rules.length;j+=1)if(rules[j].media){var mql=this.window.matchMedia(rules[j].media.mediaText);mql.addListener(mediaChangeHandler)}}}},{key:"resizeObservers",value:function(){var _this=this;this.observer=new MutationObserver(function(mutations){_this.resizeCheck()});var config={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,config)}},{key:"imageLoadListeners",value:function(target){for(var img,images=this.document.querySelectorAll("img"),i=0;i<images.length;i++)img=images[i],void 0!==img.naturalWidth&&0===img.naturalWidth&&(img.onload=this.expand.bind(this))}},{key:"fontLoadListeners",value:function(target){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}},{key:"root",value:function(){return this.document?this.document.documentElement:null}},{key:"locationOf",value:function(target,ignoreClass){var position,targetPos={left:0,top:0};if(!this.document)return targetPos;if(this.epubcfi.isCfiString(target)){var range=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(target).toRange(this.document,ignoreClass);if(range)if(range.startContainer.nodeType===Node.ELEMENT_NODE)position=range.startContainer.getBoundingClientRect(),targetPos.left=position.left,targetPos.top=position.top;else if(isWebkit){var container=range.startContainer,newRange=new Range;try{1===container.nodeType?position=container.getBoundingClientRect():range.startOffset+2<container.length?(newRange.setStart(container,range.startOffset),newRange.setEnd(container,range.startOffset+2),position=newRange.getBoundingClientRect()):range.startOffset-2>0?(newRange.setStart(container,range.startOffset-2),newRange.setEnd(container,range.startOffset),position=newRange.getBoundingClientRect()):position=container.parentNode.getBoundingClientRect()}catch(e){console.error(e,e.stack)}}else position=range.getBoundingClientRect()}else if("string"==typeof target&&target.indexOf("#")>-1){var id=target.substring(target.indexOf("#")+1),el=this.document.getElementById(id);el&&(position=el.getBoundingClientRect())}return position&&(targetPos.left=position.left,targetPos.top=position.top),targetPos}},{key:"addStylesheet",value:function(src){return new Promise(function(resolve,reject){var $stylesheet,ready=!1;return this.document?($stylesheet=this.document.querySelector("link[href='"+src+"']"))?void resolve(!0):($stylesheet=this.document.createElement("link"),$stylesheet.type="text/css",$stylesheet.rel="stylesheet",$stylesheet.href=src,$stylesheet.onload=$stylesheet.onreadystatechange=function(){ready||this.readyState&&"complete"!=this.readyState||(ready=!0,setTimeout(function(){resolve(!0)},1))},void this.document.head.appendChild($stylesheet)):void resolve(!1)}.bind(this))}},{key:"addStylesheetRules",value:function(rules){var styleEl,styleSheet,key="epubjs-inserted-css";if(this.document&&rules&&0!==rules.length)if(styleEl=this.document.getElementById("#"+key),styleEl||(styleEl=this.document.createElement("style"),styleEl.id=key),this.document.head.appendChild(styleEl),styleSheet=styleEl.sheet,"[object Array]"===Object.prototype.toString.call(rules))for(var i=0,rl=rules.length;i<rl;i++){var j=1,rule=rules[i],selector=rules[i][0],propStr="";"[object Array]"===Object.prototype.toString.call(rule[1][0])&&(rule=rule[1],j=0);for(var pl=rule.length;j<pl;j++){var prop=rule[j];propStr+=prop[0]+":"+prop[1]+(prop[2]?" !important":"")+";\n"}styleSheet.insertRule(selector+"{"+propStr+"}",styleSheet.cssRules.length)}else{var selectors=Object.keys(rules);selectors.forEach(function(selector){var definition=rules[selector];if(Array.isArray(definition))definition.forEach(function(item){var _rules=Object.keys(item),result=_rules.map(function(rule){return rule+":"+item[rule]}).join(";");styleSheet.insertRule(selector+"{"+result+"}",styleSheet.cssRules.length)});else{var _rules=Object.keys(definition),result=_rules.map(function(rule){return rule+":"+definition[rule]}).join(";");styleSheet.insertRule(selector+"{"+result+"}",styleSheet.cssRules.length)}})}}},{key:"addScript",value:function(src){return new Promise(function(resolve,reject){var $script,ready=!1;if(!this.document)return void resolve(!1);$script=this.document.createElement("script"),$script.type="text/javascript",$script.async=!0,$script.src=src,$script.onload=$script.onreadystatechange=function(){ready||this.readyState&&"complete"!=this.readyState||(ready=!0,setTimeout(function(){resolve(!0)},1))},this.document.head.appendChild($script)}.bind(this))}},{key:"addClass",value:function(className){var content;this.document&&(content=this.content||this.document.body)&&content.classList.add(className)}},{key:"removeClass",value:function(className){var content;this.document&&(content=this.content||this.document.body)&&content.classList.remove(className)}},{key:"addEventListeners",value:function(){this.document&&__WEBPACK_IMPORTED_MODULE_5__utils_constants__.b.forEach(function(eventName){this.document.addEventListener(eventName,this.triggerEvent.bind(this),!1)},this)}},{key:"removeEventListeners",value:function(){this.document&&__WEBPACK_IMPORTED_MODULE_5__utils_constants__.b.forEach(function(eventName){this.document.removeEventListener(eventName,this.triggerEvent,!1)},this)}},{key:"triggerEvent",value:function(e){this.emit(e.type,e)}},{key:"addSelectionListeners",value:function(){this.document&&this.document.addEventListener("selectionchange",this.onSelectionChange.bind(this),!1)}},{key:"removeSelectionListeners",value:function(){this.document&&this.document.removeEventListener("selectionchange",this.onSelectionChange,!1)}},{key:"onSelectionChange",value:function(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var selection=this.window.getSelection();this.triggerSelectedEvent(selection)}.bind(this),250)}},{key:"triggerSelectedEvent",value:function(selection){var range,cfirange;selection&&selection.rangeCount>0&&(range=selection.getRangeAt(0),range.collapsed||(cfirange=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(range,this.cfiBase).toString(),this.emit(__WEBPACK_IMPORTED_MODULE_5__utils_constants__.a.CONTENTS.SELECTED,cfirange),this.emit(__WEBPACK_IMPORTED_MODULE_5__utils_constants__.a.CONTENTS.SELECTED_RANGE,range)))}},{key:"range",value:function(_cfi,ignoreClass){return new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(_cfi).toRange(this.document,ignoreClass)}},{key:"cfiFromRange",value:function(range,ignoreClass){return new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(range,this.cfiBase,ignoreClass).toString()}},{key:"cfiFromNode",value:function(node,ignoreClass){return new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(node,this.cfiBase,ignoreClass).toString()}},{key:"map",value:function(layout){return new __WEBPACK_IMPORTED_MODULE_3__mapping__.a(layout).section()}},{key:"size",value:function(width,height){var viewport={scale:1,scalable:"no"};this.layoutStyle("scrolling"),width>=0&&(this.width(width),viewport.width=width,this.css("padding","0 "+width/12+"px",!0)),height>=0&&(this.height(height),viewport.height=height),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(viewport)}},{key:"columns",value:function(width,height,columnWidth,gap){var COLUMN_AXIS=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.prefixed)("column-axis"),COLUMN_GAP=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.prefixed)("column-gap"),COLUMN_WIDTH=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.prefixed)("column-width"),COLUMN_FILL=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.prefixed)("column-fill"),writingMode=this.writingMode(),axis=0===writingMode.indexOf("vertical")?"vertical":"horizontal";this.layoutStyle("paginated"),"rtl"===this.content.dir&&this.direction("rtl"),this.width(width),this.height(height),this.viewport({width:width,height:height,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),"vertical"===axis?this.css("padding",gap/2+"px 20px",!0):this.css("padding","20px "+gap/2+"px",!0),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(COLUMN_AXIS,"horizontal"),this.css(COLUMN_FILL,"auto"),this.css(COLUMN_GAP,gap+"px"),this.css(COLUMN_WIDTH,columnWidth+"px")}},{key:"scaler",value:function(scale,offsetX,offsetY){var scaleStr="scale("+scale+")",translateStr="";this.css("transform-origin","top left"),(offsetX>=0||offsetY>=0)&&(translateStr=" translate("+(offsetX||0)+"px, "+(offsetY||0)+"px )"),this.css("transform",scaleStr+translateStr)}},{key:"fit",value:function(width,height){var viewport=this.viewport(),widthScale=width/parseInt(viewport.width),heightScale=height/parseInt(viewport.height),scale=widthScale<heightScale?widthScale:heightScale,offsetY=(height-viewport.height*scale)/2;this.layoutStyle("paginated"),this.width(width),this.height(height),this.overflow("hidden"),this.scaler(scale,0,offsetY),this.css("background-color","transparent")}},{key:"direction",value:function(dir){this.documentElement&&(this.documentElement.style.direction=dir)}},{key:"mapPage",value:function(cfiBase,layout,start,end,dev){return new __WEBPACK_IMPORTED_MODULE_3__mapping__.a(layout,dev).page(this,cfiBase,start,end)}},{key:"linksHandler",value:function(){var _this2=this;__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__utils_replacements__.a)(this.content,function(href){_this2.emit(__WEBPACK_IMPORTED_MODULE_5__utils_constants__.a.CONTENTS.LINK_CLICKED,href)})}},{key:"writingMode",value:function(mode){var WRITING_MODE=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.prefixed)("writing-mode");return mode&&this.documentElement&&(this.documentElement.style[WRITING_MODE]=mode),this.window.getComputedStyle(this.documentElement)[WRITING_MODE]||""}},{key:"layoutStyle",value:function(style){return style&&(this._layoutStyle=style,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}},{key:"epubReadingSystem",value:function(name,version){return navigator.epubReadingSystem={name:name,version:version,layoutStyle:this.layoutStyle(),hasFeature:function(feature){switch(feature){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;case"spine-scripting":default:return!1}}},navigator.epubReadingSystem}},{key:"destroy",value:function(){this.observer&&this.observer.disconnect(),this.document.removeEventListener("transitionend",this.resizeCheck),this.removeListeners()}}],[{key:"listenedEvents",get:function(){return __WEBPACK_IMPORTED_MODULE_5__utils_constants__.b}}]),Contents}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(Contents.prototype),__webpack_exports__.a=Contents},function(module,__webpack_exports__,__webpack_require__){"use strict";function replaceBase(doc,section){var base,head,url=section.url,absolute=url.indexOf("://")>-1;doc&&(head=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(doc,"head"),base=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(head,"base"),base||(base=doc.createElement("base"),head.insertBefore(base,head.firstChild)),!absolute&&window&&window.location&&(url=window.location.origin+url),base.setAttribute("href",url))}function replaceCanonical(doc,section){var head,link,url=section.canonical;doc&&(head=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(doc,"head"),link=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(head,"link[rel='canonical']"),link?link.setAttribute("href",url):(link=doc.createElement("link"),link.setAttribute("rel","canonical"),link.setAttribute("href",url),head.appendChild(link)))}function replaceMeta(doc,section){var head,meta,id=section.idref;doc&&(head=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(doc,"head"),meta=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(head,"link[property='dc.identifier']"),meta?meta.setAttribute("content",id):(meta=doc.createElement("meta"),meta.setAttribute("name","dc.identifier"),meta.setAttribute("content",id),head.appendChild(meta)))}function replaceLinks(contents,fn){var links=contents.querySelectorAll("a[href]");if(links.length)for(var base=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.qs)(contents.ownerDocument,"base"),location=base?base.getAttribute("href"):void 0,replaceLink=function(link){var href=link.getAttribute("href");if(0!==href.indexOf("mailto:")){var absolute=href.indexOf("://")>-1,linkUrl=new __WEBPACK_IMPORTED_MODULE_1__url__.a(href,location);absolute?link.setAttribute("target","_blank"):link.onclick=function(){return fn(linkUrl&&linkUrl.hash?linkUrl.Path.path+linkUrl.hash:linkUrl?linkUrl.Path.path:href),!1}}}.bind(this),i=0;i<links.length;i++)replaceLink(links[i])}function substitute(content,urls,replacements){return urls.forEach(function(url,i){url&&replacements[i]&&(content=content.replace(new RegExp(url,"g"),replacements[i]))}),content}__webpack_exports__.c=replaceBase,__webpack_exports__.d=replaceCanonical,__webpack_exports__.e=replaceMeta,__webpack_exports__.a=replaceLinks,__webpack_exports__.b=substitute;var __WEBPACK_IMPORTED_MODULE_0__core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__url__=__webpack_require__(17);__webpack_require__(8)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__path__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_1_path_webpack__=__webpack_require__(20),__WEBPACK_IMPORTED_MODULE_1_path_webpack___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_path_webpack__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Url=function(){function Url(urlString,baseString){_classCallCheck(this,Url);var basePath,absolute=urlString.indexOf("://")>-1,pathname=urlString;if(this.Url=void 0,this.href=urlString,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=baseString,!absolute&&!1!==baseString&&"string"!=typeof baseString&&window&&window.location&&(this.base=window.location.href),absolute||this.base)try{this.base?this.Url=new URL(urlString,this.base):this.Url=new URL(urlString),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,pathname=this.Url.pathname}catch(e){this.Url=void 0,this.base&&(basePath=new __WEBPACK_IMPORTED_MODULE_0__path__.a(this.base),pathname=basePath.resolve(pathname))}this.Path=new __WEBPACK_IMPORTED_MODULE_0__path__.a(pathname),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}return _createClass(Url,[{key:"path",value:function(){return this.Path}},{key:"resolve",value:function(what){var fullpath,isAbsolute=what.indexOf("://")>-1;return isAbsolute?what:(fullpath=__WEBPACK_IMPORTED_MODULE_1_path_webpack___default.a.resolve(this.directory,what),this.origin+fullpath)}},{key:"relative",value:function(what){return __WEBPACK_IMPORTED_MODULE_1_path_webpack___default.a.relative(what,this.directory)}},{key:"toString",value:function(){return this.href}}]),Url}();__webpack_exports__.a=Url},function(module,exports,__webpack_require__){"use strict";module.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(data,encoding){return new Buffer(data,encoding)},allocBuffer:function(size){return Buffer.alloc?Buffer.alloc(size):new Buffer(size)},isBuffer:function(b){return Buffer.isBuffer(b)},isStream:function(obj){return obj&&"function"==typeof obj.on&&"function"==typeof obj.pause&&"function"==typeof obj.resume}}},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports,__webpack_require__){"use strict";function assertPath(path){if("string"!=typeof path)throw new TypeError("Path must be a string. Received "+path)}function normalizeStringPosix(path,allowAboveRoot){for(var code,res="",lastSlash=-1,dots=0,i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else{if(47===code)break;code=47}if(47===code){if(lastSlash===i-1||1===dots);else if(lastSlash!==i-1&&2===dots){if(res.length<2||46!==res.charCodeAt(res.length-1)||46!==res.charCodeAt(res.length-2))if(res.length>2){for(var start=res.length-1,j=start;j>=0&&47!==res.charCodeAt(j);--j);if(j!==start){res=-1===j?"":res.slice(0,j),lastSlash=i,dots=0;continue}}else if(2===res.length||1===res.length){res="",lastSlash=i,dots=0;continue}allowAboveRoot&&(res.length>0?res+="/..":res="..")}else res.length>0?res+="/"+path.slice(lastSlash+1,i):res=path.slice(lastSlash+1,i);lastSlash=i,dots=0}else 46===code&&-1!==dots?++dots:dots=-1}return res}function _format(sep,pathObject){var dir=pathObject.dir||pathObject.root,base=pathObject.base||(pathObject.name||"")+(pathObject.ext||"");return dir?dir===pathObject.root?dir+base:dir+sep+base:base}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if(!process)var process={cwd:function(){return"/"}};var posix={resolve:function(){for(var cwd,resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path;i>=0?path=arguments[i]:(void 0===cwd&&(cwd=process.cwd()),path=cwd),assertPath(path),0!==path.length&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=47===path.charCodeAt(0))}return resolvedPath=normalizeStringPosix(resolvedPath,!resolvedAbsolute),resolvedAbsolute?resolvedPath.length>0?"/"+resolvedPath:"/":resolvedPath.length>0?resolvedPath:"."},normalize:function(path){if(assertPath(path),0===path.length)return".";var isAbsolute=47===path.charCodeAt(0),trailingSeparator=47===path.charCodeAt(path.length-1);return path=normalizeStringPosix(path,!isAbsolute),0!==path.length||isAbsolute||(path="."),path.length>0&&trailingSeparator&&(path+="/"),isAbsolute?"/"+path:path},isAbsolute:function(path){return assertPath(path),path.length>0&&47===path.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var joined,i=0;i<arguments.length;++i){var arg=arguments[i];assertPath(arg),arg.length>0&&(void 0===joined?joined=arg:joined+="/"+arg)}return void 0===joined?".":posix.normalize(joined)},relative:function(from,to){if(assertPath(from),assertPath(to),from===to)return"";if(from=posix.resolve(from),to=posix.resolve(to),from===to)return"";for(var fromStart=1;fromStart<from.length&&47===from.charCodeAt(fromStart);++fromStart);for(var fromEnd=from.length,fromLen=fromEnd-fromStart,toStart=1;toStart<to.length&&47===to.charCodeAt(toStart);++toStart);for(var toEnd=to.length,toLen=toEnd-toStart,length=fromLen<toLen?fromLen:toLen,lastCommonSep=-1,i=0;i<=length;++i){if(i===length){if(toLen>length){if(47===to.charCodeAt(toStart+i))return to.slice(toStart+i+1);if(0===i)return to.slice(toStart+i)}else fromLen>length&&(47===from.charCodeAt(fromStart+i)?lastCommonSep=i:0===i&&(lastCommonSep=0));break}var fromCode=from.charCodeAt(fromStart+i);if(fromCode!==to.charCodeAt(toStart+i))break;47===fromCode&&(lastCommonSep=i)}var out="";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i)i!==fromEnd&&47!==from.charCodeAt(i)||(0===out.length?out+="..":out+="/..");return out.length>0?out+to.slice(toStart+lastCommonSep):(toStart+=lastCommonSep,47===to.charCodeAt(toStart)&&++toStart,to.slice(toStart))},_makeLong:function(path){return path},dirname:function(path){if(assertPath(path),0===path.length)return".";for(var code=path.charCodeAt(0),hasRoot=47===code,end=-1,matchedSlash=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return-1===end?hasRoot?"/":".":hasRoot&&1===end?"//":path.slice(0,end)},basename:function(path,ext){if(void 0!==ext&&"string"!=typeof ext)throw new TypeError('"ext" argument must be a string');assertPath(path);var i,start=0,end=-1,matchedSlash=!0;if(void 0!==ext&&ext.length>0&&ext.length<=path.length){if(ext.length===path.length&&ext===path)return"";var extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47===code){if(!matchedSlash){start=i+1;break}}else-1===firstNonSlashEnd&&(matchedSlash=!1,firstNonSlashEnd=i+1),extIdx>=0&&(code===ext.charCodeAt(extIdx)?-1==--extIdx&&(end=i):(extIdx=-1,end=firstNonSlashEnd))}return start===end?end=firstNonSlashEnd:-1===end&&(end=path.length),path.slice(start,end)}for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)},extname:function(path){assertPath(path);for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)},format:function(pathObject){if(null===pathObject||"object"!==(void 0===pathObject?"undefined":_typeof(pathObject)))throw new TypeError('Parameter "pathObject" must be an object, not '+(void 0===pathObject?"undefined":_typeof(pathObject)));return _format("/",pathObject)},parse:function(path){assertPath(path);var ret={root:"",dir:"",base:"",ext:"",name:""};if(0===path.length)return ret;var start,code=path.charCodeAt(0),isAbsolute=47===code;isAbsolute?(ret.root="/",start=1):start=0;for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;i>=start;--i)if(47!==(code=path.charCodeAt(i)))-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?-1!==end&&(ret.base=ret.name=0===startPart&&isAbsolute?path.slice(1,end):path.slice(startPart,end)):(0===startPart&&isAbsolute?(ret.name=path.slice(1,startDot),ret.base=path.slice(1,end)):(ret.name=path.slice(startPart,startDot),ret.base=path.slice(startPart,end)),ret.ext=path.slice(startDot,end)),startPart>0?ret.dir=path.slice(0,startPart-1):isAbsolute&&(ret.dir="/"),ret},sep:"/",delimiter:":",posix:null};module.exports=posix},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__utils_hook__=__webpack_require__(22),__WEBPACK_IMPORTED_MODULE_3__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_4__utils_queue__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_5__layout__=__webpack_require__(40),__WEBPACK_IMPORTED_MODULE_6__themes__=__webpack_require__(96),__WEBPACK_IMPORTED_MODULE_7__contents__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_8__annotations__=__webpack_require__(80),__WEBPACK_IMPORTED_MODULE_9__utils_constants__=__webpack_require__(4),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Rendition=function(){function Rendition(book,options){_classCallCheck(this,Rendition),this.settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,script:null}),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings,options),"object"===_typeof(this.settings.manager)&&(this.manager=this.settings.manager),this.book=book,this.hooks={},this.hooks.display=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.serialize=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.content=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.unloaded=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.layout=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.render=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.show=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new __WEBPACK_IMPORTED_MODULE_6__themes__.a(this),this.annotations=new __WEBPACK_IMPORTED_MODULE_8__annotations__.a(this),this.epubcfi=new __WEBPACK_IMPORTED_MODULE_3__epubcfi__.a,this.q=new __WEBPACK_IMPORTED_MODULE_4__utils_queue__.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}return _createClass(Rendition,[{key:"setManager",value:function(manager){this.manager=manager}},{key:"requireManager",value:function(manager){return"string"==typeof manager&&"undefined"!=typeof ePub?ePub.ViewManagers[manager]:manager}},{key:"requireView",value:function(view){return"string"==typeof view&&"undefined"!=typeof ePub?ePub.Views[view]:view}},{key:"start",value:function(){this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.STARTED),this.starting.resolve()}},{key:"attachTo",value:function(element){return this.q.enqueue(function(){this.manager.render(element,{width:this.settings.width,height:this.settings.height}),this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.ATTACHED)}.bind(this))}},{key:"display",value:function(target){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,target)}},{key:"_display",value:function(target){var _this=this;if(this.book){var section,displaying=(this.epubcfi.isCfiString(target),new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer),displayed=displaying.promise;return this.displaying=displaying,(this.book.locations.length()&&(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isFloat)(target)||"1.0"===target)&&(target=this.book.locations.cfiFromPercentage(parseFloat(target))),section=this.book.spine.get(target))?(this.manager.display(section,target).then(function(){displaying.resolve(section),_this.displaying=void 0,_this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.DISPLAYED,section),_this.reportLocation()},function(err){_this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.DISPLAY_ERROR,err)}),displayed):(displaying.reject(new Error("No Section Found")),displayed)}}},{key:"afterDisplayed",value:function(view){var _this2=this;view.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.VIEWS.MARK_CLICKED,function(cfiRange,data){return _this2.triggerMarkEvent(cfiRange,data,view)}),this.hooks.render.trigger(view,this).then(function(){view.contents?_this2.hooks.content.trigger(view.contents,_this2).then(function(){_this2.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.RENDERED,view.section,view)}):_this2.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.RENDERED,view.section,view)})}},{key:"afterRemoved",value:function(view){var _this3=this;this.hooks.unloaded.trigger(view,this).then(function(){_this3.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.REMOVED,view.section,view)})}},{key:"onResized",value:function(size){this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.RESIZED,{width:size.width,height:size.height}),this.location&&this.location.start&&this.display(this.location.start.cfi)}},{key:"onOrientationChange",value:function(orientation){this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.ORIENTATION_CHANGE,orientation)}},{key:"moveTo",value:function(offset){this.manager.moveTo(offset)}},{key:"resize",value:function(width,height){width&&(this.settings.width=width),height&&(this.settings.height=width),this.manager.resize(width,height)}},{key:"clear",value:function(){this.manager.clear()}},{key:"next",value:function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:"prev",value:function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:"determineLayoutProperties",value:function(metadata){var layout=this.settings.layout||metadata.layout||"reflowable",spread=this.settings.spread||metadata.spread||"auto",orientation=this.settings.orientation||metadata.orientation||"auto",flow=this.settings.flow||metadata.flow||"auto",viewport=metadata.viewport||"",minSpreadWidth=this.settings.minSpreadWidth||metadata.minSpreadWidth||800,direction=this.settings.direction||metadata.direction||"ltr";return(0===this.settings.width||this.settings.width>0)&&(0===this.settings.height||this.settings.height),{layout:layout,spread:spread,orientation:orientation,flow:flow,viewport:viewport,minSpreadWidth:minSpreadWidth,direction:direction}}},{key:"flow",value:function(_flow2){var _flow=_flow2;"scrolled"!==_flow2&&"scrolled-doc"!==_flow2&&"scrolled-continuous"!==_flow2||(_flow="scrolled"),"auto"!==_flow2&&"paginated"!==_flow2||(_flow="paginated"),this.settings.flow=_flow2,this._layout&&this._layout.flow(_flow),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(_flow),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:"layout",value:function(settings){var _this4=this;return settings&&(this._layout=new __WEBPACK_IMPORTED_MODULE_5__layout__.a(settings),this._layout.spread(settings.spread,this.settings.minSpreadWidth),this._layout.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.LAYOUT.UPDATED,function(props,changed){_this4.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.LAYOUT,props,changed)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}},{key:"spread",value:function(_spread,min){this._layout.spread(_spread,min),this.manager.isRendered()&&this.manager.updateLayout()}},{key:"direction",value:function(dir){this.settings.direction=dir||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:"reportLocation",value:function(){return this.q.enqueue(function(){requestAnimationFrame(function(){var location=this.manager.currentLocation();if(location&&location.then&&"function"==typeof location.then)location.then(function(result){var located=this.located(result);located&&located.start&&located.end&&(this.location=located,this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.RELOCATED,this.location))}.bind(this));else if(location){var located=this.located(location);if(!located||!located.start||!located.end)return;this.location=located,this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}},{key:"currentLocation",value:function(){var location=this.manager.currentLocation();if(location&&location.then&&"function"==typeof location.then)location.then(function(result){return this.located(result)}.bind(this));else if(location){var located=this.located(location);return located}}},{key:"located",value:function(location){if(!location.length)return{};var start=location[0],end=location[location.length-1],located={start:{index:start.index,href:start.href,cfi:start.mapping.start,displayed:{page:start.pages[0]||1,total:start.totalPages}},end:{index:end.index,href:end.href,cfi:end.mapping.end,displayed:{page:end.pages[end.pages.length-1]||1,total:end.totalPages}}},locationStart=this.book.locations.locationFromCfi(start.mapping.start),locationEnd=this.book.locations.locationFromCfi(end.mapping.end);null!=locationStart&&(located.start.location=locationStart,located.start.percentage=this.book.locations.percentageFromLocation(locationStart)),null!=locationEnd&&(located.end.location=locationEnd,located.end.percentage=this.book.locations.percentageFromLocation(locationEnd));var pageStart=this.book.pageList.pageFromCfi(start.mapping.start),pageEnd=this.book.pageList.pageFromCfi(end.mapping.end);return-1!=pageStart&&(located.start.page=pageStart),-1!=pageEnd&&(located.end.page=pageEnd),end.index===this.book.spine.last().index&&located.end.displayed.page>=located.end.displayed.total&&(located.atEnd=!0),start.index===this.book.spine.first().index&&1===located.start.displayed.page&&(located.atStart=!0),located}},{key:"destroy",value:function(){this.manager&&this.manager.destroy(),this.book=void 0}},{key:"passEvents",value:function(contents){var _this5=this;__WEBPACK_IMPORTED_MODULE_7__contents__.a.listenedEvents.forEach(function(e){contents.on(e,function(ev){return _this5.triggerViewEvent(ev,contents)})}),contents.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.CONTENTS.SELECTED,function(e){return _this5.triggerSelectedEvent(e,contents)})}},{key:"triggerViewEvent",value:function(e,contents){this.emit(e.type,e,contents)}},{key:"triggerSelectedEvent",value:function(cfirange,contents){this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.SELECTED,cfirange,contents)}},{key:"triggerMarkEvent",value:function(cfiRange,data,contents){this.emit(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.RENDITION.MARK_CLICKED,cfiRange,data,contents)}},{key:"getRange",value:function(cfi,ignoreClass){var _cfi=new __WEBPACK_IMPORTED_MODULE_3__epubcfi__.a(cfi),found=this.manager.visible().filter(function(view){if(_cfi.spinePos===view.index)return!0});if(found.length)return found[0].contents.range(_cfi,ignoreClass)}},{key:"adjustImages",value:function(contents){return"pre-paginated"===this._layout.name?new Promise(function(resolve){resolve()}):(contents.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth+"px":"100%")+"!important","max-height":(this._layout.height?.6*this._layout.height+"px":"60%")+"!important","object-fit":"contain","page-break-inside":"avoid"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth+"px":"100%")+"!important","max-height":(this._layout.height?.6*this._layout.height+"px":"60%")+"!important","page-break-inside":"avoid"}}),new Promise(function(resolve,reject){setTimeout(function(){resolve()},1)}))}},{key:"getContents",value:function(){return this.manager?this.manager.getContents():[]}},{key:"views",value:function(){return(this.manager?this.manager.views:void 0)||[]}},{key:"handleLinks",value:function(contents){var _this6=this;contents&&contents.on(__WEBPACK_IMPORTED_MODULE_9__utils_constants__.a.CONTENTS.LINK_CLICKED,function(href){var relative=_this6.book.path.relative(href);_this6.display(relative)})}},{key:"injectStylesheet",value:function(doc,section){var style=doc.createElement("link");style.setAttribute("type","text/css"),style.setAttribute("rel","stylesheet"),style.setAttribute("href",this.settings.stylesheet),doc.getElementsByTagName("head")[0].appendChild(style)}},{key:"injectScript",value:function(doc,section){var script=doc.createElement("script");script.setAttribute("type","text/javascript"),script.setAttribute("src",this.settings.script),script.textContent=" ",doc.getElementsByTagName("head")[0].appendChild(script)}},{key:"injectIdentifier",value:function(doc,section){var ident=this.book.package.metadata.identifier,meta=doc.createElement("meta");meta.setAttribute("name","dc.relation.ispartof"),ident&&meta.setAttribute("content",ident),doc.getElementsByTagName("head")[0].appendChild(meta)}}]),Rendition}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(Rendition.prototype),__webpack_exports__.a=Rendition},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Hook=function(){function Hook(context){_classCallCheck(this,Hook),this.context=context||this,this.hooks=[]}return _createClass(Hook,[{key:"register",value:function(){for(var i=0;i<arguments.length;++i)if("function"==typeof arguments[i])this.hooks.push(arguments[i]);else for(var j=0;j<arguments[i].length;++j)this.hooks.push(arguments[i][j])}},{key:"trigger",value:function(){var args=arguments,context=this.context,promises=[];return this.hooks.forEach(function(task){var executing=task.apply(context,args);executing&&"function"==typeof executing.then&&promises.push(executing)}),Promise.all(promises)}},{key:"list",value:function(){return this.hooks}},{key:"clear",value:function(){return this.hooks=[]}}]),Hook}();__webpack_exports__.a=Hook},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__core__=__webpack_require__(1),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Queue=function(){function Queue(context){_classCallCheck(this,Queue),this._q=[],this.context=context,this.tick=__WEBPACK_IMPORTED_MODULE_0__core__.requestAnimationFrame,this.running=!1,this.paused=!1}return _createClass(Queue,[{key:"enqueue",value:function(){var deferred,promise,queued,task=[].shift.call(arguments),args=arguments;if(!task)throw new Error("No Task Provided");return"function"==typeof task?(deferred=new __WEBPACK_IMPORTED_MODULE_0__core__.defer,promise=deferred.promise,queued={task:task,args:args,deferred:deferred,promise:promise}):queued={promise:task},this._q.push(queued),0!=this.paused||this.running||this.run(),queued.promise}},{key:"dequeue",value:function(){var inwait,task,result;return!this._q.length||this.paused?(inwait=new __WEBPACK_IMPORTED_MODULE_0__core__.defer,inwait.deferred.resolve(),inwait.promise):(inwait=this._q.shift(),(task=inwait.task)?(result=task.apply(this.context,inwait.args),result&&"function"==typeof result.then?result.then(function(){inwait.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){inwait.deferred.reject.apply(this.context,arguments)}.bind(this)):(inwait.deferred.resolve.apply(this.context,result),inwait.promise)):inwait.promise?inwait.promise:void 0)}},{key:"dump",value:function(){for(;this._q.length;)this.dequeue()}},{key:"run",value:function(){var _this=this;return this.running||(this.running=!0,this.defered=new __WEBPACK_IMPORTED_MODULE_0__core__.defer),this.tick.call(window,function(){_this._q.length?_this.dequeue().then(function(){this.run()}.bind(_this)):(_this.defered.resolve(),_this.running=void 0)}),1==this.paused&&(this.paused=!1),this.defered.promise}},{key:"flush",value:function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}},{key:"clear",value:function(){this._q=[]}},{key:"length",value:function(){return this._q.length}},{key:"pause",value:function(){this.paused=!0}},{key:"stop",value:function(){this._q=[],this.running=!1,this.paused=!0}}]),Queue}();__webpack_exports__.a=Queue},function(module,__webpack_exports__,__webpack_require__){"use strict";function request(url,type,withCredentials,headers){function err(e){deferred.reject(e)}function handler(){if(this.readyState===XMLHttpRequest.DONE){var responseXML=!1;if(""!==this.responseType&&"document"!==this.responseType||(responseXML=this.responseXML),200===this.status||responseXML){var r;if(!this.response&&!responseXML)return deferred.reject({status:this.status,message:"Empty Response",stack:(new Error).stack}),deferred.promise;if(403===this.status)return deferred.reject({status:this.status,response:this.response,message:"Forbidden",stack:(new Error).stack}),deferred.promise;r=responseXML?this.responseXML:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.isXml)(type)?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.parse)(this.response,"text/xml"):"xhtml"==type?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.parse)(this.response,"application/xhtml+xml"):"html"==type||"htm"==type?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.parse)(this.response,"text/html"):"json"==type?JSON.parse(this.response):"blob"==type?supportsURL?this.response:new Blob([this.response]):this.response,deferred.resolve(r)}else deferred.reject({status:this.status,message:this.response,stack:(new Error).stack})}}var header,supportsURL="undefined"!=typeof window&&window.URL,BLOB_RESPONSE=supportsURL?"blob":"arraybuffer",deferred=new __WEBPACK_IMPORTED_MODULE_0__core__.defer,xhr=new XMLHttpRequest,xhrPrototype=XMLHttpRequest.prototype;"overrideMimeType"in xhrPrototype||Object.defineProperty(xhrPrototype,"overrideMimeType",{value:function(){}}),withCredentials&&(xhr.withCredentials=!0),xhr.onreadystatechange=handler,xhr.onerror=err,xhr.open("GET",url,!0);for(header in headers)xhr.setRequestHeader(header,headers[header]);return"json"==type&&xhr.setRequestHeader("Accept","application/json"),type||(type=new __WEBPACK_IMPORTED_MODULE_1__path__.a(url).extension),"blob"==type&&(xhr.responseType=BLOB_RESPONSE),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__core__.isXml)(type)&&xhr.overrideMimeType("text/xml"),"binary"==type&&(xhr.responseType="arraybuffer"),xhr.send(),deferred.promise}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__path__=__webpack_require__(8);__webpack_exports__.default=request},function(module,exports,__webpack_require__){"use strict";var _undefined=__webpack_require__(97)();module.exports=function(val){return val!==_undefined&&null!==val}},function(module,exports,__webpack_require__){"use strict";function CompressedObject(compressedSize,uncompressedSize,crc32,compression,data){this.compressedSize=compressedSize,this.uncompressedSize=uncompressedSize,this.crc32=crc32,this.compression=compression,this.compressedContent=data}var external=__webpack_require__(13),DataWorker=__webpack_require__(53),DataLengthProbe=__webpack_require__(52),Crc32Probe=__webpack_require__(51),DataLengthProbe=__webpack_require__(52);CompressedObject.prototype={getContentWorker:function(){var worker=new DataWorker(external.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new DataLengthProbe("data_length")),that=this;return worker.on("end",function(){if(this.streamInfo.data_length!==that.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),worker},getCompressedWorker:function(){return new DataWorker(external.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},CompressedObject.createWorkerFrom=function(uncompressedWorker,compression,compressionOptions){return uncompressedWorker.pipe(new Crc32Probe).pipe(new DataLengthProbe("uncompressedSize")).pipe(compression.compressWorker(compressionOptions)).pipe(new DataLengthProbe("compressedSize")).withStreamInfo("compression",compression)},module.exports=CompressedObject},function(module,exports,__webpack_require__){"use strict";function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}function crc32str(crc,str,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^str.charCodeAt(i))];return-1^crc}var utils=__webpack_require__(0),crcTable=function(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=function(input,crc){return void 0!==input&&input.length?"string"!==utils.getTypeOf(input)?crc32(0|crc,input,input.length,0):crc32str(0|crc,input,input.length,0):0}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(58)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};module.exports=function(it){return"object"===(void 0===it?"undefined":_typeof(it))?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){"use strict";function nextTick(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function(){fn.call(null,arg1)});case 3:return process.nextTick(function(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function(){fn.call(null,arg1,arg2,arg3)});default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(function(){fn.apply(null,args)})}}!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports=nextTick:module.exports=process.nextTick},function(module,exports){function isObject(value){var type=void 0===value?"undefined":_typeof(value);return null!=value&&("object"==type||"function"==type)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};module.exports=isObject},function(module,exports,__webpack_require__){"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(module,exports){module.exports=function(rawScriptExports,compiledTemplate,scopeId,cssModules){var esModule,scriptExports=rawScriptExports=rawScriptExports||{},type=typeof rawScriptExports.default;"object"!==type&&"function"!==type||(esModule=rawScriptExports,scriptExports=rawScriptExports.default);var options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(compiledTemplate&&(options.render=compiledTemplate.render,options.staticRenderFns=compiledTemplate.staticRenderFns),scopeId&&(options._scopeId=scopeId),cssModules){var computed=options.computed||(options.computed={});Object.keys(cssModules).forEach(function(key){var module=cssModules[key];computed[key]=function(){return module}})}return{esModule:esModule,exports:scriptExports,options:options}}},function(module,exports){module.exports=require("events")},function(module,exports){module.exports=require("stream")},function(module,exports){module.exports=require("util")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__TreeMenu_vue__=__webpack_require__(177),__WEBPACK_IMPORTED_MODULE_0__TreeMenu_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__TreeMenu_vue__);__webpack_exports__.a=__WEBPACK_IMPORTED_MODULE_0__TreeMenu_vue___default.a},function(module,exports){function lookup(filename){return filename&&mimeTypes[filename.split(".").pop().toLowerCase()]||defaultValue}var table={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},mimeTypes=function(){var type,subtype,val,index,mimeTypes={};for(type in table)if(table.hasOwnProperty(type))for(subtype in table[type])if(table[type].hasOwnProperty(subtype))if("string"==typeof(val=table[type][subtype]))mimeTypes[val]=type+"/"+subtype;else for(index=0;index<val.length;index++)mimeTypes[val[index]]=type+"/"+subtype;return mimeTypes}(),defaultValue="text/plain";module.exports={lookup:lookup}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__utils_url__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_3__utils_path__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_4__spine__=__webpack_require__(95),__WEBPACK_IMPORTED_MODULE_5__locations__=__webpack_require__(85),__WEBPACK_IMPORTED_MODULE_6__container__=__webpack_require__(82),__WEBPACK_IMPORTED_MODULE_7__packaging__=__webpack_require__(91),__WEBPACK_IMPORTED_MODULE_8__navigation__=__webpack_require__(90),__WEBPACK_IMPORTED_MODULE_9__resources__=__webpack_require__(93),__WEBPACK_IMPORTED_MODULE_10__pagelist__=__webpack_require__(92),__WEBPACK_IMPORTED_MODULE_11__rendition__=__webpack_require__(21),__WEBPACK_IMPORTED_MODULE_12__archive__=__webpack_require__(81),__WEBPACK_IMPORTED_MODULE_13__utils_request__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_14__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_15__utils_constants__=__webpack_require__(4),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),INPUT_TYPE={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"},Book=function(){function Book(url,options){var _this=this;_classCallCheck(this,Book),void 0===options&&"object"===(void 0===url?"undefined":_typeof(url))&&(options=url,url=void 0),this.settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0}),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings,options),this.opening=new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,spine:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,metadata:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,cover:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,navigation:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,pageList:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,resources:new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources]),this.isRendered=!1,this.request=this.settings.requestMethod||__WEBPACK_IMPORTED_MODULE_13__utils_request__.default,this.spine=new __WEBPACK_IMPORTED_MODULE_4__spine__.a,this.locations=new __WEBPACK_IMPORTED_MODULE_5__locations__.a(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,url&&this.open(url).catch(function(error){var err=new Error("Cannot load book at "+url);_this.emit(__WEBPACK_IMPORTED_MODULE_15__utils_constants__.a.BOOK.OPEN_FAILED,err)})}return _createClass(Book,[{key:"open",value:function(input,what){var opening,type=what||this.determineType(input);return type===INPUT_TYPE.BINARY?(this.archived=!0,this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a("/",""),opening=this.openEpub(input)):type===INPUT_TYPE.BASE64?(this.archived=!0,this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a("/",""),opening=this.openEpub(input,type)):type===INPUT_TYPE.EPUB?(this.archived=!0,this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a("/",""),opening=this.request(input,"binary").then(this.openEpub.bind(this))):type==INPUT_TYPE.OPF?(this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a(input),opening=this.openPackaging(this.url.Path.toString())):type==INPUT_TYPE.MANIFEST?(this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a(input),opening=this.openManifest(this.url.Path.toString())):(this.url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a(input),opening=this.openContainer("META-INF/container.xml").then(this.openPackaging.bind(this))),opening}},{key:"openEpub",value:function(data,encoding){var _this2=this;return this.unarchive(data,encoding||this.settings.encoding).then(function(){return _this2.openContainer("META-INF/container.xml")}).then(function(packagePath){return _this2.openPackaging(packagePath)})}},{key:"openContainer",value:function(url){var _this3=this;return this.load(url).then(function(xml){return _this3.container=new __WEBPACK_IMPORTED_MODULE_6__container__.a(xml),_this3.resolve(_this3.container.packagePath)})}},{key:"openPackaging",value:function(url){var _this4=this;return this.path=new __WEBPACK_IMPORTED_MODULE_3__utils_path__.a(url),this.load(url).then(function(xml){return _this4.packaging=new __WEBPACK_IMPORTED_MODULE_7__packaging__.a(xml),_this4.unpack(_this4.packaging)})}},{key:"openManifest",value:function(url){var _this5=this;return this.path=new __WEBPACK_IMPORTED_MODULE_3__utils_path__.a(url),this.load(url).then(function(json){return _this5.packaging=new __WEBPACK_IMPORTED_MODULE_7__packaging__.a,_this5.packaging.load(json),_this5.unpack(_this5.packaging)})}},{key:"load",value:function(path){var resolved;return this.archived?(resolved=this.resolve(path),this.archive.request(resolved)):(resolved=this.resolve(path),this.request(resolved,null,this.settings.requestCredentials,this.settings.requestHeaders))}},{key:"resolve",value:function(path,absolute){if(path){var resolved=path;return path.indexOf("://")>-1?path:(this.path&&(resolved=this.path.resolve(path)),0!=absolute&&this.url&&(resolved=this.url.resolve(resolved)),resolved)}}},{key:"canonical",value:function(path){return path?this.settings.canonical?this.settings.canonical(path):this.resolve(path,!0):""}},{key:"determineType",value:function(input){var url,path,extension;return"base64"===this.settings.encoding?INPUT_TYPE.BASE64:"string"!=typeof input?INPUT_TYPE.BINARY:(url=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a(input),path=url.path(),extension=path.extension,extension?"epub"===extension?INPUT_TYPE.EPUB:"opf"===extension?INPUT_TYPE.OPF:"json"===extension?INPUT_TYPE.MANIFEST:void 0:INPUT_TYPE.DIRECTORY)}},{key:"unpack",value:function(opf){var _this6=this;this.package=opf,this.spine.unpack(this.package,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new __WEBPACK_IMPORTED_MODULE_9__resources__.a(this.package.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.package).then(function(){_this6.loading.navigation.resolve(_this6.navigation)}),this.package.coverPath&&(this.cover=this.resolve(this.package.coverPath)),this.loading.manifest.resolve(this.package.manifest),this.loading.metadata.resolve(this.package.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&"none"!=this.settings.replacements?this.replacements().then(function(){_this6.opening.resolve(_this6)}).catch(function(err){console.error(err)}):this.opening.resolve(this)}},{key:"loadNavigation",value:function(opf){var _this7=this,navPath=opf.navPath||opf.ncxPath,toc=opf.toc;return toc?new Promise(function(resolve,reject){_this7.navigation=new __WEBPACK_IMPORTED_MODULE_8__navigation__.a(toc),opf.pageList&&(_this7.pageList=new __WEBPACK_IMPORTED_MODULE_10__pagelist__.a(opf.pageList)),resolve(_this7.navigation)}):navPath?this.load(navPath,"xml").then(function(xml){return _this7.navigation=new __WEBPACK_IMPORTED_MODULE_8__navigation__.a(xml),_this7.pageList=new __WEBPACK_IMPORTED_MODULE_10__pagelist__.a(xml),_this7.navigation}):new Promise(function(resolve,reject){_this7.navigation=new __WEBPACK_IMPORTED_MODULE_8__navigation__.a,_this7.pageList=new __WEBPACK_IMPORTED_MODULE_10__pagelist__.a,resolve(_this7.navigation)})}},{key:"section",value:function(target){return this.spine.get(target)}},{key:"renderTo",value:function(element,options){return this.rendition=new __WEBPACK_IMPORTED_MODULE_11__rendition__.a(this,options),this.rendition.attachTo(element),this.rendition}},{key:"setRequestCredentials",value:function(credentials){this.settings.requestCredentials=credentials}},{key:"setRequestHeaders",value:function(headers){this.settings.requestHeaders=headers}},{key:"unarchive",value:function(input,encoding){return this.archive=new __WEBPACK_IMPORTED_MODULE_12__archive__.a,this.archive.open(input,encoding)}},{key:"coverUrl",value:function(){var _this8=this;return this.loaded.cover.then(function(url){return _this8.archived?_this8.resources.get(_this8.cover):_this8.cover})}},{key:"replacements",value:function(){var _this9=this;return this.spine.hooks.serialize.register(function(output,section){section.output=_this9.resources.substitute(output,section.url)}),this.resources.replacements().then(function(){return _this9.resources.replaceCss()})}},{key:"getRange",value:function(cfiRange){var cfi=new __WEBPACK_IMPORTED_MODULE_14__epubcfi__.a(cfiRange),item=this.spine.get(cfi.spinePos),_request=this.load.bind(this);return item?item.load(_request).then(function(contents){return cfi.toRange(item.document)}):new Promise(function(resolve,reject){reject("CFI could not be found")})}},{key:"key",value:function(identifier){return"epubjs:0.3:"+(identifier||this.package.metadata.identifier||this.url.filename)}},{key:"destroy",value:function(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}]),Book}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(Book.prototype),__webpack_exports__.a=Book},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__utils_constants__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_2_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_2_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_event_emitter__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Layout=function(){function Layout(settings){_classCallCheck(this,Layout),this.settings=settings,this.name=settings.layout||"reflowable",this._spread="none"!==settings.spread,this._minSpreadWidth=settings.minSpreadWidth||800,this._evenSpreads=settings.evenSpreads||!1,"scrolled"===settings.flow||"scrolled-continuous"===settings.flow||"scrolled-doc"===settings.flow?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}return _createClass(Layout,[{key:"flow",value:function(_flow){return void 0!==_flow&&(this._flow="scrolled"===_flow||"scrolled-continuous"===_flow||"scrolled-doc"===_flow?"scrolled":"paginated",this.update({flow:this._flow})),this._flow}},{key:"spread",value:function(_spread,min){return _spread&&(this._spread="none"!==_spread,this.update({spread:this._spread})),min>=0&&(this._minSpreadWidth=min),this._spread}},{key:"calculate",value:function(_width,_height,_gap){var columnWidth,spreadWidth,pageWidth,delta,divisor=1,gap=_gap||0,width=_width,height=_height,section=Math.floor(width/12);divisor=this._spread&&width>=this._minSpreadWidth?2:1,"reflowable"!==this.name||"paginated"!==this._flow||_gap>=0||(gap=section%2==0?section:section-1),"pre-paginated"===this.name&&(gap=0),divisor>1?(columnWidth=width/divisor-gap,pageWidth=columnWidth+gap):(columnWidth=width,pageWidth=width),"pre-paginated"===this.name&&divisor>1&&(width=columnWidth),spreadWidth=columnWidth*divisor+gap,delta=width,this.width=width,this.height=height,this.spreadWidth=spreadWidth,this.pageWidth=pageWidth,this.delta=delta,this.columnWidth=columnWidth,this.gap=gap,this.divisor=divisor,this.update({width:width,height:height,spreadWidth:spreadWidth,pageWidth:pageWidth,delta:delta,columnWidth:columnWidth,gap:gap,divisor:divisor})}},{key:"format",value:function(contents){return"pre-paginated"===this.name?contents.fit(this.columnWidth,this.height):"paginated"===this._flow?contents.columns(this.width,this.height,this.columnWidth,this.gap):contents.size(this.width,null)}},{key:"count",value:function(totalLength,pageLength){var spreads=void 0,pages=void 0;return"pre-paginated"===this.name?(spreads=1,pages=1):"paginated"===this._flow?(pageLength=pageLength||this.delta,spreads=Math.ceil(totalLength/pageLength),pages=spreads*this.divisor):(pageLength=pageLength||this.height,spreads=Math.ceil(totalLength/pageLength),pages=spreads),{spreads:spreads,pages:pages}}},{key:"update",value:function(props){var _this=this;if(Object.keys(props).forEach(function(propName){_this.props[propName]===props[propName]&&delete props[propName]}),Object.keys(props).length>0){var newProps=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(this.props,props);this.emit(__WEBPACK_IMPORTED_MODULE_1__utils_constants__.a.LAYOUT.UPDATED,newProps,props)}}}]),Layout}();__WEBPACK_IMPORTED_MODULE_2_event_emitter___default()(Layout.prototype),__webpack_exports__.a=Layout},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__mapping__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_3__utils_queue__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_4__helpers_stage__=__webpack_require__(87),__WEBPACK_IMPORTED_MODULE_5__helpers_views__=__webpack_require__(88),__WEBPACK_IMPORTED_MODULE_6__utils_constants__=__webpack_require__(4),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),DefaultViewManager=function(){function DefaultViewManager(options){_classCallCheck(this,DefaultViewManager),this.name="default",this.View=options.view,this.request=options.request,this.renditionQueue=options.queue,this.q=new __WEBPACK_IMPORTED_MODULE_3__utils_queue__.a(this),this.settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,flow:"scrolled",ignoreClass:""}),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)(this.settings,options.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0},this.rendered=!1}return _createClass(DefaultViewManager,[{key:"render",value:function(element,size){var tag=element.tagName;!tag||"body"!=tag.toLowerCase()&&"html"!=tag.toLowerCase()||(this.fullsize=!0),this.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=size,this.stage=new __WEBPACK_IMPORTED_MODULE_4__helpers_stage__.a({width:size.width,height:size.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.fullsize,direction:this.settings.direction}),this.stage.attachTo(element),this.container=this.stage.getContainer(),this.views=new __WEBPACK_IMPORTED_MODULE_5__helpers_views__.a(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}},{key:"addEventListeners",value:function(){var scroller;window.addEventListener("unload",function(e){this.destroy()}.bind(this)),scroller=this.fullsize?window:this.container,scroller.addEventListener("scroll",this.onScroll.bind(this))}},{key:"removeEventListeners",value:function(){var scroller;scroller=this.fullsize?window:this.container,scroller.removeEventListener("scroll",this.onScroll.bind(this))}},{key:"destroy",value:function(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}},{key:"onOrientationChange",value:function(e){var _window=window,orientation=_window.orientation;this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.resize(),this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.ORIENTATION_CHANGE,orientation)}.bind(this),500)}},{key:"onResized",value:function(e){this.resize()}},{key:"resize",value:function(width,height){var stageSize=this.stage.size(width,height);if(this.winBounds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height)return void(this._stageSize=void 0);this._stageSize&&this._stageSize.width===stageSize.width&&this._stageSize.height===stageSize.height||(this._stageSize=stageSize,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height}))}},{key:"createView",value:function(section){return new this.View(section,this.viewSettings)}},{key:"display",value:function(section,target){var displaying=new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,displayed=displaying.promise;(target===section.href||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(target))&&(target=void 0);var visible=this.views.find(section);if(visible&&section){var offset=visible.offset();if("ltr"===this.settings.direction)this.scrollTo(offset.left,offset.top,!0);else{var width=visible.width();this.scrollTo(offset.left+width,offset.top,!0)}if(target){var _offset=visible.locationOf(target);this.moveTo(_offset)}return displaying.resolve(),displayed}return this.clear(),this.add(section).then(function(view){if(target){var _offset2=view.locationOf(target);this.moveTo(_offset2)}}.bind(this),function(err){displaying.reject(err)}).then(function(){var next;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(next=section.next()))return this.add(next)}.bind(this)).then(function(){this.views.show(),displaying.resolve()}.bind(this)),displayed}},{key:"afterDisplayed",value:function(view){this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.ADDED,view)}},{key:"afterResized",value:function(view){this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.RESIZE,view.section)}},{key:"moveTo",value:function(offset){var distX=0,distY=0;this.isPaginated?(distX=Math.floor(offset.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(distX=this.container.scrollWidth-this.layout.delta):distY=offset.top,this.scrollTo(distX,distY,!0)}},{key:"add",value:function(section){var _this=this,view=this.createView(section);return this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.VIEWS.AXIS,function(axis){_this.updateAxis(axis)}),view.display(this.request)}},{key:"append",value:function(section){var _this2=this,view=this.createView(section);return this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.VIEWS.AXIS,function(axis){_this2.updateAxis(axis)}),view.display(this.request)}},{key:"prepend",value:function(section){var _this3=this,view=this.createView(section);return view.on(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.VIEWS.RESIZED,function(bounds){_this3.counter(bounds)}),this.views.prepend(view),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.on(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.VIEWS.AXIS,function(axis){_this3.updateAxis(axis)}),view.display(this.request)}},{key:"counter",value:function(bounds){"vertical"===this.settings.axis?this.scrollBy(0,bounds.heightDelta,!0):this.scrollBy(bounds.widthDelta,0,!0)}},{key:"next",value:function(){var next,left,dir=this.settings.direction;if(this.views.length){if(!this.isPaginated||"horizontal"!==this.settings.axis||dir&&"ltr"!==dir)if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===dir)this.scrollLeft=this.container.scrollLeft,left=this.container.scrollLeft,left>0?this.scrollBy(this.layout.delta,0,!0):next=this.views.last().section.next();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop;var top=this.container.scrollTop+this.container.offsetHeight;top<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):next=this.views.last().section.next()}else next=this.views.last().section.next();else this.scrollLeft=this.container.scrollLeft,left=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,left<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):next=this.views.last().section.next();return next?(this.clear(),this.append(next).then(function(){var right;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(right=next.next()))return this.append(right)}.bind(this),function(err){displaying.reject(err)}).then(function(){this.views.show()}.bind(this))):void 0}}},{key:"prev",value:function(){var prev,left,dir=this.settings.direction;if(this.views.length){if(!this.isPaginated||"horizontal"!==this.settings.axis||dir&&"ltr"!==dir)if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===dir)this.scrollLeft=this.container.scrollLeft,left=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,left<=this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):prev=this.views.first().section.prev();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop;var top=this.container.scrollTop;top>0?this.scrollBy(0,-this.layout.height,!0):prev=this.views.first().section.prev()}else prev=this.views.first().section.prev();else this.scrollLeft=this.container.scrollLeft,left=this.container.scrollLeft,left>0?this.scrollBy(-this.layout.delta,0,!0):prev=this.views.first().section.prev();return prev?(this.clear(),this.prepend(prev).then(function(){var left;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(left=prev.prev()))return this.prepend(left)}.bind(this),function(err){displaying.reject(err)}).then(function(){this.isPaginated&&"horizontal"===this.settings.axis&&("rtl"===this.settings.direction?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))):void 0}}},{key:"current",value:function(){var visible=this.visible();return visible.length?visible[visible.length-1]:null}},{key:"clear",value:function(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}},{key:"currentLocation",value:function(){return"vertical"===this.settings.axis?this.location=this.scrolledLocation():this.location=this.paginatedLocation(),this.location}},{key:"scrolledLocation",value:function(){var _this4=this,visible=this.visible(),container=this.container.getBoundingClientRect(),pageHeight=container.height<window.innerHeight?container.height:window.innerHeight,offset=0,used=0;return this.fullsize&&(offset=window.scrollY),visible.map(function(view){var _view$section=view.section,index=_view$section.index,href=_view$section.href,position=view.position(),height=view.height(),startPos=offset+container.top-position.top+used,endPos=startPos+pageHeight-used;endPos>height&&(endPos=height,used=endPos-startPos);var totalPages=_this4.layout.count(height,pageHeight).pages,currPage=Math.ceil(startPos/pageHeight),pages=[],endPage=Math.ceil(endPos/pageHeight);pages=[];for(var i=currPage;i<=endPage;i++){var pg=i+1;pages.push(pg)}return{index:index,href:href,pages:pages,totalPages:totalPages,mapping:_this4.mapping.page(view.contents,view.section.cfiBase,startPos,endPos)}})}},{key:"paginatedLocation",value:function(){var _this5=this,visible=this.visible(),container=this.container.getBoundingClientRect(),left=0;return this.fullsize&&(left=window.scrollX),visible.map(function(view){var _view$section2=view.section,index=_view$section2.index,href=_view$section2.href,position=(view.offset().left,view.position().left),width=view.width(),start=left+container.left-position+0,end=start+_this5.layout.width-0,mapping=_this5.mapping.page(view.contents,view.section.cfiBase,start,end),totalPages=_this5.layout.count(width).pages,startPage=Math.floor(start/_this5.layout.pageWidth),pages=[],endPage=Math.floor(end/_this5.layout.pageWidth);if(startPage<0&&(startPage=0,endPage+=1),"rtl"===_this5.settings.direction){var tempStartPage=startPage;startPage=totalPages-endPage,endPage=totalPages-tempStartPage}for(var i=startPage+1;i<=endPage;i++){var pg=i;pages.push(pg)}return{index:index,href:href,pages:pages,totalPages:totalPages,mapping:mapping}})}},{key:"isVisible",value:function(view,offsetPrev,offsetNext,_container){var position=view.position(),container=_container||this.bounds();return"horizontal"===this.settings.axis&&position.right>container.left-offsetPrev&&position.left<container.right+offsetNext||"vertical"===this.settings.axis&&position.bottom>container.top-offsetPrev&&position.top<container.bottom+offsetNext}},{key:"visible",value:function(){for(var view,container=this.bounds(),views=this.views.displayed(),viewsLength=views.length,visible=[],i=0;i<viewsLength;i++)view=views[i],!0===this.isVisible(view,0,0,container)&&visible.push(view);return visible}},{key:"scrollBy",value:function(x,y,silent){var dir="rtl"===this.settings.direction?-1:1;silent&&(this.ignore=!0),this.fullsize?window.scrollBy(x*dir,y*dir):(x&&(this.container.scrollLeft+=x*dir),y&&(this.container.scrollTop+=y)),this.scrolled=!0}},{key:"scrollTo",value:function(x,y,silent){silent&&(this.ignore=!0),this.fullsize?window.scrollTo(x,y):(this.container.scrollLeft=x,this.container.scrollTop=y),this.scrolled=!0}},{key:"onScroll",value:function(){var scrollTop=void 0,scrollLeft=void 0;this.fullsize?(scrollTop=window.scrollY,scrollLeft=window.scrollX):(scrollTop=this.container.scrollTop,scrollLeft=this.container.scrollLeft),this.scrollTop=scrollTop,this.scrollLeft=scrollLeft,this.ignore?this.ignore=!1:(this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.SCROLL,{top:scrollTop,left:scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(__WEBPACK_IMPORTED_MODULE_6__utils_constants__.a.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}},{key:"bounds",value:function(){var bounds;return bounds=this.stage.bounds(),bounds}},{key:"applyLayout",value:function(layout){this.layout=layout,this.updateLayout()}},{key:"updateLayout",value:function(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:"setLayout",value:function(layout){this.viewSettings.layout=layout,this.mapping=new __WEBPACK_IMPORTED_MODULE_2__mapping__.a(layout.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(view){view&&view.setLayout(layout)})}},{key:"updateAxis",value:function(axis,forceUpdate){this.isPaginated||(axis="vertical"),(forceUpdate||axis!==this.settings.axis)&&(this.settings.axis=axis,this.stage&&this.stage.axis(axis),this.viewSettings.axis=axis,this.mapping&&(this.mapping=new __WEBPACK_IMPORTED_MODULE_2__mapping__.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&"vertical"===axis?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread))}},{key:"updateFlow",value:function(flow){var isPaginated="paginated"===flow||"auto"===flow;this.isPaginated=isPaginated,"scrolled-doc"!==flow&&"scrolled-continuous"!==flow&&"scrolled"!==flow||this.updateAxis("vertical"),this.viewSettings.flow=flow,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=isPaginated?"hidden":"auto",this.updateLayout()}},{key:"getContents",value:function(){var contents=[];return this.views?(this.views.forEach(function(view){var viewContents=view&&view.contents;viewContents&&contents.push(viewContents)}),contents):contents}},{key:"direction",value:function(){var dir=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ltr";this.settings.direction=dir,this.stage&&this.stage.direction(dir),this.viewSettings.direction=dir,this.updateLayout()}},{key:"isRendered",value:function(){return this.rendered}}]),DefaultViewManager}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(DefaultViewManager.prototype),__webpack_exports__.a=DefaultViewManager},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__epubcfi__=__webpack_require__(2),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Mapping=function(){function Mapping(layout,direction,axis,dev){_classCallCheck(this,Mapping),this.layout=layout,this.horizontal="horizontal"===axis,this.direction=direction||"ltr",this._dev=dev}return _createClass(Mapping,[{key:"section",value:function(view){var ranges=this.findRanges(view);return this.rangeListToCfiList(view.section.cfiBase,ranges)}},{key:"page",value:function(contents,cfiBase,start,end){var result,root=!(!contents||!contents.document)&&contents.document.body;if(root){if(result=this.rangePairToCfiPair(cfiBase,{start:this.findStart(root,start,end),end:this.findEnd(root,start,end)}),!0===this._dev){var doc=contents.document,startRange=new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a(result.start).toRange(doc),endRange=new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a(result.end).toRange(doc),selection=doc.defaultView.getSelection(),r=doc.createRange();selection.removeAllRanges(),r.setStart(startRange.startContainer,startRange.startOffset),r.setEnd(endRange.endContainer,endRange.endOffset),selection.addRange(r)}return result}}},{key:"walk",value:function(root,func){if(!root||root.nodeType!==Node.TEXT_NODE){var filter={acceptNode:function(node){return node.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},safeFilter=filter.acceptNode;safeFilter.acceptNode=filter.acceptNode;for(var node,result,treeWalker=document.createTreeWalker(root,NodeFilter.SHOW_TEXT,safeFilter,!1);(node=treeWalker.nextNode())&&!(result=func(node)););return result}}},{key:"findRanges",value:function(view){for(var start,end,columns=[],scrollWidth=view.contents.scrollWidth(),spreads=Math.ceil(scrollWidth/this.layout.spreadWidth),count=spreads*this.layout.divisor,columnWidth=this.layout.columnWidth,gap=this.layout.gap,i=0;i<count.pages;i++)start=(columnWidth+gap)*i,end=columnWidth*(i+1)+gap*i,columns.push({start:this.findStart(view.document.body,start,end),end:this.findEnd(view.document.body,start,end)});return columns}},{key:"findStart",value:function(root,start,end){for(var $el,found,_this=this,stack=[root],$prev=root;stack.length;)if($el=stack.shift(),found=this.walk($el,function(node){var left,right,top,bottom,elPos;if(elPos=_this.getBounds(node),_this.horizontal&&"ltr"===_this.direction){if(left=_this.horizontal?elPos.left:elPos.top,right=_this.horizontal?elPos.right:elPos.bottom,left>=start&&left<=end)return node;if(right>start)return node;$prev=node,stack.push(node)}else if(_this.horizontal&&"rtl"===_this.direction){if(left=elPos.left,(right=elPos.right)<=end&&right>=start)return node;if(left<end)return node;$prev=node,stack.push(node)}else{if(top=elPos.top,bottom=elPos.bottom,top>=start&&top<=end)return node;if(bottom>start)return node;$prev=node,stack.push(node)}}))return this.findTextStartRange(found,start,end);return this.findTextStartRange($prev,start,end)}},{key:"findEnd",value:function(root,start,end){for(var $el,found,_this2=this,stack=[root],$prev=root;stack.length;)if($el=stack.shift(),found=this.walk($el,function(node){var left,right,top,bottom,elPos;if(elPos=_this2.getBounds(node),_this2.horizontal&&"ltr"===_this2.direction){if(left=Math.round(elPos.left),right=Math.round(elPos.right),left>end&&$prev)return $prev;if(right>end)return node;$prev=node,stack.push(node)}else if(_this2.horizontal&&"rtl"===_this2.direction){if(left=Math.round(_this2.horizontal?elPos.left:elPos.top),(right=Math.round(_this2.horizontal?elPos.right:elPos.bottom))<start&&$prev)return $prev;if(left<start)return node;$prev=node,stack.push(node)}else{if(top=Math.round(elPos.top),bottom=Math.round(elPos.bottom),top>end&&$prev)return $prev;if(bottom>end)return node;$prev=node,stack.push(node)}}))return this.findTextEndRange(found,start,end);return this.findTextEndRange($prev,start,end)}},{key:"findTextStartRange",value:function(node,start,end){for(var range,pos,ranges=this.splitTextNodeIntoRanges(node),i=0;i<ranges.length;i++)if(range=ranges[i],pos=range.getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(pos.left>=start)return range}else if(this.horizontal&&"rtl"===this.direction){if(pos.right<=end)return range}else if(pos.top>=start)return range;return ranges[0]}},{key:"findTextEndRange",value:function(node,start,end){for(var prev,range,pos,left,right,top,bottom,ranges=this.splitTextNodeIntoRanges(node),i=0;i<ranges.length;i++){if(range=ranges[i],pos=range.getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(left=pos.left,right=pos.right,left>end&&prev)return prev;if(right>end)return range}else if(this.horizontal&&"rtl"===this.direction){if(left=pos.left,(right=pos.right)<start&&prev)return prev;if(left<start)return range}else{if(top=pos.top,bottom=pos.bottom,top>end&&prev)return prev;if(bottom>end)return range}prev=range}return ranges[ranges.length-1]}},{key:"splitTextNodeIntoRanges",value:function(node,_splitter){var range,ranges=[],textContent=node.textContent||"",text=textContent.trim(),doc=node.ownerDocument,splitter=_splitter||" ",pos=text.indexOf(splitter);if(-1===pos||node.nodeType!=Node.TEXT_NODE)return range=doc.createRange(),range.selectNodeContents(node),[range];for(range=doc.createRange(),range.setStart(node,0),range.setEnd(node,pos),ranges.push(range),range=!1;-1!=pos;)(pos=text.indexOf(splitter,pos+1))>0&&(range&&(range.setEnd(node,pos),ranges.push(range)),range=doc.createRange(),range.setStart(node,pos+1));return range&&(range.setEnd(node,text.length),ranges.push(range)),ranges}},{key:"rangePairToCfiPair",value:function(cfiBase,rangePair){var startRange=rangePair.start,endRange=rangePair.end;return startRange.collapse(!0),endRange.collapse(!1),{start:new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a(startRange,cfiBase).toString(),end:new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a(endRange,cfiBase).toString()}}},{key:"rangeListToCfiList",value:function(cfiBase,columns){for(var cifPair,map=[],i=0;i<columns.length;i++)cifPair=this.rangePairToCfiPair(cfiBase,columns[i]),map.push(cifPair);return map}},{key:"getBounds",value:function(node){var elPos=void 0;if(node.nodeType==Node.TEXT_NODE){var elRange=document.createRange();elRange.selectNodeContents(node),elPos=elRange.getBoundingClientRect()}else elPos=node.getBoundingClientRect();return elPos}},{key:"axis",value:function(_axis){return _axis&&(this.horizontal="horizontal"===_axis),this.horizontal}}]),Mapping}();__webpack_exports__.a=Mapping},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0),support=__webpack_require__(6),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";exports.encode=function(input){for(var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output=[],i=0,len=input.length,remainingBytes=len,isArray="string"!==utils.getTypeOf(input);i<input.length;)remainingBytes=len-i,isArray?(chr1=input[i++],chr2=i<len?input[i++]:0,chr3=i<len?input[i++]:0):(chr1=input.charCodeAt(i++),chr2=i<len?input.charCodeAt(i++):0,chr3=i<len?input.charCodeAt(i++):0),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=remainingBytes>1?(15&chr2)<<2|chr3>>6:64,enc4=remainingBytes>2?63&chr3:64,output.push(_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4));return output.join("")},exports.decode=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0,resultIndex=0;if("data:"===input.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");var totalLength=3*input.length/4;if(input.charAt(input.length-1)===_keyStr.charAt(64)&&totalLength--,input.charAt(input.length-2)===_keyStr.charAt(64)&&totalLength--,totalLength%1!=0)throw new Error("Invalid base64 input, bad content length.");var output;for(output=support.uint8array?new Uint8Array(0|totalLength):new Array(0|totalLength);i<input.length;)enc1=_keyStr.indexOf(input.charAt(i++)),enc2=_keyStr.indexOf(input.charAt(i++)),enc3=_keyStr.indexOf(input.charAt(i++)),enc4=_keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output[resultIndex++]=chr1,64!==enc3&&(output[resultIndex++]=chr2),64!==enc4&&(output[resultIndex++]=chr3);return output}},function(module,exports,__webpack_require__){"use strict";var GenericWorker=__webpack_require__(3);exports.STORE={magic:"\0\0",compressWorker:function(compressionOptions){return new GenericWorker("STORE compression")},uncompressWorker:function(){return new GenericWorker("STORE decompression")}},exports.DEFLATE=__webpack_require__(115)},function(module,exports,__webpack_require__){"use strict";exports.base64=!1,exports.binary=!1,exports.dir=!1,exports.createFolders=!0,exports.date=null,exports.compression=null,exports.compressionOptions=null,exports.comment=null,exports.unixPermissions=null,exports.dosPermissions=null},function(module,exports,__webpack_require__){"use strict";function ArrayReader(data){DataReader.call(this,data);for(var i=0;i<this.data.length;i++)data[i]=255&data[i]}var DataReader=__webpack_require__(47);__webpack_require__(0).inherits(ArrayReader,DataReader),ArrayReader.prototype.byteAt=function(i){return this.data[this.zero+i]},ArrayReader.prototype.lastIndexOfSignature=function(sig){for(var sig0=sig.charCodeAt(0),sig1=sig.charCodeAt(1),sig2=sig.charCodeAt(2),sig3=sig.charCodeAt(3),i=this.length-4;i>=0;--i)if(this.data[i]===sig0&&this.data[i+1]===sig1&&this.data[i+2]===sig2&&this.data[i+3]===sig3)return i-this.zero;return-1},ArrayReader.prototype.readAndCheckSignature=function(sig){var sig0=sig.charCodeAt(0),sig1=sig.charCodeAt(1),sig2=sig.charCodeAt(2),sig3=sig.charCodeAt(3),data=this.readData(4);return sig0===data[0]&&sig1===data[1]&&sig2===data[2]&&sig3===data[3]},ArrayReader.prototype.readData=function(size){if(this.checkOffset(size),0===size)return[];var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=ArrayReader},function(module,exports,__webpack_require__){"use strict";function DataReader(data){this.data=data,this.length=data.length,this.index=0,this.zero=0}var utils=__webpack_require__(0);DataReader.prototype={checkOffset:function(offset){this.checkIndex(this.index+offset)},checkIndex:function(newIndex){if(this.length<this.zero+newIndex||newIndex<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+newIndex+"). Corrupted zip ?")},setIndex:function(newIndex){this.checkIndex(newIndex),this.index=newIndex},skip:function(n){this.setIndex(this.index+n)},byteAt:function(i){},readInt:function(size){var i,result=0;for(this.checkOffset(size),i=this.index+size-1;i>=this.index;i--)result=(result<<8)+this.byteAt(i);return this.index+=size,result},readString:function(size){return utils.transformTo("string",this.readData(size))},readData:function(size){},lastIndexOfSignature:function(sig){},readAndCheckSignature:function(sig){},readDate:function(){var dostime=this.readInt(4);return new Date(Date.UTC(1980+(dostime>>25&127),(dostime>>21&15)-1,dostime>>16&31,dostime>>11&31,dostime>>5&63,(31&dostime)<<1))}},module.exports=DataReader},function(module,exports,__webpack_require__){"use strict";function Uint8ArrayReader(data){ArrayReader.call(this,data)}var ArrayReader=__webpack_require__(46);__webpack_require__(0).inherits(Uint8ArrayReader,ArrayReader),Uint8ArrayReader.prototype.readData=function(size){if(this.checkOffset(size),0===size)return new Uint8Array(0);var result=this.data.subarray(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=Uint8ArrayReader},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0),support=__webpack_require__(6),ArrayReader=__webpack_require__(46),StringReader=__webpack_require__(124),NodeBufferReader=__webpack_require__(123),Uint8ArrayReader=__webpack_require__(48);module.exports=function(data){var type=utils.getTypeOf(data);return utils.checkSupport(type),"string"!==type||support.uint8array?"nodebuffer"===type?new NodeBufferReader(data):support.uint8array?new Uint8ArrayReader(utils.transformTo("uint8array",data)):new ArrayReader(utils.transformTo("array",data)):new StringReader(data)}},function(module,exports,__webpack_require__){"use strict";exports.LOCAL_FILE_HEADER="PK",exports.CENTRAL_FILE_HEADER="PK",exports.CENTRAL_DIRECTORY_END="PK",exports.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",exports.ZIP64_CENTRAL_DIRECTORY_END="PK",exports.DATA_DESCRIPTOR="PK\b"},function(module,exports,__webpack_require__){"use strict";function Crc32Probe(){GenericWorker.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var GenericWorker=__webpack_require__(3),crc32=__webpack_require__(27);__webpack_require__(0).inherits(Crc32Probe,GenericWorker),Crc32Probe.prototype.processChunk=function(chunk){this.streamInfo.crc32=crc32(chunk.data,this.streamInfo.crc32||0),this.push(chunk)},module.exports=Crc32Probe},function(module,exports,__webpack_require__){"use strict";function DataLengthProbe(propName){GenericWorker.call(this,"DataLengthProbe for "+propName),this.propName=propName,this.withStreamInfo(propName,0)}var utils=__webpack_require__(0),GenericWorker=__webpack_require__(3);utils.inherits(DataLengthProbe,GenericWorker),DataLengthProbe.prototype.processChunk=function(chunk){if(chunk){var length=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=length+chunk.data.length}GenericWorker.prototype.processChunk.call(this,chunk)},module.exports=DataLengthProbe},function(module,exports,__webpack_require__){"use strict";function DataWorker(dataP){GenericWorker.call(this,"DataWorker");var self=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,dataP.then(function(data){self.dataIsReady=!0,self.data=data,self.max=data&&data.length||0,self.type=utils.getTypeOf(data),self.isPaused||self._tickAndRepeat()},function(e){self.error(e)})}var utils=__webpack_require__(0),GenericWorker=__webpack_require__(3);utils.inherits(DataWorker,GenericWorker),DataWorker.prototype.cleanUp=function(){GenericWorker.prototype.cleanUp.call(this),this.data=null},DataWorker.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,utils.delay(this._tickAndRepeat,[],this)),!0)},DataWorker.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(utils.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},DataWorker.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var data=null,nextIndex=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":data=this.data.substring(this.index,nextIndex);break;case"uint8array":data=this.data.subarray(this.index,nextIndex);break;case"array":case"nodebuffer":data=this.data.slice(this.index,nextIndex)}return this.index=nextIndex,this.push({data:data,meta:{percent:this.max?this.index/this.max*100:0}})},module.exports=DataWorker},function(module,exports,__webpack_require__){"use strict";function transformZipOutput(type,content,mimeType){switch(type){case"blob":return utils.newBlob(utils.transformTo("arraybuffer",content),mimeType);case"base64":return base64.encode(content);default:return utils.transformTo(type,content)}}function concat(type,dataArray){var i,index=0,res=null,totalLength=0;for(i=0;i<dataArray.length;i++)totalLength+=dataArray[i].length;switch(type){case"string":return dataArray.join("");case"array":return Array.prototype.concat.apply([],dataArray);case"uint8array":for(res=new Uint8Array(totalLength),i=0;i<dataArray.length;i++)res.set(dataArray[i],index),index+=dataArray[i].length;return res;case"nodebuffer":return Buffer.concat(dataArray);default:throw new Error("concat : unsupported type '"+type+"'")}}function _accumulate(helper,updateCallback){return new external.Promise(function(resolve,reject){var dataArray=[],chunkType=helper._internalType,resultType=helper._outputType,mimeType=helper._mimeType;helper.on("data",function(data,meta){dataArray.push(data),updateCallback&&updateCallback(meta)}).on("error",function(err){dataArray=[],reject(err)}).on("end",function(){try{var result=transformZipOutput(resultType,concat(chunkType,dataArray),mimeType);resolve(result)}catch(e){reject(e)}dataArray=[]}).resume()})}function StreamHelper(worker,outputType,mimeType){var internalType=outputType;switch(outputType){case"blob":case"arraybuffer":internalType="uint8array";break;case"base64":internalType="string"}try{this._internalType=internalType,this._outputType=outputType,this._mimeType=mimeType,utils.checkSupport(internalType),this._worker=worker.pipe(new ConvertWorker(internalType)),worker.lock()}catch(e){this._worker=new GenericWorker("error"),this._worker.error(e)}}var utils=__webpack_require__(0),ConvertWorker=__webpack_require__(125),GenericWorker=__webpack_require__(3),base64=__webpack_require__(43),support=__webpack_require__(6),external=__webpack_require__(13),NodejsStreamOutputAdapter=null;if(support.nodestream)try{NodejsStreamOutputAdapter=__webpack_require__(121)}catch(e){}StreamHelper.prototype={accumulate:function(updateCb){return _accumulate(this,updateCb)},on:function(evt,fn){var self=this;return"data"===evt?this._worker.on(evt,function(chunk){fn.call(self,chunk.data,chunk.meta)}):this._worker.on(evt,function(){utils.delay(fn,arguments,self)}),this},resume:function(){return utils.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(updateCb){if(utils.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new NodejsStreamOutputAdapter(this,{objectMode:"nodebuffer"!==this._outputType},updateCb)}},module.exports=StreamHelper},function(module,exports){var core=module.exports={version:"2.3.0"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(130);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(29),document=__webpack_require__(19).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){"use strict";function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(10),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(63).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(10),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&"function"==typeof options.read&&(this._read=options.read),Stream.call(this)}function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er)stream.emit("error",er);else if(null===chunk)state.reading=!1,onEofChunk(stream,state);else if(state.objectMode||chunk&&chunk.length>0)if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{var skipAdd;!state.decoder||addToFront||encoding||(chunk=state.decoder.write(chunk),skipAdd=!state.objectMode&&0===chunk.length),addToFront||(state.reading=!1),skipAdd||(state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream))),maybeReadMore(stream,state)}else addToFront||(state.reading=!1);return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return 0===state.length&&state.ended?0:state.objectMode?0===n?0:1:null===n||isNaN(n)?state.flowing&&state.buffer.length?state.buffer[0].length:state.length:n<=0?0:(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n>state.length?state.ended?state.length:(state.needReadable=!0,0):n)}function chunkInvalid(state,chunk){var er=null;return Buffer.isBuffer(chunk)||"string"==typeof chunk||null===chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er}function onEofChunk(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?processNextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,processNextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,processNextTick(resume_,stream,state))}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;if(debug("flow",state.flowing),state.flowing)do{var chunk=stream.read()}while(null!==chunk&&state.flowing)}function fromList(n,state){var ret,list=state.buffer,length=state.length,stringMode=!!state.decoder,objectMode=!!state.objectMode;if(0===list.length)return null;if(0===length)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length)ret=stringMode?list.join(""):1===list.length?list[0]:Buffer.concat(list,length),list.length=0;else if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n),list[0]=buf.slice(n)}else if(n===list[0].length)ret=list.shift();else{ret=stringMode?"":new Buffer(n);for(var c=0,i=0,l=list.length;i<l&&c<n;i++){var buf=list[0],cpy=Math.min(n-c,buf.length);stringMode?ret+=buf.slice(0,cpy):buf.copy(ret,c,0,cpy),cpy<buf.length?list[0]=buf.slice(cpy):list.shift(),c+=cpy}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");state.endEmitted||(state.ended=!0,processNextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}module.exports=Readable;var processNextTick=__webpack_require__(30),isArray=__webpack_require__(114),Buffer=__webpack_require__(14).Buffer;Readable.ReadableState=ReadableState;var Stream,EElistenerCount=(__webpack_require__(34),function(emitter,type){return emitter.listeners(type).length});!function(){try{Stream=__webpack_require__(35)}catch(_){}finally{Stream||(Stream=__webpack_require__(34).EventEmitter)}}();var Buffer=__webpack_require__(14).Buffer,util=__webpack_require__(11);util.inherits=__webpack_require__(12);var debugUtil=__webpack_require__(36),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder;util.inherits(Readable,Stream);var Duplex,Duplex;Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return state.objectMode||"string"!=typeof chunk||(encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=new Buffer(chunk,encoding),encoding=""),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,this._readableState,chunk,"",!0)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(63).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;Readable.prototype.read=function(n){debug("read",n);var state=this._readableState,nOrig=n;if(("number"!=typeof n||n>0)&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),(state.ended||state.reading)&&(doRead=!1,debug("reading or ended",doRead)),doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1),doRead&&!state.reading&&(n=howMuchToRead(nOrig,state));var ret;return ret=n>0?fromList(n,state):null,null===ret&&(state.needReadable=!0,n=0),state.length-=n,0!==state.length||state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&0===state.length&&endReadable(this),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable){debug("onunpipe"),readable===src&&cleanup()}function onend(){debug("onend"),dest.end()}function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",cleanup),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}function ondata(chunk){debug("ondata"),!1===dest.write(chunk)&&(1!==state.pipesCount||state.pipes[0]!==dest||1!==src.listenerCount("data")||cleanedUp||(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr,endFn=doEnd?onend:cleanup;state.endEmitted?processNextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;return src.on("data",ondata),dest._events&&dest._events.error?isArray(dest._events.error)?dest._events.error.unshift(onerror):dest._events.error=[onerror,dest._events.error]:dest.on("error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var _i=0;_i<len;_i++)dests[_i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);return-1===i?this:(state.pipes.splice(i,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev&&!1!==this._readableState.flowing&&this.resume(),"readable"===ev&&!this._readableState.endEmitted){var state=this._readableState;state.readableListening||(state.readableListening=!0,state.emittedReadable=!1,state.needReadable=!0,state.reading?state.length&&emitReadable(this):processNextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,resume(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self=this;stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)}),stream.on("data",function(chunk){if(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),(!state.objectMode||null!==chunk&&void 0!==chunk)&&(state.objectMode||chunk&&chunk.length)){self.push(chunk)||(paused=!0,stream.pause())}});for(var i in stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));return forEach(["error","close","destroy","pause","resume"],function(ev){stream.on(ev,self.emit.bind(self,ev))}),self._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList},function(module,exports,__webpack_require__){"use strict";function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null,ts.writecb=null,null!==data&&void 0!==data&&stream.push(data),cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(er){done(stream,er)}):done(stream)})}function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}module.exports=Transform;var Duplex=__webpack_require__(10),util=__webpack_require__(11);util.inherits=__webpack_require__(12),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0}},function(module,exports,__webpack_require__){"use strict";function nop(){}function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb,this.next=null}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(10),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this),this.corkedRequestsFree.next=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__(10),!(this instanceof Writable||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev)),Stream.call(this)}function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er),processNextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=!0;if(!Buffer.isBuffer(chunk)&&"string"!=typeof chunk&&null!==chunk&&void 0!==chunk&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er),processNextTick(cb,er),valid=!1}return valid}function decodeChunk(state,chunk,encoding){return state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=new Buffer(chunk,encoding)),chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding),Buffer.isBuffer(chunk)&&(encoding="buffer");var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb),last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?processNextTick(cb,er):cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0;entry;)buffer[count]=entry,entry=entry.next,count+=1;doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,state.corkedRequestsFree=holder.next,holder.next=null}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequestCount=0,state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function prefinish(stream,state){state.prefinished||(state.prefinished=!0,stream.emit("prefinish"))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(0===state.pendingcb?(prefinish(stream,state),state.finished=!0,stream.emit("finish")):prefinish(stream,state)),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?processNextTick(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(err){var entry=_this.entry;for(_this.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=_this:state.corkedRequestsFree=_this}}module.exports=Writable;var processNextTick=__webpack_require__(30),asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick,Buffer=__webpack_require__(14).Buffer;Writable.WritableState=WritableState;var util=__webpack_require__(11);util.inherits=__webpack_require__(12);var Stream,internalUtil={deprecate:__webpack_require__(167)};!function(){try{Stream=__webpack_require__(35)}catch(_){}finally{Stream||(Stream=__webpack_require__(34).EventEmitter)}}();var Buffer=__webpack_require__(14).Buffer;util.inherits(Writable,Stream);var Duplex;WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(_){}}();var Duplex;Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1;return"function"==typeof encoding&&(cb=encoding,encoding=null),Buffer.isBuffer(chunk)?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?writeAfterEnd(this,cb):validChunk(this,state,chunk,cb)&&(state.pendingcb++,ret=writeOrBuffer(this,state,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!==chunk&&void 0!==chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||endWritable(this,state,cb)}},function(module,exports,__webpack_require__){var Stream=function(){try{return __webpack_require__(35)}catch(_){}}();exports=module.exports=__webpack_require__(59),exports.Stream=Stream||exports,exports.Readable=exports,exports.Writable=__webpack_require__(61),exports.Duplex=__webpack_require__(10),exports.Transform=__webpack_require__(60),exports.PassThrough=__webpack_require__(143)},function(module,exports,__webpack_require__){function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error("Unknown encoding: "+encoding)}function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}var Buffer=__webpack_require__(14).Buffer,isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(encoding),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){for(var charStr="";this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return"";buffer=buffer.slice(available,buffer.length),charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(!(charCode>=55296&&charCode<=56319)){if(this.charReceived=this.charLength=0,0===buffer.length)return charStr;break}this.charLength+=this.surrogateSize,charStr=""}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1,charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(1==i&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived,buf=this.charBuffer,enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},function(module,exports,__webpack_require__){var root=__webpack_require__(65),_Symbol=root.Symbol;module.exports=_Symbol},function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},freeGlobal=__webpack_require__(146),freeSelf="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){function debounce(func,wait,options){function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush(){return void 0===timerId?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}var isObject=__webpack_require__(31),now=__webpack_require__(151),toNumber=__webpack_require__(153),FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;module.exports=debounce},function(module,exports,__webpack_require__){"use strict";function buf2binstring(buf,len){if(len<65537&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result="",i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}var utils=__webpack_require__(7),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(__){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},exports.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}return buf2binstring(utf16buf,out)},exports.utf8border=function(buf,max){var pos;for(max=max||buf.length,max>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0?max:0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},function(module,exports,__webpack_require__){"use strict";function adler32(adler,buf,len,pos){for(var s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;0!==len;){n=len>2e3?2e3:len,len-=n;do{s1=s1+buf[pos++]|0,s2=s2+s1|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}module.exports=adler32},function(module,exports,__webpack_require__){"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(module,exports,__webpack_require__){"use strict";function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}var crcTable=function(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=crc32},function(module,exports,__webpack_require__){"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream},function(module,exports,__webpack_require__){function DOMParser(options){this.options=options||{locator:{}}}function buildErrorHandler(errorImpl,domBuilder,locator){function build(key){var fn=errorImpl[key];!fn&&isCallback&&(fn=2==errorImpl.length?function(msg){errorImpl(key,msg)}:errorImpl),errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}if(!errorImpl){if(domBuilder instanceof DOMHandler)return domBuilder;errorImpl=domBuilder}var errorHandler={},isCallback=errorImpl instanceof Function;return locator=locator||{},build("warning"),build("error"),build("fatalError"),errorHandler}function DOMHandler(){this.cdata=!1}function position(locator,node){node.lineNumber=locator.lineNumber,node.columnNumber=locator.columnNumber}function _locator(l){if(l)return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}function _toString(chars,start,length){return"string"==typeof chars?chars.substr(start,length):chars.length>=start+length||start?new java.lang.String(chars,start,length)+"":chars}function appendElement(hander,node){hander.currentElement?hander.currentElement.appendChild(node):hander.doc.appendChild(node)}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options,sax=new XMLReader,domBuilder=options.domBuilder||new DOMHandler,errorHandler=options.errorHandler,locator=options.locator,defaultNSMap=options.xmlns||{},entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return locator&&domBuilder.setDocumentLocator(locator),sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator),sax.domBuilder=options.domBuilder||domBuilder,/\/x?html?$/.test(mimeType)&&(entityMap.nbsp="",entityMap.copy="",defaultNSMap[""]="http://www.w3.org/1999/xhtml"),defaultNSMap.xml=defaultNSMap.xml||"http://www.w3.org/XML/1998/namespace",source?sax.parse(source,defaultNSMap,entityMap):sax.errorHandler.error("invalid doc source"),domBuilder.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc,el=doc.createElementNS(namespaceURI,qName||localName),len=attrs.length;appendElement(this,el),this.currentElement=el,this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i),value=attrs.getValue(i),qName=attrs.getQName(i),attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr),attr.value=attr.nodeValue=value,el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins),appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){if(chars=_toString.apply(this,arguments)){if(this.cdata)var charNode=this.doc.createCDATASection(chars);else var charNode=this.doc.createTextNode(chars);this.currentElement?this.currentElement.appendChild(charNode):/^\s*$/.test(chars)&&this.doc.appendChild(charNode),this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){(this.locator=locator)&&(locator.lineNumber=0)},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm),appendElement(this,comm)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt),appendElement(this,dt)}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(_error){console.error("[xmldom error]\t"+_error,_locator(this.locator))},fatalError:function(error){throw console.error("[xmldom fatalError]\t"+error,_locator(this.locator)),error}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});var XMLReader=__webpack_require__(172).XMLReader,DOMImplementation=exports.DOMImplementation=__webpack_require__(73).DOMImplementation;exports.XMLSerializer=__webpack_require__(73).XMLSerializer,exports.DOMParser=DOMParser},function(module,exports){function copy(src,dest){for(var p in src)dest[p]=src[p]}function _extends(Class,Super){var pt=Class.prototype;if(Object.create){var ppt=Object.create(Super.prototype);pt.__proto__=ppt}if(!(pt instanceof Super)){var t=function(){};t.prototype=Super.prototype,t=new t,copy(pt,t),Class.prototype=pt=t}pt.constructor!=Class&&("function"!=typeof Class&&console.error("unknow Class:"+Class),pt.constructor=Class)}function DOMException(code,message){if(message instanceof Error)var error=message;else error=this,Error.call(this,ExceptionMessage[code]),this.message=ExceptionMessage[code],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return error.code=code,message&&(this.message=this.message+": "+message),error}function NodeList(){}function LiveNodeList(node,refresh){this._node=node,this._refresh=refresh,_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length),copy(ls,list),list._inc=inc}}function NamedNodeMap(){}function _findNodeIndex(list,node){for(var i=list.length;i--;)if(list[i]===node)return i}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr?list[_findNodeIndex(list,oldAttr)]=newAttr:list[list.length++]=newAttr,el){newAttr.ownerElement=el;var doc=el.ownerDocument;doc&&(oldAttr&&_onRemoveAttribute(doc,el,oldAttr),_onAddAttribute(doc,el,newAttr))}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(!(i>=0))throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));for(var lastIndex=list.length-1;i<lastIndex;)list[i]=list[++i];if(list.length=lastIndex,el){var doc=el.ownerDocument;doc&&(_onRemoveAttribute(doc,el,attr),attr.ownerElement=null)}}function DOMImplementation(features){if(this._features={},features)for(var feature in features)this._features=features[feature]}function Node(){}function _xmlEncoder(c){return"<"==c&&"&lt;"||">"==c&&"&gt;"||"&"==c&&"&amp;"||'"'==c&&"&quot;"||"&#"+c.charCodeAt()+";"}function _visitNode(node,callback){if(callback(node))return!0;if(node=node.firstChild)do{if(_visitNode(node,callback))return!0}while(node=node.nextSibling)}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++,"http://www.w3.org/2000/xmlns/"==newAttr.namespaceURI&&(el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value)}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++,"http://www.w3.org/2000/xmlns/"==newAttr.namespaceURI&&delete el._nsMap[newAttr.prefix?newAttr.localName:""]}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild)cs[cs.length++]=newChild;else{for(var child=el.firstChild,i=0;child;)cs[i++]=child,child=child.nextSibling;cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling,next=child.nextSibling;return previous?previous.nextSibling=next:parentNode.firstChild=next,next?next.previousSibling=previous:parentNode.lastChild=previous,_onUpdateChild(parentNode.ownerDocument,parentNode),child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp&&cp.removeChild(newChild),newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(null==newFirst)return newChild;var newLast=newChild.lastChild}else newFirst=newLast=newChild;var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre,newLast.nextSibling=nextChild,pre?pre.nextSibling=newFirst:parentNode.firstChild=newFirst,null==nextChild?parentNode.lastChild=newLast:nextChild.previousSibling=newLast;do{newFirst.parentNode=parentNode}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));return _onUpdateChild(parentNode.ownerDocument||parentNode,parentNode),newChild.nodeType==DOCUMENT_FRAGMENT_NODE&&(newChild.firstChild=newChild.lastChild=null),newChild}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild}var pre=parentNode.lastChild;return newChild.parentNode=parentNode,newChild.previousSibling=pre,newChild.nextSibling=null,pre?pre.nextSibling=newChild:parentNode.firstChild=newChild,parentNode.lastChild=newChild,_onUpdateChild(parentNode.ownerDocument,parentNode,newChild),newChild}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(isHtml,nodeFilter){var buf=[],refNode=9==this.nodeType?this.documentElement:this,prefix=refNode.prefix,uri=refNode.namespaceURI;if(uri&&null==prefix){var prefix=refNode.lookupPrefix(uri);if(null==prefix)var visibleNamespaces=[{namespace:uri,prefix:null}]}return serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces),buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"",uri=node.namespaceURI;if(!prefix&&!uri)return!1;if("xml"===prefix&&"http://www.w3.org/XML/1998/namespace"===uri||"http://www.w3.org/2000/xmlns/"==uri)return!1;for(var i=visibleNamespaces.length;i--;){var ns=visibleNamespaces[i];if(ns.prefix==prefix)return ns.namespace!=uri}return!0}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(nodeFilter){if(!(node=nodeFilter(node)))return;if("string"==typeof node)return void buf.push(node)}switch(node.nodeType){case ELEMENT_NODE:visibleNamespaces||(visibleNamespaces=[]);var attrs=(visibleNamespaces.length,node.attributes),len=attrs.length,child=node.firstChild,nodeName=node.tagName;isHTML=htmlns===node.namespaceURI||isHTML,buf.push("<",nodeName);for(var i=0;i<len;i++){var attr=attrs.item(i);"xmlns"==attr.prefix?visibleNamespaces.push({prefix:attr.localName,namespace:attr.value}):"xmlns"==attr.nodeName&&visibleNamespaces.push({prefix:"",namespace:attr.value})}for(var i=0;i<len;i++){var attr=attrs.item(i);if(needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"",uri=attr.namespaceURI,ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"'),visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=node.prefix||"",uri=node.namespaceURI,ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"'),visibleNamespaces.push({prefix:prefix,namespace:uri})}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){if(buf.push(">"),isHTML&&/^script$/i.test(nodeName))for(;child;)child.data?buf.push(child.data):serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;else for(;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;buf.push("</",nodeName,">")}else buf.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var child=node.firstChild;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces),child=child.nextSibling;return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,'="',node.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId,sysid=node.systemId;if(buf.push("<!DOCTYPE ",node.name),pubid)buf.push(' PUBLIC "',pubid),sysid&&"."!=sysid&&buf.push('" "',sysid),buf.push('">');else if(sysid&&"."!=sysid)buf.push(' SYSTEM "',sysid,'">');else{var sub=node.internalSubset;sub&&buf.push(" [",sub,"]"),buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function _importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(!1),node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=!0}if(node2||(node2=node.cloneNode(!1)),node2.ownerDocument=doc,node2.parentNode=null,deep)for(var child=node.firstChild;child;)node2.appendChild(_importNode(doc,child,deep)),child=child.nextSibling;return node2}function _cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];"object"!=(void 0===v?"undefined":_typeof(v))&&v!=node2[n]&&(node2[n]=v)}switch(node.childNodes&&(node2.childNodes=new NodeList),node2.ownerDocument=doc,node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes,attrs2=node2.attributes=new NamedNodeMap,len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++)node2.setAttributeNode(_cloneNode(doc,attrs.item(i),!0));break;case ATTRIBUTE_NODE:deep=!0}if(deep)for(var child=node.firstChild;child;)node2.appendChild(_cloneNode(doc,child,deep)),child=child.nextSibling;return node2}function __set__(object,key,value){object[key]=value}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},HIERARCHY_REQUEST_ERR=(ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3)),NOT_FOUND_ERR=(ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8)),INUSE_ATTRIBUTE_ERR=(ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10));ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(index){return this[index]||null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++)serializeToString(this[i],buf,isHTML,nodeFilter);return buf.join("")}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){for(var i=this.length;i--;){var attr=this[i];if(attr.nodeName==key)return attr}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var oldAttr=this.getNamedItem(attr.nodeName);return _addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},setNamedItemNS:function(attr){var oldAttr,el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName),_addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);return _removeNamedNode(this._ownerElement,this,attr),attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);return _removeNamedNode(this._ownerElement,this,attr),attr},getNamedItemNS:function(namespaceURI,localName){for(var i=this.length;i--;){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI)return node}return null}},DOMImplementation.prototype={hasFeature:function(feature,version){var versions=this._features[feature.toLowerCase()];return!(!versions||version&&!(version in versions))},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;if(doc.implementation=this,doc.childNodes=new NodeList,doc.doctype=doctype,doctype&&doc.appendChild(doctype),qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;return node.name=qualifiedName,node.nodeName=qualifiedName,node.publicId=publicId,node.systemId=systemId,node}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild),oldChild&&this.removeChild(oldChild)},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(deep){return _cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){for(var child=this.firstChild;child;){var next=child.nextSibling;next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE?(this.removeChild(next),child.appendData(next.data)):(child.normalize(),child=next)}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){for(var el=this;el;){var map=el._nsMap;if(map)for(var n in map)if(map[n]==namespaceURI)return n;el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){for(var el=this;el;){var map=el._nsMap;if(map&&prefix in map)return map[prefix];el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){return null==this.lookupPrefix(namespaceURI)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){for(var child=newChild.firstChild;child;){var next=child.nextSibling;this.insertBefore(child,refChild),child=next}return newChild}return null==this.documentElement&&newChild.nodeType==ELEMENT_NODE&&(this.documentElement=newChild),_insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){return this.documentElement==oldChild&&(this.documentElement=null),_removeChild(this,oldChild)},importNode:function(importedNode,deep){return _importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;return _visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE&&node.getAttribute("id")==id)return rtv=node,!0}),rtv},createElement:function(tagName){var node=new Element;return node.ownerDocument=this,node.nodeName=tagName,node.tagName=tagName,node.childNodes=new NodeList,(node.attributes=new NamedNodeMap)._ownerElement=node,node},createDocumentFragment:function(){var node=new DocumentFragment;return node.ownerDocument=this,node.childNodes=new NodeList,node},createTextNode:function(data){var node=new Text;return node.ownerDocument=this,node.appendData(data),node},createComment:function(data){var node=new Comment;return node.ownerDocument=this,node.appendData(data),node},createCDATASection:function(data){var node=new CDATASection;return node.ownerDocument=this,node.appendData(data),node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;return node.ownerDocument=this,node.tagName=node.target=target,node.nodeValue=node.data=data,node},createAttribute:function(name){var node=new Attr;return node.ownerDocument=this,node.name=name,node.nodeName=name,node.localName=name,node.specified=!0,node},createEntityReference:function(name){var node=new EntityReference;return node.ownerDocument=this,node.nodeName=name,node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element,pl=qualifiedName.split(":"),attrs=node.attributes=new NamedNodeMap;return node.childNodes=new NodeList,node.ownerDocument=this,node.nodeName=qualifiedName,node.tagName=qualifiedName,node.namespaceURI=namespaceURI,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,attrs._ownerElement=node,node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr,pl=qualifiedName.split(":");return node.ownerDocument=this,node.nodeName=qualifiedName,node.name=qualifiedName,node.namespaceURI=namespaceURI,node.specified=!0,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,node}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return null!=this.getAttributeNode(name)},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){return newChild.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(newChild,null):_appendSingleChild(this,newChild)},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return null!=this.getAttributeNodeNS(namespaceURI,localName)},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node===base||node.nodeType!=ELEMENT_NODE||"*"!==tagName&&node.tagName!=tagName||ls.push(node)}),ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node===base||node.nodeType!==ELEMENT_NODE||"*"!==namespaceURI&&node.namespaceURI!==namespaceURI||"*"!==localName&&node.localName!=localName||ls.push(node)}),ls})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text,this.nodeValue=this.data=text,this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){text=this.data.substring(0,offset)+text+this.data.substring(offset+count),this.nodeValue=this.data=text,this.length=text.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data,newText=text.substring(offset);text=text.substring(0,offset),this.data=this.nodeValue=text,this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);return this.parentNode&&this.parentNode.insertBefore(newNode,this.nextSibling),newNode}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){var getTextContent=function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];for(node=node.firstChild;node;)7!==node.nodeType&&8!==node.nodeType&&buf.push(getTextContent(node)),node=node.nextSibling;return buf.join("");default:return node.nodeValue}};Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(data||String(data))&&this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data,this.value=data,this.nodeValue=data}}}),__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__BookReader_vue__=__webpack_require__(175),__WEBPACK_IMPORTED_MODULE_0__BookReader_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__BookReader_vue__);__webpack_exports__.a=__WEBPACK_IMPORTED_MODULE_0__BookReader_vue___default.a},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__PreferencesDropdown_vue__=__webpack_require__(176),__WEBPACK_IMPORTED_MODULE_0__PreferencesDropdown_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__PreferencesDropdown_vue__);__webpack_exports__.a=__WEBPACK_IMPORTED_MODULE_0__PreferencesDropdown_vue___default.a},function(module,exports,__webpack_require__){var content=__webpack_require__(173);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0};options.transform=void 0,options.insertInto=void 0;__webpack_require__(174)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports){module.exports=function(){var list=[];return list.toString=function(){for(var result=[],i=0;i<this.length;i++){var item=this[i];item[2]?result.push("@media "+item[2]+"{"+item[1]+"}"):result.push(item[1])}return result.join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){"use strict";var d,assign=__webpack_require__(98),normalizeOpts=__webpack_require__(105),isCallable=__webpack_require__(101),contains=__webpack_require__(108);d=module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],null==dscr?(c=w=!0,e=!1):(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign(normalizeOpts(options),desc):desc},d.gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],null==get?get=void 0:isCallable(get)?null==set?set=void 0:isCallable(set)||(options=set,set=void 0):(options=get,get=set=void 0),null==dscr?(c=!0,e=!1):(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")),desc={get:get,set:set,configurable:c,enumerable:e},options?assign(normalizeOpts(options),desc):desc}},function(module,exports,__webpack_require__){"use strict";(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(root,factory){root||(root=window||global),"object"===_typeof(module)&&module.exports?module.exports=factory(root):(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(scope){function isRelativeScheme(scheme){return void 0!==relative[scheme]}function invalid(){clear.call(this),this._isInvalid=!0}function IDNAToASCII(h){return""==h&&invalid.call(this),h.toLowerCase()}function percentEscape(c){var unicode=c.charCodeAt(0);return unicode>32&&unicode<127&&-1==[34,35,60,62,63,96].indexOf(unicode)?c:encodeURIComponent(c)}function percentEscapeQuery(c){var unicode=c.charCodeAt(0);return unicode>32&&unicode<127&&-1==[34,35,60,62,96].indexOf(unicode)?c:encodeURIComponent(c)}function parse(input,stateOverride,base){function err(message){errors.push(message)}var state=stateOverride||"scheme start",cursor=0,buffer="",seenAt=!1,seenBracket=!1,errors=[];loop:for(;(input[cursor-1]!=EOF||0==cursor)&&!this._isInvalid;){var c=input[cursor];switch(state){case"scheme start":if(!c||!ALPHA.test(c)){if(stateOverride){err("Invalid scheme.");break loop}buffer="",state="no scheme";continue}buffer+=c.toLowerCase(),state="scheme";break;case"scheme":if(c&&ALPHANUMERIC.test(c))buffer+=c.toLowerCase();else{if(":"!=c){if(stateOverride){if(EOF==c)break loop;err("Code point not allowed in scheme: "+c);break loop}buffer="",cursor=0,state="no scheme";continue}if(this._scheme=buffer,buffer="",stateOverride)break loop;isRelativeScheme(this._scheme)&&(this._isRelative=!0),state="file"==this._scheme?"relative":this._isRelative&&base&&base._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==c?(this._query="?",state="query"):"#"==c?(this._fragment="#",state="fragment"):EOF!=c&&"\t"!=c&&"\n"!=c&&"\r"!=c&&(this._schemeData+=percentEscape(c));break;case"no scheme":if(base&&isRelativeScheme(base._scheme)){state="relative";continue}err("Missing scheme."),invalid.call(this);break;case"relative or authority":if("/"!=c||"/"!=input[cursor+1]){err("Expected /, got: "+c),state="relative";continue}state="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=base._scheme),EOF==c){this._host=base._host,this._port=base._port,this._path=base._path.slice(),this._query=base._query,this._username=base._username,this._password=base._password;break loop}if("/"==c||"\\"==c)"\\"==c&&err("\\ is an invalid code point."),state="relative slash";else if("?"==c)this._host=base._host,this._port=base._port,this._path=base._path.slice(),this._query="?",this._username=base._username,this._password=base._password,state="query";else{if("#"!=c){var nextC=input[cursor+1],nextNextC=input[cursor+2];("file"!=this._scheme||!ALPHA.test(c)||":"!=nextC&&"|"!=nextC||EOF!=nextNextC&&"/"!=nextNextC&&"\\"!=nextNextC&&"?"!=nextNextC&&"#"!=nextNextC)&&(this._host=base._host,this._port=base._port,this._username=base._username,this._password=base._password,this._path=base._path.slice(),this._path.pop()),state="relative path";continue}this._host=base._host,this._port=base._port,this._path=base._path.slice(),this._query=base._query,this._fragment="#",this._username=base._username,this._password=base._password,state="fragment"}break;case"relative slash":if("/"!=c&&"\\"!=c){"file"!=this._scheme&&(this._host=base._host,this._port=base._port,this._username=base._username,this._password=base._password),state="relative path";continue}"\\"==c&&err("\\ is an invalid code point."),state="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=c){err("Expected '/', got: "+c),state="authority ignore slashes";continue}state="authority second slash";break;case"authority second slash":if(state="authority ignore slashes","/"!=c){err("Expected '/', got: "+c);continue}break;case"authority ignore slashes":if("/"!=c&&"\\"!=c){state="authority";continue}err("Expected authority, got: "+c);break;case"authority":if("@"==c){seenAt&&(err("@ already seen."),buffer+="%40"),seenAt=!0;for(var i=0;i<buffer.length;i++){var cp=buffer[i];if("\t"!=cp&&"\n"!=cp&&"\r"!=cp)if(":"!=cp||null!==this._password){var tempC=percentEscape(cp);null!==this._password?this._password+=tempC:this._username+=tempC}else this._password="";else err("Invalid whitespace in authority.")}buffer=""}else{if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){cursor-=buffer.length,buffer="",state="host";continue}buffer+=c}break;case"file host":if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){2!=buffer.length||!ALPHA.test(buffer[0])||":"!=buffer[1]&&"|"!=buffer[1]?0==buffer.length?state="relative path start":(this._host=IDNAToASCII.call(this,buffer),buffer="",state="relative path start"):state="relative path";continue}"\t"==c||"\n"==c||"\r"==c?err("Invalid whitespace in file host."):buffer+=c;break;case"host":case"hostname":if(":"!=c||seenBracket){if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c){if(this._host=IDNAToASCII.call(this,buffer),buffer="",state="relative path start",stateOverride)break loop;continue}"\t"!=c&&"\n"!=c&&"\r"!=c?("["==c?seenBracket=!0:"]"==c&&(seenBracket=!1),buffer+=c):err("Invalid code point in host/hostname: "+c)}else if(this._host=IDNAToASCII.call(this,buffer),buffer="",state="port","hostname"==stateOverride)break loop;break;case"port":if(/[0-9]/.test(c))buffer+=c;else{if(EOF==c||"/"==c||"\\"==c||"?"==c||"#"==c||stateOverride){if(""!=buffer){var temp=parseInt(buffer,10);temp!=relative[this._scheme]&&(this._port=temp+""),buffer=""}if(stateOverride)break loop;state="relative path start";continue}"\t"==c||"\n"==c||"\r"==c?err("Invalid code point in port: "+c):invalid.call(this)}break;case"relative path start":if("\\"==c&&err("'\\' not allowed in path."),state="relative path","/"!=c&&"\\"!=c)continue;break;case"relative path":if(EOF!=c&&"/"!=c&&"\\"!=c&&(stateOverride||"?"!=c&&"#"!=c))"\t"!=c&&"\n"!=c&&"\r"!=c&&(buffer+=percentEscape(c));else{"\\"==c&&err("\\ not allowed in relative path.");var tmp;(tmp=relativePathDotMapping[buffer.toLowerCase()])&&(buffer=tmp),".."==buffer?(this._path.pop(),"/"!=c&&"\\"!=c&&this._path.push("")):"."==buffer&&"/"!=c&&"\\"!=c?this._path.push(""):"."!=buffer&&("file"==this._scheme&&0==this._path.length&&2==buffer.length&&ALPHA.test(buffer[0])&&"|"==buffer[1]&&(buffer=buffer[0]+":"),this._path.push(buffer)),buffer="","?"==c?(this._query="?",state="query"):"#"==c&&(this._fragment="#",state="fragment")}break;case"query":stateOverride||"#"!=c?EOF!=c&&"\t"!=c&&"\n"!=c&&"\r"!=c&&(this._query+=percentEscapeQuery(c)):(this._fragment="#",state="fragment");break;case"fragment":EOF!=c&&"\t"!=c&&"\n"!=c&&"\r"!=c&&(this._fragment+=c)}cursor++}}function clear(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function jURL(url,base){void 0===base||base instanceof jURL||(base=new jURL(String(base))),this._url=url,clear.call(this);var input=url.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");parse.call(this,input,null,base)}var hasWorkingUrl=!1;if(!scope.forceJURL)try{var u=new URL("b","http://a");u.pathname="c%20d",hasWorkingUrl="http://a/c%20d"===u.href}catch(e){}if(hasWorkingUrl)return scope.URL;var relative=Object.create(null);relative.ftp=21,relative.file=0,relative.gopher=70,relative.http=80,relative.https=443,relative.ws=80,relative.wss=443;var relativePathDotMapping=Object.create(null);relativePathDotMapping["%2e"]=".",relativePathDotMapping[".%2e"]="..",relativePathDotMapping["%2e."]="..",relativePathDotMapping["%2e%2e"]="..";var EOF=void 0,ALPHA=/[a-zA-Z]/,ALPHANUMERIC=/[a-zA-Z0-9\+\-\.]/;jURL.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var authority="";return""==this._username&&null==this._password||(authority=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+authority+this.host:"")+this.pathname+this._query+this._fragment},set href(href){clear.call(this),parse.call(this,href)},get protocol(){return this._scheme+":"},set protocol(protocol){this._isInvalid||parse.call(this,protocol+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(host){!this._isInvalid&&this._isRelative&&parse.call(this,host,"host")},get hostname(){return this._host},set hostname(hostname){!this._isInvalid&&this._isRelative&&parse.call(this,hostname,"hostname")},get port(){return this._port},set port(port){!this._isInvalid&&this._isRelative&&parse.call(this,port,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(pathname){!this._isInvalid&&this._isRelative&&(this._path=[],parse.call(this,pathname,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(search){!this._isInvalid&&this._isRelative&&(this._query="?","?"==search[0]&&(search=search.slice(1)),parse.call(this,search,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(hash){this._isInvalid||(this._fragment="#","#"==hash[0]&&(hash=hash.slice(1)),parse.call(this,hash,"fragment"))},get origin(){var host;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"file":return"file://";case"data":case"javascript":case"mailto":return"null"}return host=this.host,host?this._scheme+"://"+host:""}};var OriginalURL=scope.URL;return OriginalURL&&(jURL.createObjectURL=function(blob){return OriginalURL.createObjectURL.apply(OriginalURL,arguments)},jURL.revokeObjectURL=function(url){OriginalURL.revokeObjectURL(url)}),jURL})}).call(exports,__webpack_require__(171)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__epubcfi__=__webpack_require__(2),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Annotations=function(){function Annotations(rendition){_classCallCheck(this,Annotations),this.rendition=rendition,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}return _createClass(Annotations,[{key:"add",value:function(type,cfiRange,data,cb){var hash=encodeURI(cfiRange),cfi=new __WEBPACK_IMPORTED_MODULE_1__epubcfi__.a(cfiRange),sectionIndex=cfi.spinePos,annotation=new Annotation({type:type,cfiRange:cfiRange,data:data,sectionIndex:sectionIndex,cb:cb});return this._annotations[hash]=annotation,sectionIndex in this._annotationsBySectionIndex?this._annotationsBySectionIndex[sectionIndex].push(hash):this._annotationsBySectionIndex[sectionIndex]=[hash],this.rendition.views().forEach(function(view){annotation.sectionIndex===view.index&&annotation.attach(view)}),annotation}},{key:"remove",value:function(cfiRange,type){var _this=this,hash=encodeURI(cfiRange);if(hash in this._annotations){var annotation=this._annotations[hash];if(type&&annotation.type!==type)return;this.rendition.views().forEach(function(view){_this._removeFromAnnotationBySectionIndex(annotation.sectionIndex,hash),annotation.sectionIndex===view.index&&annotation.detach(view)}),delete this._annotations[hash]}}},{key:"_removeFromAnnotationBySectionIndex",value:function(sectionIndex,hash){this._annotationsBySectionIndex[sectionIndex]=this._annotationsAt(sectionIndex).filter(function(h){return h!==hash})}},{key:"_annotationsAt",value:function(index){return this._annotationsBySectionIndex[index]}},{key:"highlight",value:function(cfiRange,data,cb){this.add("highlight",cfiRange,data,cb)}},{key:"underline",value:function(cfiRange,data,cb){this.add("underline",cfiRange,data,cb)}},{key:"mark",value:function(cfiRange,data,cb){this.add("mark",cfiRange,data,cb)}},{key:"each",value:function(){return this._annotations.forEach.apply(this._annotations,arguments)}},{key:"inject",value:function(view){var _this2=this,sectionIndex=view.index;if(sectionIndex in this._annotationsBySectionIndex){this._annotationsBySectionIndex[sectionIndex].forEach(function(hash){_this2._annotations[hash].attach(view)})}}},{key:"clear",value:function(view){var _this3=this,sectionIndex=view.index;if(sectionIndex in this._annotationsBySectionIndex){this._annotationsBySectionIndex[sectionIndex].forEach(function(hash){_this3._annotations[hash].detach(view)})}}},{key:"show",value:function(){}},{key:"hide",value:function(){}}]),Annotations}(),Annotation=function(){function Annotation(_ref){var type=_ref.type,cfiRange=_ref.cfiRange,data=_ref.data,sectionIndex=_ref.sectionIndex,cb=_ref.cb;_classCallCheck(this,Annotation),this.type=type,this.cfiRange=cfiRange,this.data=data,this.sectionIndex=sectionIndex,this.mark=void 0,this.cb=cb}return _createClass(Annotation,[{key:"update",value:function(data){this.data=data}},{key:"attach",value:function(view){var cfiRange=this.cfiRange,data=this.data,type=this.type,cb=(this.mark,this.cb),result=void 0;return"highlight"===type?result=view.highlight(cfiRange,data,cb):"underline"===type?result=view.underline(cfiRange,data,cb):"mark"===type&&(result=view.mark(cfiRange,data,cb)),this.mark=result,result}},{key:"detach",value:function(view){var cfiRange=this.cfiRange,type=this.type,result=void 0;return view&&("highlight"===type?result=view.unhighlight(cfiRange):"underline"===type?result=view.ununderline(cfiRange):"mark"===type&&(result=view.unmark(cfiRange))),this.mark=void 0,result}},{key:"text",value:function(){}}]),Annotation}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(Annotation.prototype),__webpack_exports__.a=Annotations},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__utils_request__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_2__libs_mime_mime__=__webpack_require__(38),__WEBPACK_IMPORTED_MODULE_2__libs_mime_mime___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__libs_mime_mime__),__WEBPACK_IMPORTED_MODULE_3__utils_path__=__webpack_require__(8),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Archive=function(){function Archive(){_classCallCheck(this,Archive),this.zip=void 0,this.urlCache={},this.checkRequirements()}return _createClass(Archive,[{key:"checkRequirements",value:function(){try{if("undefined"==typeof JSZip){var _JSZip=__webpack_require__(118);this.zip=new _JSZip}else this.zip=new JSZip}catch(e){throw new Error("JSZip lib not loaded")}}},{key:"open",value:function(input,isBase64){return this.zip.loadAsync(input,{base64:isBase64})}},{key:"openUrl",value:function(zipUrl,isBase64){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_request__.default)(zipUrl,"binary").then(function(data){return this.zip.loadAsync(data,{base64:isBase64})}.bind(this))}},{key:"request",value:function(url,type){var response,deferred=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,path=new __WEBPACK_IMPORTED_MODULE_3__utils_path__.a(url);return type||(type=path.extension),response="blob"==type?this.getBlob(url):this.getText(url),response?response.then(function(r){var result=this.handleResponse(r,type);deferred.resolve(result)}.bind(this)):deferred.reject({message:"File not found in the epub: "+url,stack:(new Error).stack}),deferred.promise}},{key:"handleResponse",value:function(response,type){return"json"==type?JSON.parse(response):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isXml)(type)?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.parse)(response,"text/xml"):"xhtml"==type?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.parse)(response,"application/xhtml+xml"):"html"==type||"htm"==type?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.parse)(response,"text/html"):response}},{key:"getBlob",value:function(url,mimeType){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return mimeType=mimeType||__WEBPACK_IMPORTED_MODULE_2__libs_mime_mime___default.a.lookup(entry.name),entry.async("uint8array").then(function(uint8array){return new Blob([uint8array],{type:mimeType})})}},{key:"getText",value:function(url,encoding){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return entry.async("string").then(function(text){return text})}},{key:"getBase64",value:function(url,mimeType){var decodededUrl=window.decodeURIComponent(url.substr(1)),entry=this.zip.file(decodededUrl);if(entry)return mimeType=mimeType||__WEBPACK_IMPORTED_MODULE_2__libs_mime_mime___default.a.lookup(entry.name),entry.async("base64").then(function(data){return"data:"+mimeType+";base64,"+data})}},{key:"createUrl",value:function(url,options){var tempUrl,response,deferred=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,_URL=window.URL||window.webkitURL||window.mozURL,useBase64=options&&options.base64;return url in this.urlCache?(deferred.resolve(this.urlCache[url]),deferred.promise):(useBase64?(response=this.getBase64(url))&&response.then(function(tempUrl){this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)):(response=this.getBlob(url))&&response.then(function(blob){tempUrl=_URL.createObjectURL(blob),this.urlCache[url]=tempUrl,deferred.resolve(tempUrl)}.bind(this)),response||deferred.reject({message:"File not found in the epub: "+url,stack:(new Error).stack}),deferred.promise)}},{key:"revokeUrl",value:function(url){var _URL=window.URL||window.webkitURL||window.mozURL,fromCache=this.urlCache[url];fromCache&&_URL.revokeObjectURL(fromCache)}},{key:"destroy",value:function(){var _URL=window.URL||window.webkitURL||window.mozURL;for(var fromCache in this.urlCache)_URL.revokeObjectURL(fromCache);this.zip=void 0,this.urlCache={}}}]),Archive}();__webpack_exports__.a=Archive},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_path_webpack__=__webpack_require__(20),__WEBPACK_IMPORTED_MODULE_0_path_webpack___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_path_webpack__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Container=function(){function Container(containerDocument){_classCallCheck(this,Container),this.packagePath="",this.directory="",this.encoding="",containerDocument&&this.parse(containerDocument)}return _createClass(Container,[{key:"parse",value:function(containerDocument){var rootfile;if(!containerDocument)throw new Error("Container File Not Found");if(!(rootfile=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.qs)(containerDocument,"rootfile")))throw new Error("No RootFile Found");this.packagePath=rootfile.getAttribute("full-path"),this.directory=__WEBPACK_IMPORTED_MODULE_0_path_webpack___default.a.dirname(this.packagePath),this.encoding=containerDocument.xmlEncoding}},{key:"destroy",value:function(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}]),Container}();__webpack_exports__.a=Container},function(module,__webpack_exports__,__webpack_require__){"use strict";function ePub(url,options){return new __WEBPACK_IMPORTED_MODULE_0__book__.a(url,options)}var __WEBPACK_IMPORTED_MODULE_0__book__=__webpack_require__(39),__WEBPACK_IMPORTED_MODULE_1__rendition__=__webpack_require__(21),__WEBPACK_IMPORTED_MODULE_2__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_3__contents__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_4__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_5__libs_url_url_polyfill__=__webpack_require__(79),__WEBPACK_IMPORTED_MODULE_6__managers_views_iframe__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__libs_url_url_polyfill__),__webpack_require__(89)),__WEBPACK_IMPORTED_MODULE_7__managers_default__=__webpack_require__(41),__WEBPACK_IMPORTED_MODULE_8__managers_continuous__=__webpack_require__(86);ePub.VERSION="0.3","undefined"!=typeof global&&(global.EPUBJS_VERSION=ePub.VERSION),ePub.CFI=__WEBPACK_IMPORTED_MODULE_2__epubcfi__.a,ePub.Rendition=__WEBPACK_IMPORTED_MODULE_1__rendition__.a,ePub.Contents=__WEBPACK_IMPORTED_MODULE_3__contents__.a,ePub.utils=__WEBPACK_IMPORTED_MODULE_4__utils_core__,ePub.ViewManagers={},ePub.Views={},ePub.register={manager:function(name,_manager){return ePub.ViewManagers[name]=_manager},view:function(name,_view){return ePub.Views[name]=_view}},ePub.register.view("iframe",__WEBPACK_IMPORTED_MODULE_6__managers_views_iframe__.a),ePub.register.manager("default",__WEBPACK_IMPORTED_MODULE_7__managers_default__.a),ePub.register.manager("continuous",__WEBPACK_IMPORTED_MODULE_8__managers_continuous__.a),__webpack_exports__.a=ePub},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_5__epub__=(__webpack_require__(39),__webpack_require__(2),__webpack_require__(21),__webpack_require__(15),__webpack_require__(40),__webpack_require__(83));__webpack_exports__.a=__WEBPACK_IMPORTED_MODULE_5__epub__.a},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__utils_queue__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_2__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_3__utils_constants__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_4_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_4_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_event_emitter__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Locations=function(){function Locations(spine,request,pause){_classCallCheck(this,Locations),this.spine=spine,this.request=request,this.pause=pause||100,this.q=new __WEBPACK_IMPORTED_MODULE_1__utils_queue__.a(this),this.epubcfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a,this._locations=[],this.total=0,this.break=150,this._current=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}return _createClass(Locations,[{key:"generate",value:function(chars){return chars&&(this.break=chars),this.q.pause(),this.spine.each(function(section){section.linear&&this.q.enqueue(this.process.bind(this),section)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}},{key:"createRange",value:function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}},{key:"process",value:function(section){return section.load(this.request).then(function(contents){var completed=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,locations=this.parse(contents,section.cfiBase);return this._locations=this._locations.concat(locations),section.unload(),this.processingTimeout=setTimeout(function(){return completed.resolve(locations)},this.pause),completed.promise}.bind(this))}},{key:"parse",value:function(contents,cfiBase,chars){var range,prev,locations=[],doc=contents.ownerDocument,body=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(doc,"body"),counter=0,_break=chars||this.break,parser=function(node){var dist,len=node.length,pos=0;if(0===node.textContent.trim().length)return!1;for(0==counter&&(range=this.createRange(),range.startContainer=node,range.startOffset=0),dist=_break-counter,dist>len&&(counter+=len,pos=len);pos<len;)if(dist=_break-counter,0===counter&&(pos+=1,range=this.createRange(),range.startContainer=node,range.startOffset=pos),pos+dist>=len)counter+=len-pos,pos=len;else{pos+=dist,range.endContainer=node,range.endOffset=pos;var cfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(range,cfiBase).toString();locations.push(cfi),counter=0}prev=node};if(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.sprint)(body,parser.bind(this)),range&&range.startContainer&&prev){range.endContainer=prev,range.endOffset=prev.length;var cfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(range,cfiBase).toString();locations.push(cfi),counter=0}return locations}},{key:"locationFromCfi",value:function(cfi){var loc=void 0;return __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a.prototype.isCfiString(cfi)&&(cfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(cfi)),0===this._locations.length?-1:(loc=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.locationOf)(cfi,this._locations,this.epubcfi.compare),loc>this.total?this.total:loc)}},{key:"percentageFromCfi",value:function(cfi){if(0===this._locations.length)return null;var loc=this.locationFromCfi(cfi);return this.percentageFromLocation(loc)}},{key:"percentageFromLocation",value:function(loc){return loc&&this.total?loc/this.total:0}},{key:"cfiFromLocation",value:function(loc){var cfi=-1;return"number"!=typeof loc&&(loc=parseInt(loc)),loc>=0&&loc<this._locations.length&&(cfi=this._locations[loc]),cfi}},{key:"cfiFromPercentage",value:function(percentage){var loc=void 0;if(percentage>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),percentage>=1){var cfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a(this._locations[this.total]);return cfi.collapse(),cfi.toString()}return loc=Math.ceil(this.total*percentage),this.cfiFromLocation(loc)}},{key:"load",value:function(locations){return this._locations="string"==typeof locations?JSON.parse(locations):locations,this.total=this._locations.length-1,this._locations}},{key:"save",value:function(){return JSON.stringify(this._locations)}},{key:"getCurrent",value:function(){return this._current}},{key:"setCurrent",value:function(curr){var loc;if("string"==typeof curr)this._currentCfi=curr;else{if("number"!=typeof curr)return;this._current=curr}0!==this._locations.length&&("string"==typeof curr?(loc=this.locationFromCfi(curr),this._current=loc):loc=curr,this.emit(__WEBPACK_IMPORTED_MODULE_3__utils_constants__.a.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(loc)}))}},{key:"length",value:function(){return this._locations.length}},{key:"destroy",value:function(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}},{key:"currentLocation",get:function(){return this._current},set:function(curr){this.setCurrent(curr)}}]),Locations}();__WEBPACK_IMPORTED_MODULE_4_event_emitter___default()(Locations.prototype),__webpack_exports__.a=Locations},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__default__=__webpack_require__(41),__WEBPACK_IMPORTED_MODULE_2__utils_constants__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3_lodash_debounce__=__webpack_require__(66),__WEBPACK_IMPORTED_MODULE_3_lodash_debounce___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash_debounce__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContinuousViewManager=function(_DefaultViewManager){function ContinuousViewManager(options){_classCallCheck(this,ContinuousViewManager);var _this=_possibleConstructorReturn(this,(ContinuousViewManager.__proto__||Object.getPrototypeOf(ContinuousViewManager)).call(this,options));return _this.name="continuous",_this.settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(_this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0}),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.extend)(_this.settings,options.settings||{}),"undefined"!=options.settings.gap&&0===options.settings.gap&&(_this.settings.gap=options.settings.gap),_this.viewSettings={ignoreClass:_this.settings.ignoreClass,axis:_this.settings.axis,flow:_this.settings.flow,layout:_this.layout,width:0,height:0,forceEvenPages:!1},_this.scrollTop=0,_this.scrollLeft=0,_this}return _inherits(ContinuousViewManager,_DefaultViewManager),_createClass(ContinuousViewManager,[{key:"display",value:function(section,target){return __WEBPACK_IMPORTED_MODULE_1__default__.a.prototype.display.call(this,section,target).then(function(){return this.fill()}.bind(this))}},{key:"fill",value:function(_full){var _this2=this,full=_full||new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer;return this.q.enqueue(function(){return _this2.check()}).then(function(result){result?_this2.fill(full):full.resolve()}),full.promise}},{key:"moveTo",value:function(offset){var distX=0,distY=0;this.isPaginated?(distX=Math.floor(offset.left/this.layout.delta)*this.layout.delta,this.settings.offset):(distY=offset.top,offset.top,this.settings.offset),(distX>0||distY>0)&&this.scrollBy(distX,distY,!0)}},{key:"afterResized",value:function(view){this.emit(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.MANAGERS.RESIZE,view.section)}},{key:"removeShownListeners",value:function(view){view.onDisplayed=function(){}}},{key:"add",value:function(section){var _this3=this,view=this.createView(section);return this.views.append(view),view.on(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.VIEWS.RESIZED,function(bounds){view.expanded=!0}),view.on(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.VIEWS.AXIS,function(axis){_this3.updateAxis(axis)}),view.onDisplayed=this.afterDisplayed.bind(this),view.onResize=this.afterResized.bind(this),view.display(this.request)}},{key:"append",value:function(section){var view=this.createView(section);return view.on(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.VIEWS.RESIZED,function(bounds){view.expanded=!0}),this.views.append(view),view.onDisplayed=this.afterDisplayed.bind(this),view}},{key:"prepend",value:function(section){var _this4=this,view=this.createView(section);return view.on(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.VIEWS.RESIZED,function(bounds){_this4.counter(bounds),view.expanded=!0}),this.views.prepend(view),view.onDisplayed=this.afterDisplayed.bind(this),view}},{key:"counter",value:function(bounds){"vertical"===this.settings.axis?this.scrollBy(0,bounds.heightDelta,!0):this.scrollBy(bounds.widthDelta,0,!0)}},{key:"update",value:function(_offset){for(var view,container=this.bounds(),views=this.views.all(),viewsLength=views.length,visible=[],offset=void 0!==_offset?_offset:this.settings.offset||0,updating=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,promises=[],i=0;i<viewsLength;i++)if(view=views[i],!0===this.isVisible(view,offset,offset,container)){if(view.displayed)view.show();else{var displayed=view.display(this.request).then(function(view){view.show()},function(err){view.hide()});promises.push(displayed)}visible.push(view)}else this.q.enqueue(view.destroy.bind(view)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return promises.length?Promise.all(promises).catch(function(err){updating.reject(err)}):(updating.resolve(),updating.promise)}},{key:"check",value:function(_offsetLeft,_offsetTop){var _this5=this,checking=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,newViews=[],horizontal="horizontal"===this.settings.axis,delta=this.settings.offset||0;_offsetLeft&&horizontal&&(delta=_offsetLeft),_offsetTop&&!horizontal&&(delta=_offsetTop);var bounds=this._bounds,rtl="rtl"===this.settings.direction,dir=horizontal&&rtl?-1:1,offset=horizontal?this.scrollLeft:this.scrollTop*dir,visibleLength=horizontal?bounds.width:bounds.height,contentLength=horizontal?this.container.scrollWidth:this.container.scrollHeight,prepend=function(){var first=_this5.views.first(),prev=first&&first.section.prev();prev&&newViews.push(_this5.prepend(prev))},append=function(){var last=_this5.views.last(),next=last&&last.section.next();next&&newViews.push(_this5.append(next))};offset+visibleLength+delta>=contentLength&&(horizontal&&rtl?prepend():append()),offset-delta<0&&(horizontal&&rtl?append():prepend());var promises=newViews.map(function(view){return view.displayed});return newViews.length?Promise.all(promises).then(function(){if("pre-paginated"===_this5.layout.name&&_this5.layout.props.spread)return _this5.check()}).then(function(){return _this5.update(delta)},function(err){return err}):(this.q.enqueue(function(){this.update()}.bind(this)),checking.resolve(!1),checking.promise)}},{key:"trim",value:function(){for(var task=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,displayed=this.views.displayed(),first=displayed[0],last=displayed[displayed.length-1],firstIndex=this.views.indexOf(first),lastIndex=this.views.indexOf(last),above=this.views.slice(0,firstIndex),below=this.views.slice(lastIndex+1),i=0;i<above.length-1;i++)this.erase(above[i],above);for(var j=1;j<below.length;j++)this.erase(below[j]);return task.resolve(),task.promise}},{key:"erase",value:function(view,above){var prevTop,prevLeft;this.settings.height?(prevTop=this.container.scrollTop,prevLeft=this.container.scrollLeft):(prevTop=window.scrollY,prevLeft=window.scrollX);var bounds=view.bounds();this.views.remove(view),above&&("vertical"===this.settings.axis?this.scrollTo(0,prevTop-bounds.height,!0):this.scrollTo(prevLeft-bounds.width,0,!0))}},{key:"addEventListeners",value:function(stage){window.addEventListener("unload",function(e){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners()}},{key:"addScrollListeners",value:function(){var scroller;this.tick=__WEBPACK_IMPORTED_MODULE_0__utils_core__.requestAnimationFrame,this.settings.height?(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft):(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.height?(scroller=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft):(scroller=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX),scroller.addEventListener("scroll",this.onScroll.bind(this)),this._scrolled=__WEBPACK_IMPORTED_MODULE_3_lodash_debounce___default()(this.scrolled.bind(this),30),this.didScroll=!1}},{key:"removeEventListeners",value:function(){var scroller;scroller=this.settings.height?this.container:window,scroller.removeEventListener("scroll",this.onScroll.bind(this))}},{key:"onScroll",value:function(){var scrollTop=void 0,scrollLeft=void 0,dir="rtl"===this.settings.direction?-1:1;this.settings.height?(scrollTop=this.container.scrollTop,scrollLeft=this.container.scrollLeft):(scrollTop=window.scrollY*dir,scrollLeft=window.scrollX*dir),this.scrollTop=scrollTop,this.scrollLeft=scrollLeft,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(scrollTop-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(scrollLeft-this.prevScrollLeft),this.prevScrollTop=scrollTop,this.prevScrollLeft=scrollLeft,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),this.didScroll=!1}},{key:"scrolled",value:function(){this.q.enqueue(function(){this.check()}.bind(this)),this.emit(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(__WEBPACK_IMPORTED_MODULE_2__utils_constants__.a.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this))}},{key:"next",value:function(){var delta=(this.settings.direction,"pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta);this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(delta,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:"prev",value:function(){var delta=(this.settings.direction,"pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta);this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(-delta,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:"updateAxis",value:function(axis,forceUpdate){this.isPaginated||(axis="vertical"),(forceUpdate||axis!==this.settings.axis)&&(this.settings.axis=axis,this.stage&&this.stage.axis(axis),this.viewSettings.axis=axis,this.mapping&&this.mapping.axis(axis),this.layout&&"vertical"===axis?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread),this.settings.infinite="vertical"===axis)}}]),ContinuousViewManager}(__WEBPACK_IMPORTED_MODULE_1__default__.a);__webpack_exports__.a=ContinuousViewManager},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1_lodash_throttle__=__webpack_require__(152),__WEBPACK_IMPORTED_MODULE_1_lodash_throttle___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash_throttle__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Stage=function(){function Stage(_options){_classCallCheck(this,Stage),this.settings=_options||{},this.id="epubjs-container-"+__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}return _createClass(Stage,[{key:"create",value:function(options){var height=options.height,width=options.width,overflow=options.overflow||!1,axis=options.axis||"vertical",direction=options.direction;options.height&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(options.height)&&(height=options.height+"px"),options.width&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(options.width)&&(width=options.width+"px");var container=document.createElement("div");return container.id=this.id,container.classList.add("epub-container"),container.style.wordSpacing="0",container.style.lineHeight="0",container.style.verticalAlign="top",container.style.position="relative","horizontal"===axis&&(container.style.display="flex",container.style.flexDirection="row",container.style.flexWrap="nowrap"),width&&(container.style.width=width),height&&(container.style.height=height),overflow&&(container.style.overflow=overflow),direction&&(container.dir=direction,container.style.direction=direction),direction&&this.settings.fullsize&&(document.body.style.direction=direction),container}},{key:"wrap",value:function(container){var wrapper=document.createElement("div");return wrapper.style.visibility="hidden",wrapper.style.overflow="hidden",wrapper.style.width="0",wrapper.style.height="0",wrapper.appendChild(container),wrapper}},{key:"getElement",value:function(_element){var element;if(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isElement)(_element)?element=_element:"string"==typeof _element&&(element=document.getElementById(_element)),!element)throw new Error("Not an Element");return element}},{key:"attachTo",value:function(what){var base,element=this.getElement(what);if(element)return base=this.settings.hidden?this.wrapper:this.container,element.appendChild(base),this.element=element,element}},{key:"getContainer",value:function(){return this.container}},{key:"onResize",value:function(func){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(this.settings.width)&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(this.settings.height)||(this.resizeFunc=__WEBPACK_IMPORTED_MODULE_1_lodash_throttle___default()(func,50),window.addEventListener("resize",this.resizeFunc,!1))}},{key:"onOrientationChange",value:function(func){this.orientationChangeFunc=func,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}},{key:"size",value:function(width,height){var bounds;null===width&&(bounds=this.element.getBoundingClientRect(),bounds.width&&(width=bounds.width,this.container.style.width=bounds.width+"px")),null===height&&(bounds=bounds||this.element.getBoundingClientRect(),bounds.height&&(height=bounds.height,this.container.style.height=bounds.height+"px")),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(width)||(bounds=this.container.getBoundingClientRect(),width=bounds.width),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.isNumber)(height)||(bounds=bounds||this.container.getBoundingClientRect(),height=bounds.height),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};var _windowBounds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.windowBounds)();return width||(width=_windowBounds.width),!this.settings.fullsize&&height||(height=_windowBounds.height),{width:width-this.containerPadding.left-this.containerPadding.right,height:height-this.containerPadding.top-this.containerPadding.bottom}}},{key:"bounds",value:function(){var box=void 0;return"visible"!==this.container.style.overflow&&(box=this.container&&this.container.getBoundingClientRect()),box&&box.width&&box.height?box:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.windowBounds)()}},{key:"getSheet",value:function(){var style=document.createElement("style");return style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet}},{key:"addStyleRules",value:function(selector,rulesArray){var scope="#"+this.id+" ",rules="";this.sheet||(this.sheet=this.getSheet()),rulesArray.forEach(function(set){for(var prop in set)set.hasOwnProperty(prop)&&(rules+=prop+":"+set[prop]+";")}),this.sheet.insertRule(scope+selector+" {"+rules+"}",0)}},{key:"axis",value:function(_axis){"horizontal"===_axis?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block"}},{key:"direction",value:function(dir){this.container&&(this.container.dir=dir,this.container.style.direction=dir),this.settings.fullsize&&(document.body.style.direction=dir)}},{key:"destroy",value:function(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}]),Stage}();__webpack_exports__.a=Stage},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Views=function(){function Views(container){_classCallCheck(this,Views),this.container=container,this._views=[],this.length=0,this.hidden=!1}return _createClass(Views,[{key:"all",value:function(){return this._views}},{key:"first",value:function(){return this._views[0]}},{key:"last",value:function(){return this._views[this._views.length-1]}},{key:"indexOf",value:function(view){return this._views.indexOf(view)}},{key:"slice",value:function(){return this._views.slice.apply(this._views,arguments)}},{key:"get",value:function(i){return this._views[i]}},{key:"append",value:function(view){return this._views.push(view),this.container&&this.container.appendChild(view.element),this.length++,view}},{key:"prepend",value:function(view){return this._views.unshift(view),this.container&&this.container.insertBefore(view.element,this.container.firstChild),this.length++,view}},{key:"insert",value:function(view,index){return this._views.splice(index,0,view),this.container&&(index<this.container.children.length?this.container.insertBefore(view.element,this.container.children[index]):this.container.appendChild(view.element)),this.length++,view}},{key:"remove",value:function(view){var index=this._views.indexOf(view);index>-1&&this._views.splice(index,1),this.destroy(view),this.length--}},{key:"destroy",value:function(view){view.displayed&&view.destroy(),this.container&&this.container.removeChild(view.element),view=null}},{key:"forEach",value:function(){return this._views.forEach.apply(this._views,arguments)}},{key:"clear",value:function(){var view,len=this.length;if(this.length){for(var i=0;i<len;i++)view=this._views[i],this.destroy(view);this._views=[],this.length=0}}},{key:"find",value:function(section){for(var view,len=this.length,i=0;i<len;i++)if(view=this._views[i],view.displayed&&view.section.index==section.index)return view}},{key:"displayed",value:function(){for(var view,displayed=[],len=this.length,i=0;i<len;i++)view=this._views[i],view.displayed&&displayed.push(view);return displayed}},{key:"show",value:function(){for(var view,len=this.length,i=0;i<len;i++)view=this._views[i],view.displayed&&view.show();this.hidden=!1}},{key:"hide",value:function(){for(var view,len=this.length,i=0;i<len;i++)view=this._views[i],view.displayed&&view.hide();this.hidden=!0}}]),Views}();__webpack_exports__.a=Views},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0_event_emitter__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_0_event_emitter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_event_emitter__),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_3__contents__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_4__utils_constants__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_5_marks_pane__=__webpack_require__(155),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),IframeView=function(){function IframeView(section,options){_classCallCheck(this,IframeView),this.settings=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.extend)({ignoreClass:"",axis:options.layout&&"scrolled"===options.layout.props.flow?"vertical":"horizontal",direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0},options||{}),this.id="epubjs-view-"+__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.uuid)(),this.section=section,this.index=section.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new __WEBPACK_IMPORTED_MODULE_2__epubcfi__.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}return _createClass(IframeView,[{key:"container",value:function(axis){var element=document.createElement("div");return element.classList.add("epub-view"),element.style.height="0px",element.style.width="0px",element.style.overflow="hidden",element.style.position="relative",element.style.display="block",element.style.flex=axis&&"horizontal"==axis?"none":"initial",element}},{key:"create",value:function(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.element.appendChild(this.iframe),this.added=!0,this.elementBounds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}},{key:"render",value:function(request,show){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(request)),this.sectionRender.then(function(contents){return this.load(contents)}.bind(this)).then(function(){var _this=this;this.layout.format(this.contents);var writingMode=this.contents.writingMode(),axis=0===writingMode.indexOf("vertical")?"vertical":"horizontal";return this.setAxis(axis),this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.AXIS,axis),this.addListeners(),new Promise(function(resolve,reject){_this.expand(),resolve()})}.bind(this),function(e){return this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.LOAD_ERROR,e),new Promise(function(resolve,reject){reject(e)})}.bind(this)).then(function(){this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.RENDERED,this.section)}.bind(this))}},{key:"reset",value:function(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}},{key:"size",value:function(_width,_height){var width=_width||this.settings.width,height=_height||this.settings.height;"pre-paginated"===this.layout.name?this.lock("both",width,height):"horizontal"===this.settings.axis?this.lock("height",width,height):this.lock("width",width,height),this.settings.width=width,this.settings.height=height}},{key:"lock",value:function(what,width,height){var iframeBorders,elBorders=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.borders)(this.element);iframeBorders=this.iframe?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.borders)(this.iframe):{width:0,height:0},"width"==what&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(width)&&(this.lockedWidth=width-elBorders.width-iframeBorders.width),"height"==what&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(height)&&(this.lockedHeight=height-elBorders.height-iframeBorders.height),"both"===what&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(width)&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(height)&&(this.lockedWidth=width-elBorders.width-iframeBorders.width,this.lockedHeight=height-elBorders.height-iframeBorders.height),this.displayed&&this.iframe&&this.expand()}},{key:"expand",value:function(force){var columns,width=this.lockedWidth,height=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,"pre-paginated"===this.layout.name?(width=this.layout.columnWidth,height=this.layout.height):"horizontal"===this.settings.axis?(width=this.contents.textWidth(),width%this.layout.pageWidth>0&&(width=Math.ceil(width/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(columns=width/this.layout.delta,this.layout.divisor>1&&"reflowable"===this.layout.name&&columns%2>0&&(width+=this.layout.gap+this.layout.columnWidth))):"vertical"===this.settings.axis&&(height=this.contents.textHeight()),(this._needsReframe||width!=this._width||height!=this._height)&&this.reframe(width,height),this._expanding=!1)}},{key:"reframe",value:function(width,height){var size;__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(width)&&(this.element.style.width=width+"px",this.iframe.style.width=width+"px",this._width=width),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.isNumber)(height)&&(this.element.style.height=height+"px",this.iframe.style.height=height+"px",this._height=height),size={width:width,height:height,widthDelta:this.prevBounds?width-this.prevBounds.width:width,heightDelta:this.prevBounds?height-this.prevBounds.height:height},this.pane&&this.pane.render(),this.onResize(this,size),this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.RESIZED,size),this.prevBounds=size,this.elementBounds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.bounds)(this.element)}},{key:"load",value:function(contents){var loading=new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer,loaded=loading.promise;if(!this.iframe)return loading.reject(new Error("No Iframe Available")),loaded;if(this.iframe.onload=function(event){this.onLoad(event,loading)}.bind(this),"blobUrl"===this.settings.method)this.blobUrl=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.createBlobUrl)(contents,"application/xhtml+xml"),this.iframe.src=this.blobUrl;else if("srcdoc"===this.settings.method)this.iframe.srcdoc=contents;else{if(this.document=this.iframe.contentDocument,!this.document)return loading.reject(new Error("No Document Available")),loaded;this.iframe.contentDocument.open(),this.iframe.contentDocument.write(contents),this.iframe.contentDocument.close()}return loaded}},{key:"onLoad",value:function(event,promise){var _this2=this;this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new __WEBPACK_IMPORTED_MODULE_3__contents__.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var link=this.document.querySelector("link[rel='canonical']");link?link.setAttribute("href",this.section.canonical):(link=this.document.createElement("link"),link.setAttribute("rel","canonical"),link.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(link)),this.contents.on(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.CONTENTS.EXPAND,function(){_this2.displayed&&_this2.iframe&&(_this2.expand(),_this2.contents&&_this2.layout.format(_this2.contents))}),this.contents.on(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.CONTENTS.RESIZE,function(e){_this2.displayed&&_this2.iframe&&(_this2.expand(),_this2.contents&&_this2.layout.format(_this2.contents))}),promise.resolve(this.contents)}},{key:"setLayout",value:function(layout){this.layout=layout,this.contents&&(this.layout.format(this.contents),this.expand())}},{key:"setAxis",value:function(axis){"scrolled"===this.layout.props.flow&&(axis="vertical"),this.settings.axis=axis,this.element.style.flex="horizontal"==axis?"none":"initial",this.size()}},{key:"addListeners",value:function(){}},{key:"removeListeners",value:function(layoutFunc){}},{key:"display",value:function(request){var displayed=new __WEBPACK_IMPORTED_MODULE_1__utils_core__.defer;return this.displayed?displayed.resolve(this):this.render(request).then(function(){this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,displayed.resolve(this)}.bind(this),function(err){displayed.reject(err,this)}),displayed.promise}},{key:"show",value:function(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible"),this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.SHOWN,this)}},{key:"hide",value:function(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.HIDDEN,this)}},{key:"offset",value:function(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}},{key:"width",value:function(){return this._width}},{key:"height",value:function(){return this._height}},{key:"position",value:function(){return this.element.getBoundingClientRect()}},{key:"locationOf",value:function(target){var targetPos=(this.iframe.getBoundingClientRect(),this.contents.locationOf(target,this.settings.ignoreClass));return{left:targetPos.left,top:targetPos.top}}},{key:"onDisplayed",value:function(view){}},{key:"onResize",value:function(view,e){}},{key:"bounds",value:function(force){return!force&&this.elementBounds||(this.elementBounds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.bounds)(this.element)),this.elementBounds}},{key:"highlight",value:function(cfiRange){var _this3=this,data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},cb=arguments[2];if(this.contents){var range=this.contents.range(cfiRange),emitter=function(){_this3.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.MARK_CLICKED,cfiRange,data)};data.epubcfi=cfiRange,this.pane||(this.pane=new __WEBPACK_IMPORTED_MODULE_5_marks_pane__.a(this.iframe,this.element));var m=new __WEBPACK_IMPORTED_MODULE_5_marks_pane__.b(range,"epubjs-hl",data,{fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"}),h=this.pane.addMark(m);return this.highlights[cfiRange]={mark:h,element:h.element,listeners:[emitter,cb]},h.element.setAttribute("ref","epubjs-hl"),h.element.addEventListener("click",emitter),h.element.addEventListener("touchstart",emitter),cb&&(h.element.addEventListener("click",cb),h.element.addEventListener("touchstart",cb)),h}}},{key:"underline",value:function(cfiRange){var _this4=this,data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},cb=arguments[2];if(this.contents){var range=this.contents.range(cfiRange),emitter=function(){_this4.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.MARK_CLICKED,cfiRange,data)};data.epubcfi=cfiRange,this.pane||(this.pane=new __WEBPACK_IMPORTED_MODULE_5_marks_pane__.a(this.iframe,this.element));var m=new __WEBPACK_IMPORTED_MODULE_5_marks_pane__.c(range,"epubjs-ul",data,{stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"}),h=this.pane.addMark(m);return this.underlines[cfiRange]={mark:h,element:h.element,listeners:[emitter,cb]},h.element.setAttribute("ref","epubjs-ul"),h.element.addEventListener("click",emitter),h.element.addEventListener("touchstart",emitter),cb&&(h.element.addEventListener("click",cb),h.element.addEventListener("touchstart",cb)),h}}},{key:"mark",value:function(cfiRange){var _this5=this,data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},cb=arguments[2];if(this.contents){if(cfiRange in this.marks){return this.marks[cfiRange]}var range=this.contents.range(cfiRange);if(range){var container=range.commonAncestorContainer,parent=1===container.nodeType?container:container.parentNode,emitter=function(e){_this5.emit(__WEBPACK_IMPORTED_MODULE_4__utils_constants__.a.VIEWS.MARK_CLICKED,cfiRange,data)};range.collapsed&&1===container.nodeType?(range=new Range,range.selectNodeContents(container)):range.collapsed&&(range=new Range,range.selectNodeContents(parent));var top=void 0,right=void 0,left=void 0;if("pre-paginated"===this.layout.name||"horizontal"!==this.settings.axis){var pos=range.getBoundingClientRect();top=pos.top,right=pos.right}else for(var rects=range.getClientRects(),rect=void 0,i=0;i!=rects.length;i++)rect=rects[i],(!left||rect.left<left)&&(left=rect.left,right=left+this.layout.columnWidth-this.layout.gap,top=rect.top);var mark=this.document.createElement("a");return mark.setAttribute("ref","epubjs-mk"),mark.style.position="absolute",mark.style.top=top+"px",mark.style.left=right+"px",mark.dataset.epubcfi=cfiRange,data&&Object.keys(data).forEach(function(key){mark.dataset[key]=data[key]}),cb&&(mark.addEventListener("click",cb),mark.addEventListener("touchstart",cb)),mark.addEventListener("click",emitter),mark.addEventListener("touchstart",emitter),this.element.appendChild(mark),this.marks[cfiRange]={element:mark,listeners:[emitter,cb]},parent}}}},{key:"unhighlight",value:function(cfiRange){var item=void 0;cfiRange in this.highlights&&(item=this.highlights[cfiRange],this.pane.removeMark(item.mark),item.listeners.forEach(function(l){l&&item.element.removeEventListener("click",l)}),delete this.highlights[cfiRange])}},{key:"ununderline",value:function(cfiRange){var item=void 0;cfiRange in this.underlines&&(item=this.underlines[cfiRange],this.pane.removeMark(item.mark),item.listeners.forEach(function(l){l&&item.element.removeEventListener("click",l)}),delete this.underlines[cfiRange])}},{key:"unmark",value:function(cfiRange){var item=void 0;cfiRange in this.marks&&(item=this.marks[cfiRange],this.element.removeChild(item.element),item.listeners.forEach(function(l){l&&item.element.removeEventListener("click",l)}),delete this.marks[cfiRange])}},{key:"destroy",value:function(){for(var cfiRange in this.highlights)this.unhighlight(cfiRange);for(var _cfiRange in this.underlines)this.ununderline(_cfiRange);for(var _cfiRange2 in this.marks)this.unmark(_cfiRange2);this.blobUrl&&__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.iframe=null,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}]),IframeView}();__WEBPACK_IMPORTED_MODULE_0_event_emitter___default()(IframeView.prototype),__webpack_exports__.a=IframeView},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Navigation=function(){function Navigation(xml){_classCallCheck(this,Navigation),this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,xml&&this.parse(xml)}return _createClass(Navigation,[{key:"parse",value:function(xml){var isXml=xml.nodeType,html=void 0,ncx=void 0;isXml&&(html=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(xml,"html"),ncx=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(xml,"ncx")),isXml?html?(this.toc=this.parseNav(xml),this.landmarks=this.parseLandmarks(xml)):ncx&&(this.toc=this.parseNcx(xml)):this.toc=this.load(xml),this.length=0,this.unpack(this.toc)}},{key:"unpack",value:function(toc){for(var item,i=0;i<toc.length;i++)item=toc[i],item.href&&(this.tocByHref[item.href]=i),item.id&&(this.tocById[item.id]=i),this.length++,item.subitems.length&&this.unpack(item.subitems)}},{key:"get",value:function(target){var index;return target?(0===target.indexOf("#")?index=this.tocById[target.substring(1)]:target in this.tocByHref&&(index=this.tocByHref[target]),this.toc[index]):this.toc}},{key:"landmark",value:function(type){var index;return type?(index=this.landmarksByType[type],this.landmarks[index]):this.landmarks}},{key:"parseNav",value:function(navHtml){var i,item,parent,navElement=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.querySelectorByType)(navHtml,"nav","toc"),navItems=navElement?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsa)(navElement,"li"):[],length=navItems.length,toc={},list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)(item=this.navItem(navItems[i]))&&(toc[item.id]=item,item.parent?(parent=toc[item.parent],parent.subitems.push(item)):list.push(item));return list}},{key:"navItem",value:function(item){var id=item.getAttribute("id")||void 0,content=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.filterChildren)(item,"a",!0);if(content){var src=content.getAttribute("href")||"",text=content.textContent||"",subitems=[],parentItem=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.getParentByTagName)(item,"li"),parent=void 0;for(parentItem&&(parent=parentItem.getAttribute("id"));!parent&&parentItem;)(parentItem=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.getParentByTagName)(parentItem,"li"))&&(parent=parentItem.getAttribute("id"));return{id:id,href:src,label:text,subitems:subitems,parent:parent}}}},{key:"parseLandmarks",value:function(navHtml){var i,item,navElement=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.querySelectorByType)(navHtml,"nav","landmarks"),navItems=navElement?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsa)(navElement,"li"):[],length=navItems.length,list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)(item=this.landmarkItem(navItems[i]))&&(list.push(item),this.landmarksByType[item.type]=i);return list}},{key:"landmarkItem",value:function(item){var content=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.filterChildren)(item,"a",!0);if(content){var type=content.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0;return{href:content.getAttribute("href")||"",label:content.textContent||"",type:type}}}},{key:"parseNcx",value:function(tocXml){var i,item,parent,navPoints=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsa)(tocXml,"navPoint"),length=navPoints.length,toc={},list=[];if(!navPoints||0===length)return list;for(i=0;i<length;++i)item=this.ncxItem(navPoints[i]),toc[item.id]=item,item.parent?(parent=toc[item.parent],parent.subitems.push(item)):list.push(item);return list}},{key:"ncxItem",value:function(item){var parent,id=item.getAttribute("id")||!1,content=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(item,"content"),src=content.getAttribute("src"),navLabel=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(item,"navLabel"),text=navLabel.textContent?navLabel.textContent:"",subitems=[],parentNode=item.parentNode;return parentNode&&"navPoint"===parentNode.nodeName&&(parent=parentNode.getAttribute("id")),{id:id,href:src,label:text,subitems:subitems,parent:parent}}},{key:"load",value:function(json){var _this=this;return json.map(function(item){return item.label=item.title,item.children&&(item.subitems=_this.load(item.children)),item})}},{key:"forEach",value:function(fn){return this.toc.forEach(fn)}}]),Navigation}();__webpack_exports__.a=Navigation},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Packaging=function(){function Packaging(packageDocument){_classCallCheck(this,Packaging),this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},packageDocument&&this.parse(packageDocument)}return _createClass(Packaging,[{key:"parse",value:function(packageDocument){var metadataNode,manifestNode,spineNode;if(!packageDocument)throw new Error("Package File Not Found");if(!(metadataNode=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(packageDocument,"metadata")))throw new Error("No Metadata Found");if(!(manifestNode=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(packageDocument,"manifest")))throw new Error("No Manifest Found");if(!(spineNode=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(packageDocument,"spine")))throw new Error("No Spine Found");return this.manifest=this.parseManifest(manifestNode),this.navPath=this.findNavPath(manifestNode),this.ncxPath=this.findNcxPath(manifestNode,spineNode),this.coverPath=this.findCoverPath(packageDocument),this.spineNodeIndex=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.indexOfElementNode)(spineNode),this.spine=this.parseSpine(spineNode,this.manifest),this.metadata=this.parseMetadata(metadataNode),this.metadata.direction=spineNode.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}},{key:"parseMetadata",value:function(xml){var metadata={};return metadata.title=this.getElementText(xml,"title"),metadata.creator=this.getElementText(xml,"creator"),metadata.description=this.getElementText(xml,"description"),metadata.pubdate=this.getElementText(xml,"date"),metadata.publisher=this.getElementText(xml,"publisher"),metadata.identifier=this.getElementText(xml,"identifier"),metadata.language=this.getElementText(xml,"language"),metadata.rights=this.getElementText(xml,"rights"),metadata.modified_date=this.getPropertyText(xml,"dcterms:modified"),metadata.layout=this.getPropertyText(xml,"rendition:layout"),metadata.orientation=this.getPropertyText(xml,"rendition:orientation"),metadata.flow=this.getPropertyText(xml,"rendition:flow"),metadata.viewport=this.getPropertyText(xml,"rendition:viewport"),metadata}},{key:"parseManifest",value:function(manifestXml){var manifest={},selected=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsa)(manifestXml,"item");return Array.prototype.slice.call(selected).forEach(function(item){var id=item.getAttribute("id"),href=item.getAttribute("href")||"",type=item.getAttribute("media-type")||"",properties=item.getAttribute("properties")||"";manifest[id]={href:href,type:type,properties:properties.length?properties.split(" "):[]}}),manifest}},{key:"parseSpine",value:function(spineXml,manifest){var spine=[],selected=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsa)(spineXml,"itemref");return Array.prototype.slice.call(selected).forEach(function(item,index){var idref=item.getAttribute("idref"),props=item.getAttribute("properties")||"",propArray=props.length?props.split(" "):[],itemref={idref:idref,linear:item.getAttribute("linear")||"yes",properties:propArray,index:index};spine.push(itemref)}),spine}},{key:"findNavPath",value:function(manifestNode){var node=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsp)(manifestNode,"item",{properties:"nav"});return!!node&&node.getAttribute("href")}},{key:"findNcxPath",value:function(manifestNode,spineNode){var tocId,node=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsp)(manifestNode,"item",{"media-type":"application/x-dtbncx+xml"});return node||(tocId=spineNode.getAttribute("toc"))&&(node=manifestNode.getElementById(tocId)),!!node&&node.getAttribute("href")}},{key:"findCoverPath",value:function(packageXml){if("2.0"===__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qs)(packageXml,"package").getAttribute("version")){var metaCover=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsp)(packageXml,"meta",{name:"cover"});if(metaCover){var coverId=metaCover.getAttribute("content"),cover=packageXml.getElementById(coverId);return cover?cover.getAttribute("href"):""}return!1}var node=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsp)(packageXml,"item",{properties:"cover-image"});return node?node.getAttribute("href"):""}},{key:"getElementText",value:function(xml,tag){var el,found=xml.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",tag);return found&&0!==found.length?(el=found[0],el.childNodes.length?el.childNodes[0].nodeValue:""):""}},{key:"getPropertyText",value:function(xml,property){var el=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.qsp)(xml,"meta",{property:property});return el&&el.childNodes.length?el.childNodes[0].nodeValue:""}},{key:"load",value:function(json){var _this=this;return this.metadata=json.metadata,this.spine=json.spine.map(function(item,index){return item.index=index,item}),json.resources.forEach(function(item,index){_this.manifest[index]=item,item.rel&&"cover"===item.rel[0]&&(_this.coverPath=item.href)}),this.spineNodeIndex=0,this.toc=json.toc.map(function(item,index){return item.label=item.title,item}),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}},{key:"destroy",value:function(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}]),Packaging}();__webpack_exports__.a=Packaging},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PageList=function(){function PageList(xml){_classCallCheck(this,PageList),this.pages=[],this.locations=[],this.epubcfi=new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,xml&&(this.pageList=this.parse(xml)),this.pageList&&this.pageList.length&&this.process(this.pageList)}return _createClass(PageList,[{key:"parse",value:function(xml){var html=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.qs)(xml,"html"),ncx=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.qs)(xml,"ncx");if(html)return this.parseNav(xml)}},{key:"parseNav",value:function(navHtml){var i,item,navElement=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.querySelectorByType)(navHtml,"nav","page-list"),navItems=navElement?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.qsa)(navElement,"li"):[],length=navItems.length,list=[];if(!navItems||0===length)return list;for(i=0;i<length;++i)item=this.item(navItems[i]),list.push(item);return list}},{key:"item",value:function(_item){var split,packageUrl,cfi,content=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.qs)(_item,"a"),href=content.getAttribute("href")||"",text=content.textContent||"",page=parseInt(text),isCfi=href.indexOf("epubcfi");return-1!=isCfi?(split=href.split("#"),packageUrl=split[0],cfi=split.length>1&&split[1],{cfi:cfi,href:href,packageUrl:packageUrl,page:page}):{href:href,page:page}}},{key:"process",value:function(pageList){pageList.forEach(function(item){this.pages.push(item.page),item.cfi&&this.locations.push(item.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}},{key:"pageFromCfi",value:function(cfi){var pg=-1;if(0===this.locations.length)return-1;var index=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.indexOfSorted)(cfi,this.locations,this.epubcfi.compare);return-1!=index?pg=this.pages[index]:(index=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.locationOf)(cfi,this.locations,this.epubcfi.compare),void 0!==(pg=index-1>=0?this.pages[index-1]:this.pages[0])||(pg=-1)),pg}},{key:"cfiFromPage",value:function(pg){var cfi=-1;"number"!=typeof pg&&(pg=parseInt(pg));var index=this.pages.indexOf(pg);return-1!=index&&(cfi=this.locations[index]),cfi}},{key:"pageFromPercentage",value:function(percent){return Math.round(this.totalPages*percent)}},{key:"percentageFromPage",value:function(pg){var percentage=(pg-this.firstPage)/this.totalPages;return Math.round(1e3*percentage)/1e3}},{key:"percentageFromCfi",value:function(cfi){var pg=this.pageFromCfi(cfi);return this.percentageFromPage(pg)}},{key:"destroy",value:function(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}]),PageList}();__webpack_exports__.a=PageList},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_replacements__=__webpack_require__(16),__WEBPACK_IMPORTED_MODULE_1__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__utils_url__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_3__libs_mime_mime__=__webpack_require__(38),__WEBPACK_IMPORTED_MODULE_3__libs_mime_mime___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__libs_mime_mime__),__WEBPACK_IMPORTED_MODULE_4__utils_path__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_5_path_webpack__=__webpack_require__(20),__WEBPACK_IMPORTED_MODULE_5_path_webpack___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_path_webpack__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Resources=function(){function Resources(manifest,options){_classCallCheck(this,Resources),this.settings={replacements:options&&options.replacements||"base64",archive:options&&options.archive,resolver:options&&options.resolver,request:options&&options.request},this.manifest=manifest,this.resources=Object.keys(manifest).map(function(key){return manifest[key]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}return _createClass(Resources,[{key:"split",value:function(){this.html=this.resources.filter(function(item){if("application/xhtml+xml"===item.type||"text/html"===item.type)return!0}),this.assets=this.resources.filter(function(item){if("application/xhtml+xml"!==item.type&&"text/html"!==item.type)return!0}),this.css=this.resources.filter(function(item){if("text/css"===item.type)return!0})}},{key:"splitUrls",value:function(){this.urls=this.assets.map(function(item){return item.href}.bind(this)),this.cssUrls=this.css.map(function(item){return item.href})}},{key:"createUrl",value:function(url){var parsedUrl=new __WEBPACK_IMPORTED_MODULE_2__utils_url__.a(url),mimeType=__WEBPACK_IMPORTED_MODULE_3__libs_mime_mime___default.a.lookup(parsedUrl.filename);return this.settings.archive?this.settings.archive.createUrl(url,{base64:"base64"===this.settings.replacements}):"base64"===this.settings.replacements?this.settings.request(url,"blob").then(function(blob){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.blob2base64)(blob)}).then(function(blob){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.createBase64Url)(blob,mimeType)}):this.settings.request(url,"blob").then(function(blob){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.createBlobUrl)(blob,mimeType)})}},{key:"replacements",value:function(){var _this=this;if("none"===this.settings.replacements)return new Promise(function(resolve){resolve(this.urls)}.bind(this));var replacements=this.urls.map(function(url){var absolute=_this.settings.resolver(url);return _this.createUrl(absolute).catch(function(err){return console.error(err),null})});return Promise.all(replacements).then(function(replacementUrls){return _this.replacementUrls=replacementUrls.filter(function(url){return"string"==typeof url}),replacementUrls})}},{key:"replaceCss",value:function(archive,resolver){var replaced=[];return archive=archive||this.settings.archive,resolver=resolver||this.settings.resolver,this.cssUrls.forEach(function(href){var replacement=this.createCssFile(href,archive,resolver).then(function(replacementUrl){var indexInUrls=this.urls.indexOf(href);indexInUrls>-1&&(this.replacementUrls[indexInUrls]=replacementUrl)}.bind(this));replaced.push(replacement)}.bind(this)),Promise.all(replaced)}},{key:"createCssFile",value:function(href){var newUrl,_this2=this;if(__WEBPACK_IMPORTED_MODULE_5_path_webpack___default.a.isAbsolute(href))return new Promise(function(resolve){resolve()});var textResponse,absolute=this.settings.resolver(href);textResponse=this.settings.archive?this.settings.archive.getText(absolute):this.settings.request(absolute,"text");var relUrls=this.urls.map(function(assetHref){var resolved=_this2.settings.resolver(assetHref);return new __WEBPACK_IMPORTED_MODULE_4__utils_path__.a(absolute).relative(resolved)});return textResponse?textResponse.then(function(text){return text=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_replacements__.b)(text,relUrls,_this2.replacementUrls),newUrl="base64"===_this2.settings.replacements?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.createBase64Url)(text,"text/css"):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_core__.createBlobUrl)(text,"text/css")},function(err){return new Promise(function(resolve){resolve()})}):new Promise(function(resolve){resolve()})}},{key:"relativeTo",value:function(absolute,resolver){return resolver=resolver||this.settings.resolver,this.urls.map(function(href){var resolved=resolver(href);return new __WEBPACK_IMPORTED_MODULE_4__utils_path__.a(absolute).relative(resolved)}.bind(this))}},{key:"get",value:function(path){var indexInUrls=this.urls.indexOf(path);if(-1!==indexInUrls)return this.replacementUrls.length?new Promise(function(resolve,reject){resolve(this.replacementUrls[indexInUrls])}.bind(this)):this.createUrl(path)}},{key:"substitute",value:function(content,url){var relUrls;return relUrls=url?this.relativeTo(url):this.urls,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_replacements__.b)(content,relUrls,this.replacementUrls)}},{key:"destroy",value:function(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}]),Resources}();__webpack_exports__.a=Resources},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_2__utils_hook__=__webpack_require__(22),__WEBPACK_IMPORTED_MODULE_3__utils_replacements__=__webpack_require__(16),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Section=function(){function Section(item,hooks){_classCallCheck(this,Section),this.idref=item.idref,this.linear="yes"===item.linear,this.properties=item.properties,this.index=item.index,this.href=item.href,this.url=item.url,this.canonical=item.canonical,this.next=item.next,this.prev=item.prev,this.cfiBase=item.cfiBase,hooks?this.hooks=hooks:(this.hooks={},this.hooks.serialize=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this),this.hooks.content=new __WEBPACK_IMPORTED_MODULE_2__utils_hook__.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0}return _createClass(Section,[{key:"load",value:function(_request){var request=_request||this.request||__webpack_require__(24),loading=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,loaded=loading.promise;return this.contents?loading.resolve(this.contents):request(this.url).then(function(xml){return this.document=xml,this.contents=xml.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){loading.resolve(this.contents)}.bind(this)).catch(function(error){loading.reject(error)}),loaded}},{key:"base",value:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_replacements__.c)(this.document,this)}},{key:"render",value:function(_request){var rendering=new __WEBPACK_IMPORTED_MODULE_0__utils_core__.defer,rendered=rendering.promise;return this.output,this.load(_request).then(function(contents){var Serializer,userAgent="undefined"!=typeof navigator&&navigator.userAgent||"",isIE=userAgent.indexOf("Trident")>=0;Serializer="undefined"==typeof XMLSerializer||isIE?__webpack_require__(72).XMLSerializer:XMLSerializer;var serializer=new Serializer;return this.output=serializer.serializeToString(contents),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){rendering.resolve(this.output)}.bind(this)).catch(function(error){rendering.reject(error)}),rendered}},{key:"find",value:function(_query){var section=this,matches=[],query=_query.toLowerCase(),find=function(node){for(var cfi,pos,excerpt,text=node.textContent.toLowerCase(),range=section.document.createRange(),last=-1;-1!=pos;)pos=text.indexOf(query,last+1),-1!=pos&&(range=section.document.createRange(),range.setStart(node,pos),range.setEnd(node,pos+query.length),cfi=section.cfiFromRange(range),node.textContent.length<150?excerpt=node.textContent:(excerpt=node.textContent.substring(pos-75,pos+75),excerpt="..."+excerpt+"..."),matches.push({cfi:cfi,excerpt:excerpt})),last=pos};return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_core__.sprint)(section.document,function(node){find(node)}),matches}},{key:"reconcileLayoutSettings",value:function(global){var settings={layout:global.layout,spread:global.spread,orientation:global.orientation};return this.properties.forEach(function(prop){var property,value,rendition=prop.replace("rendition:",""),split=rendition.indexOf("-");-1!=split&&(property=rendition.slice(0,split),value=rendition.slice(split+1),settings[property]=value)}),settings}},{key:"cfiFromRange",value:function(_range){return new __WEBPACK_IMPORTED_MODULE_1__epubcfi__.a(_range,this.cfiBase).toString()}},{key:"cfiFromElement",value:function(el){return new __WEBPACK_IMPORTED_MODULE_1__epubcfi__.a(el,this.cfiBase).toString()}},{key:"unload",value:function(){this.document=void 0,this.contents=void 0,this.output=void 0}},{key:"destroy",value:function(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}]),Section}();__webpack_exports__.a=Section},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__epubcfi__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1__utils_hook__=__webpack_require__(22),__WEBPACK_IMPORTED_MODULE_2__section__=__webpack_require__(94),__WEBPACK_IMPORTED_MODULE_3__utils_replacements__=__webpack_require__(16),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Spine=function(){function Spine(){_classCallCheck(this,Spine),this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new __WEBPACK_IMPORTED_MODULE_1__utils_hook__.a,this.hooks.content=new __WEBPACK_IMPORTED_MODULE_1__utils_hook__.a,this.hooks.content.register(__WEBPACK_IMPORTED_MODULE_3__utils_replacements__.c),this.hooks.content.register(__WEBPACK_IMPORTED_MODULE_3__utils_replacements__.d),this.hooks.content.register(__WEBPACK_IMPORTED_MODULE_3__utils_replacements__.e),this.epubcfi=new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}return _createClass(Spine,[{key:"unpack",value:function(_package,resolver,canonical){var _this=this;this.items=_package.spine,this.manifest=_package.manifest,this.spineNodeIndex=_package.spineNodeIndex,this.baseUrl=_package.baseUrl||_package.basePath||"",this.length=this.items.length,this.items.forEach(function(item,index){var spineItem,manifestItem=_this.manifest[item.idref];item.index=index,item.cfiBase=_this.epubcfi.generateChapterComponent(_this.spineNodeIndex,item.index,item.idref),item.href&&(item.url=resolver(item.href,!0),item.canonical=canonical(item.href)),manifestItem&&(item.href=manifestItem.href,item.url=resolver(item.href,!0),item.canonical=canonical(item.href),manifestItem.properties.length&&item.properties.push.apply(item.properties,manifestItem.properties)),"yes"===item.linear?(item.prev=function(){for(var prevIndex=item.index;prevIndex>0;){var prev=this.get(prevIndex-1);if(prev&&prev.linear)return prev;prevIndex-=1}}.bind(_this),item.next=function(){for(var nextIndex=item.index;nextIndex<this.spineItems.length-1;){var next=this.get(nextIndex+1);if(next&&next.linear)return next;nextIndex+=1}}.bind(_this)):(item.prev=function(){},item.next=function(){}),spineItem=new __WEBPACK_IMPORTED_MODULE_2__section__.a(item,_this.hooks),_this.append(spineItem)}),this.loaded=!0}},{key:"get",value:function(target){var index=0;if(void 0===target)for(;index<this.spineItems.length;){var next=this.spineItems[index];if(next&&next.linear)break;index+=1}else if(this.epubcfi.isCfiString(target)){var cfi=new __WEBPACK_IMPORTED_MODULE_0__epubcfi__.a(target);index=cfi.spinePos}else"number"==typeof target||!1===isNaN(target)?index=target:"string"==typeof target&&0===target.indexOf("#")?index=this.spineById[target.substring(1)]:"string"==typeof target&&(target=target.split("#")[0],index=this.spineByHref[target]||this.spineByHref[encodeURI(target)]);return this.spineItems[index]||null}},{key:"append",value:function(section){var index=this.spineItems.length;return section.index=index,this.spineItems.push(section),this.spineByHref[decodeURI(section.href)]=index,this.spineByHref[encodeURI(section.href)]=index,this.spineByHref[section.href]=index,this.spineById[section.idref]=index,index}},{key:"prepend",value:function(section){return this.spineByHref[section.href]=0,this.spineById[section.idref]=0,this.spineItems.forEach(function(item,index){item.index=index}),0}},{key:"remove",value:function(section){var index=this.spineItems.indexOf(section);if(index>-1)return delete this.spineByHref[section.href],delete this.spineById[section.idref],this.spineItems.splice(index,1)}},{key:"each",value:function(){return this.spineItems.forEach.apply(this.spineItems,arguments)}},{key:"first",value:function(){var index=0;do{var next=this.get(index);if(next&&next.linear)return next;index+=1}while(index<this.spineItems.length)}},{key:"last",value:function(){var index=this.spineItems.length-1;do{var prev=this.get(index);if(prev&&prev.linear)return prev;index-=1}while(index>=0)}},{key:"destroy",value:function(){this.each(function(section){return section.destroy()}),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}]),Spine}();__webpack_exports__.a=Spine},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__utils_url__=__webpack_require__(17),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Themes=function(){function Themes(rendition){_classCallCheck(this,Themes),this.rendition=rendition,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}return _createClass(Themes,[{key:"register",value:function(){if(0!==arguments.length)return 1===arguments.length&&"object"===_typeof(arguments[0])?this.registerThemes(arguments[0]):1===arguments.length&&"string"==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&"string"==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&"object"===_typeof(arguments[1])?this.registerRules(arguments[0],arguments[1]):void 0}},{key:"default",value:function(theme){if(theme)return"string"==typeof theme?this.registerUrl("default",theme):"object"===(void 0===theme?"undefined":_typeof(theme))?this.registerRules("default",theme):void 0}},{key:"registerThemes",value:function(themes){for(var theme in themes)themes.hasOwnProperty(theme)&&("string"==typeof themes[theme]?this.registerUrl(theme,themes[theme]):this.registerRules(theme,themes[theme]))}},{key:"registerUrl",value:function(name,input){var url=new __WEBPACK_IMPORTED_MODULE_0__utils_url__.a(input);this._themes[name]={url:url.toString()},this._injected[name]&&this.update(name)}},{key:"registerRules",value:function(name,rules){this._themes[name]={rules:rules},this._injected[name]&&this.update(name)}},{key:"select",value:function(name){var contents,prev=this._current;this._current=name,this.update(name),contents=this.rendition.getContents(),contents.forEach(function(content){content.removeClass(prev),content.addClass(name)})}},{key:"update",value:function(name){var _this=this;this.rendition.getContents().forEach(function(content){_this.add(name,content)})}},{key:"inject",value:function(contents){var theme,links=[],themes=this._themes;for(var name in themes)!themes.hasOwnProperty(name)||name!==this._current&&"default"!==name||(theme=themes[name],(theme.rules&&Object.keys(theme.rules).length>0||theme.url&&-1===links.indexOf(theme.url))&&this.add(name,contents),this._injected.push(name));"default"!=this._current&&contents.addClass(this._current)}},{key:"add",value:function(name,contents){var theme=this._themes[name];theme&&contents&&(theme.url?contents.addStylesheet(theme.url):theme.serialized||theme.rules&&(contents.addStylesheetRules(theme.rules),theme.injected=!0))}},{key:"override",value:function(name,value){var _this2=this,contents=this.rendition.getContents();this._overrides[name]=value,contents.forEach(function(content){content.css(name,_this2._overrides[name])})}},{key:"overrides",value:function(contents){var overrides=this._overrides;for(var rule in overrides)overrides.hasOwnProperty(rule)&&contents.css(rule,overrides[rule])}},{key:"fontSize",value:function(size){this.override("font-size",size)}},{key:"font",value:function(f){this.override("font-family",f)}},{key:"destroy",value:function(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}]),Themes}();__webpack_exports__.a=Themes},function(module,exports,__webpack_require__){"use strict";module.exports=function(){}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(99)()?Object.assign:__webpack_require__(100)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var obj,assign=Object.assign;return"function"==typeof assign&&(obj={foo:"raz"},assign(obj,{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(102),value=__webpack_require__(107),max=Math.max;module.exports=function(dest,src){var error,i,assign,length=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)src=arguments[i],keys(src).forEach(assign);if(void 0!==error)throw error;return dest}},function(module,exports,__webpack_require__){"use strict";module.exports=function(obj){return"function"==typeof obj}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(103)()?Object.keys:__webpack_require__(104)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(25),keys=Object.keys;module.exports=function(object){return keys(isValue(object)?Object(object):object)}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(25),forEach=Array.prototype.forEach,create=Object.create,process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);return forEach.call(arguments,function(options){isValue(options)&&process(Object(options),result)}),result}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(25);module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(109)()?String.prototype.contains:__webpack_require__(110)},function(module,exports,__webpack_require__){"use strict";var str="razdwatrzy";module.exports=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))}},function(module,exports,__webpack_require__){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__main_scss__=__webpack_require__(76),__WEBPACK_IMPORTED_MODULE_1__components_book_reader___=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__main_scss__),__webpack_require__(74));__webpack_require__.d(__webpack_exports__,"BookReader",function(){return __WEBPACK_IMPORTED_MODULE_1__components_book_reader___.a});var __WEBPACK_IMPORTED_MODULE_2__components_preferences_dropdown___=__webpack_require__(75);__webpack_require__.d(__webpack_exports__,"PreferencesDropdown",function(){return __WEBPACK_IMPORTED_MODULE_2__components_preferences_dropdown___.a});var __WEBPACK_IMPORTED_MODULE_3__components_tree_menu___=__webpack_require__(37);__webpack_require__.d(__webpack_exports__,"TreeMenu",function(){return __WEBPACK_IMPORTED_MODULE_3__components_tree_menu___.a})},function(module,exports,__webpack_require__){"use strict";function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}function immediate(task){1!==queue.push(task)||draining||scheduleDrain()}var scheduleDrain,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(process.browser)if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||void 0===global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}else scheduleDrain=function(){process.nextTick(nextTick)};var draining,queue=[];module.exports=immediate},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){"use strict";function FlateWorker(action,options){GenericWorker.call(this,"FlateWorker/"+action),this._pako=null,this._pakoAction=action,this._pakoOptions=options,this.meta={}}var USE_TYPEDARRAY="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,pako=__webpack_require__(157),utils=__webpack_require__(0),GenericWorker=__webpack_require__(3),ARRAY_TYPE=USE_TYPEDARRAY?"uint8array":"array";exports.magic="\b\0",utils.inherits(FlateWorker,GenericWorker),FlateWorker.prototype.processChunk=function(chunk){this.meta=chunk.meta,null===this._pako&&this._createPako(),this._pako.push(utils.transformTo(ARRAY_TYPE,chunk.data),!1)},FlateWorker.prototype.flush=function(){GenericWorker.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},FlateWorker.prototype.cleanUp=function(){GenericWorker.prototype.cleanUp.call(this),this._pako=null},FlateWorker.prototype._createPako=function(){this._pako=new pako[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var self=this;this._pako.onData=function(data){self.push({data:data,meta:self.meta})}},exports.compressWorker=function(compressionOptions){return new FlateWorker("Deflate",compressionOptions)},exports.uncompressWorker=function(){return new FlateWorker("Inflate",{})}},function(module,exports,__webpack_require__){"use strict";function ZipFileWorker(streamFiles,comment,platform,encodeFileName){GenericWorker.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=comment,this.zipPlatform=platform,this.encodeFileName=encodeFileName,this.streamFiles=streamFiles,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var utils=__webpack_require__(0),GenericWorker=__webpack_require__(3),utf8=__webpack_require__(9),crc32=__webpack_require__(27),signature=__webpack_require__(50),decToHex=function(dec,bytes){var i,hex="";for(i=0;i<bytes;i++)hex+=String.fromCharCode(255&dec),dec>>>=8;return hex},generateUnixExternalFileAttr=function(unixPermissions,isDir){var result=unixPermissions;return unixPermissions||(result=isDir?16893:33204),(65535&result)<<16},generateDosExternalFileAttr=function(dosPermissions,isDir){return 63&(dosPermissions||0)},generateZipParts=function(streamInfo,streamedContent,streamingEnded,offset,platform,encodeFileName){var dosTime,dosDate,file=streamInfo.file,compression=streamInfo.compression,useCustomEncoding=encodeFileName!==utf8.utf8encode,encodedFileName=utils.transformTo("string",encodeFileName(file.name)),utfEncodedFileName=utils.transformTo("string",utf8.utf8encode(file.name)),comment=file.comment,encodedComment=utils.transformTo("string",encodeFileName(comment)),utfEncodedComment=utils.transformTo("string",utf8.utf8encode(comment)),useUTF8ForFileName=utfEncodedFileName.length!==file.name.length,useUTF8ForComment=utfEncodedComment.length!==comment.length,extraFields="",unicodePathExtraField="",unicodeCommentExtraField="",dir=file.dir,date=file.date,dataInfo={crc32:0,compressedSize:0,uncompressedSize:0};streamedContent&&!streamingEnded||(dataInfo.crc32=streamInfo.crc32,dataInfo.compressedSize=streamInfo.compressedSize,dataInfo.uncompressedSize=streamInfo.uncompressedSize);var bitflag=0;streamedContent&&(bitflag|=8),useCustomEncoding||!useUTF8ForFileName&&!useUTF8ForComment||(bitflag|=2048);var extFileAttr=0,versionMadeBy=0;dir&&(extFileAttr|=16),"UNIX"===platform?(versionMadeBy=798,extFileAttr|=generateUnixExternalFileAttr(file.unixPermissions,dir)):(versionMadeBy=20,extFileAttr|=generateDosExternalFileAttr(file.dosPermissions)),dosTime=date.getUTCHours(),dosTime<<=6,dosTime|=date.getUTCMinutes(),dosTime<<=5,dosTime|=date.getUTCSeconds()/2,dosDate=date.getUTCFullYear()-1980,dosDate<<=4,dosDate|=date.getUTCMonth()+1,dosDate<<=5,dosDate|=date.getUTCDate(),useUTF8ForFileName&&(unicodePathExtraField=decToHex(1,1)+decToHex(crc32(encodedFileName),4)+utfEncodedFileName,extraFields+="up"+decToHex(unicodePathExtraField.length,2)+unicodePathExtraField),useUTF8ForComment&&(unicodeCommentExtraField=decToHex(1,1)+decToHex(crc32(encodedComment),4)+utfEncodedComment,extraFields+="uc"+decToHex(unicodeCommentExtraField.length,2)+unicodeCommentExtraField);var header="";return header+="\n\0",header+=decToHex(bitflag,2),header+=compression.magic,header+=decToHex(dosTime,2),header+=decToHex(dosDate,2),header+=decToHex(dataInfo.crc32,4),header+=decToHex(dataInfo.compressedSize,4),header+=decToHex(dataInfo.uncompressedSize,4),header+=decToHex(encodedFileName.length,2),header+=decToHex(extraFields.length,2),{fileRecord:signature.LOCAL_FILE_HEADER+header+encodedFileName+extraFields,dirRecord:signature.CENTRAL_FILE_HEADER+decToHex(versionMadeBy,2)+header+decToHex(encodedComment.length,2)+"\0\0\0\0"+decToHex(extFileAttr,4)+decToHex(offset,4)+encodedFileName+extraFields+encodedComment}},generateCentralDirectoryEnd=function(entriesCount,centralDirLength,localDirLength,comment,encodeFileName){var encodedComment=utils.transformTo("string",encodeFileName(comment));return signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+decToHex(entriesCount,2)+decToHex(entriesCount,2)+decToHex(centralDirLength,4)+decToHex(localDirLength,4)+decToHex(encodedComment.length,2)+encodedComment},generateDataDescriptors=function(streamInfo){return signature.DATA_DESCRIPTOR+decToHex(streamInfo.crc32,4)+decToHex(streamInfo.compressedSize,4)+decToHex(streamInfo.uncompressedSize,4)};utils.inherits(ZipFileWorker,GenericWorker),ZipFileWorker.prototype.push=function(chunk){var currentFilePercent=chunk.meta.percent||0,entriesCount=this.entriesCount,remainingFiles=this._sources.length;this.accumulate?this.contentBuffer.push(chunk):(this.bytesWritten+=chunk.data.length,GenericWorker.prototype.push.call(this,{data:chunk.data,meta:{currentFile:this.currentFile,percent:entriesCount?(currentFilePercent+100*(entriesCount-remainingFiles-1))/entriesCount:100}}))},ZipFileWorker.prototype.openedSource=function(streamInfo){this.currentSourceOffset=this.bytesWritten,this.currentFile=streamInfo.file.name;var streamedContent=this.streamFiles&&!streamInfo.file.dir;if(streamedContent){var record=generateZipParts(streamInfo,streamedContent,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:record.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ZipFileWorker.prototype.closedSource=function(streamInfo){this.accumulate=!1;var streamedContent=this.streamFiles&&!streamInfo.file.dir,record=generateZipParts(streamInfo,streamedContent,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(record.dirRecord),streamedContent)this.push({data:generateDataDescriptors(streamInfo),meta:{percent:100}});else for(this.push({data:record.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ZipFileWorker.prototype.flush=function(){for(var localDirLength=this.bytesWritten,i=0;i<this.dirRecords.length;i++)this.push({data:this.dirRecords[i],meta:{percent:100}});var centralDirLength=this.bytesWritten-localDirLength,dirEnd=generateCentralDirectoryEnd(this.dirRecords.length,centralDirLength,localDirLength,this.zipComment,this.encodeFileName);this.push({data:dirEnd,meta:{percent:100}})},ZipFileWorker.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ZipFileWorker.prototype.registerPrevious=function(previous){this._sources.push(previous);var self=this;return previous.on("data",function(chunk){self.processChunk(chunk)}),previous.on("end",function(){self.closedSource(self.previous.streamInfo),self._sources.length?self.prepareNextSource():self.end()}),previous.on("error",function(e){self.error(e)}),this},ZipFileWorker.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ZipFileWorker.prototype.error=function(e){var sources=this._sources;if(!GenericWorker.prototype.error.call(this,e))return!1;for(var i=0;i<sources.length;i++)try{sources[i].error(e)}catch(e){}return!0},ZipFileWorker.prototype.lock=function(){GenericWorker.prototype.lock.call(this);for(var sources=this._sources,i=0;i<sources.length;i++)sources[i].lock()},module.exports=ZipFileWorker},function(module,exports,__webpack_require__){"use strict";var compressions=__webpack_require__(44),ZipFileWorker=__webpack_require__(116),getCompression=function(fileCompression,zipCompression){var compressionName=fileCompression||zipCompression,compression=compressions[compressionName];if(!compression)throw new Error(compressionName+" is not a valid compression method !");return compression};exports.generateWorker=function(zip,options,comment){var zipFileWorker=new ZipFileWorker(options.streamFiles,comment,options.platform,options.encodeFileName),entriesCount=0;try{zip.forEach(function(relativePath,file){entriesCount++;var compression=getCompression(file.options.compression,options.compression),compressionOptions=file.options.compressionOptions||options.compressionOptions||{},dir=file.dir,date=file.date;file._compressWorker(compression,compressionOptions).withStreamInfo("file",{name:relativePath,dir:dir,date:date,comment:file.comment||"",unixPermissions:file.unixPermissions,dosPermissions:file.dosPermissions}).pipe(zipFileWorker)}),zipFileWorker.entriesCount=entriesCount}catch(e){zipFileWorker.error(e)}return zipFileWorker}},function(module,exports,__webpack_require__){"use strict";function JSZip(){if(!(this instanceof JSZip))return new JSZip;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var newObj=new JSZip;for(var i in this)"function"!=typeof this[i]&&(newObj[i]=this[i]);return newObj}}JSZip.prototype=__webpack_require__(122),JSZip.prototype.loadAsync=__webpack_require__(119),JSZip.support=__webpack_require__(6),JSZip.defaults=__webpack_require__(45),JSZip.version="3.1.5",JSZip.loadAsync=function(content,options){return(new JSZip).loadAsync(content,options)},JSZip.external=__webpack_require__(13),module.exports=JSZip},function(module,exports,__webpack_require__){"use strict";function checkEntryCRC32(zipEntry){return new external.Promise(function(resolve,reject){var worker=zipEntry.decompressed.getContentWorker().pipe(new Crc32Probe);worker.on("error",function(e){reject(e)}).on("end",function(){worker.streamInfo.crc32!==zipEntry.decompressed.crc32?reject(new Error("Corrupted zip : CRC32 mismatch")):resolve()}).resume()})}var utils=__webpack_require__(0),external=__webpack_require__(13),utf8=__webpack_require__(9),utils=__webpack_require__(0),ZipEntries=__webpack_require__(126),Crc32Probe=__webpack_require__(51),nodejsUtils=__webpack_require__(18);module.exports=function(data,options){var zip=this;return options=utils.extend(options||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:utf8.utf8decode}),nodejsUtils.isNode&&nodejsUtils.isStream(data)?external.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):utils.prepareContent("the loaded zip file",data,!0,options.optimizedBinaryString,options.base64).then(function(data){var zipEntries=new ZipEntries(options);return zipEntries.load(data),zipEntries}).then(function(zipEntries){var promises=[external.Promise.resolve(zipEntries)],files=zipEntries.files;if(options.checkCRC32)for(var i=0;i<files.length;i++)promises.push(checkEntryCRC32(files[i]));return external.Promise.all(promises)}).then(function(results){for(var zipEntries=results.shift(),files=zipEntries.files,i=0;i<files.length;i++){var input=files[i];zip.file(input.fileNameStr,input.decompressed,{binary:!0,optimizedBinaryString:!0,date:input.date,dir:input.dir,comment:input.fileCommentStr.length?input.fileCommentStr:null,unixPermissions:input.unixPermissions,dosPermissions:input.dosPermissions,createFolders:options.createFolders})}return zipEntries.zipComment.length&&(zip.comment=zipEntries.zipComment),zip})}},function(module,exports,__webpack_require__){"use strict";function NodejsStreamInputAdapter(filename,stream){GenericWorker.call(this,"Nodejs stream input adapter for "+filename),this._upstreamEnded=!1,this._bindStream(stream)}var utils=__webpack_require__(0),GenericWorker=__webpack_require__(3);utils.inherits(NodejsStreamInputAdapter,GenericWorker),NodejsStreamInputAdapter.prototype._bindStream=function(stream){var self=this;this._stream=stream,stream.pause(),stream.on("data",function(chunk){self.push({data:chunk,meta:{percent:0}})}).on("error",function(e){self.isPaused?this.generatedError=e:self.error(e)}).on("end",function(){self.isPaused?self._upstreamEnded=!0:self.end()})},NodejsStreamInputAdapter.prototype.pause=function(){return!!GenericWorker.prototype.pause.call(this)&&(this._stream.pause(),!0)},NodejsStreamInputAdapter.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},module.exports=NodejsStreamInputAdapter},function(module,exports,__webpack_require__){"use strict";function NodejsStreamOutputAdapter(helper,options,updateCb){Readable.call(this,options),this._helper=helper;var self=this;helper.on("data",function(data,meta){self.push(data)||self._helper.pause(),updateCb&&updateCb(meta)}).on("error",function(e){self.emit("error",e)}).on("end",function(){self.push(null)})}var Readable=__webpack_require__(62).Readable;__webpack_require__(0).inherits(NodejsStreamOutputAdapter,Readable),NodejsStreamOutputAdapter.prototype._read=function(){this._helper.resume()},module.exports=NodejsStreamOutputAdapter},function(module,exports,__webpack_require__){"use strict";function isRegExp(object){return"[object RegExp]"===Object.prototype.toString.call(object)}var utf8=__webpack_require__(9),utils=__webpack_require__(0),GenericWorker=__webpack_require__(3),StreamHelper=__webpack_require__(54),defaults=__webpack_require__(45),CompressedObject=__webpack_require__(26),ZipObject=__webpack_require__(128),generate=__webpack_require__(117),nodejsUtils=__webpack_require__(18),NodejsStreamInputAdapter=__webpack_require__(120),fileAdd=function(name,data,originalOptions){var parent,dataType=utils.getTypeOf(data),o=utils.extend(originalOptions||{},defaults);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(name=forceTrailingSlash(name)),o.createFolders&&(parent=parentFolder(name))&&folderAdd.call(this,parent,!0);var isUnicodeString="string"===dataType&&!1===o.binary&&!1===o.base64;originalOptions&&void 0!==originalOptions.binary||(o.binary=!isUnicodeString),(data instanceof CompressedObject&&0===data.uncompressedSize||o.dir||!data||0===data.length)&&(o.base64=!1,o.binary=!0,data="",o.compression="STORE",dataType="string");var zipObjectContent=null;zipObjectContent=data instanceof CompressedObject||data instanceof GenericWorker?data:nodejsUtils.isNode&&nodejsUtils.isStream(data)?new NodejsStreamInputAdapter(name,data):utils.prepareContent(name,data,o.binary,o.optimizedBinaryString,o.base64);var object=new ZipObject(name,zipObjectContent,o);this.files[name]=object},parentFolder=function(path){"/"===path.slice(-1)&&(path=path.substring(0,path.length-1));var lastSlash=path.lastIndexOf("/");return lastSlash>0?path.substring(0,lastSlash):""},forceTrailingSlash=function(path){return"/"!==path.slice(-1)&&(path+="/"),path},folderAdd=function(name,createFolders){return createFolders=void 0!==createFolders?createFolders:defaults.createFolders,name=forceTrailingSlash(name),this.files[name]||fileAdd.call(this,name,null,{dir:!0,createFolders:createFolders}),this.files[name]},out={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(cb){var filename,relativePath,file;for(filename in this.files)this.files.hasOwnProperty(filename)&&(file=this.files[filename],(relativePath=filename.slice(this.root.length,filename.length))&&filename.slice(0,this.root.length)===this.root&&cb(relativePath,file))},filter:function(search){var result=[];return this.forEach(function(relativePath,entry){search(relativePath,entry)&&result.push(entry)}),result},file:function(name,data,o){if(1===arguments.length){if(isRegExp(name)){var regexp=name;return this.filter(function(relativePath,file){return!file.dir&&regexp.test(relativePath)})}var obj=this.files[this.root+name];return obj&&!obj.dir?obj:null}return name=this.root+name,fileAdd.call(this,name,data,o),this},folder:function(arg){if(!arg)return this;if(isRegExp(arg))return this.filter(function(relativePath,file){return file.dir&&arg.test(relativePath)});var name=this.root+arg,newFolder=folderAdd.call(this,name),ret=this.clone();return ret.root=newFolder.name,ret},remove:function(name){name=this.root+name;var file=this.files[name];if(file||("/"!==name.slice(-1)&&(name+="/"),file=this.files[name]),file&&!file.dir)delete this.files[name];else for(var kids=this.filter(function(relativePath,file){return file.name.slice(0,name.length)===name}),i=0;i<kids.length;i++)delete this.files[kids[i].name];return this},generate:function(options){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(options){var worker,opts={};try{if(opts=utils.extend(options||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:utf8.utf8encode}),opts.type=opts.type.toLowerCase(),opts.compression=opts.compression.toUpperCase(),"binarystring"===opts.type&&(opts.type="string"),!opts.type)throw new Error("No output type specified.");utils.checkSupport(opts.type),"darwin"!==opts.platform&&"freebsd"!==opts.platform&&"linux"!==opts.platform&&"sunos"!==opts.platform||(opts.platform="UNIX"),"win32"===opts.platform&&(opts.platform="DOS");var comment=opts.comment||this.comment||"";worker=generate.generateWorker(this,opts,comment)}catch(e){worker=new GenericWorker("error"),worker.error(e)}return new StreamHelper(worker,opts.type||"string",opts.mimeType)},generateAsync:function(options,onUpdate){return this.generateInternalStream(options).accumulate(onUpdate)},generateNodeStream:function(options,onUpdate){return options=options||{},options.type||(options.type="nodebuffer"),this.generateInternalStream(options).toNodejsStream(onUpdate)}};module.exports=out},function(module,exports,__webpack_require__){"use strict";function NodeBufferReader(data){Uint8ArrayReader.call(this,data)}var Uint8ArrayReader=__webpack_require__(48);__webpack_require__(0).inherits(NodeBufferReader,Uint8ArrayReader),NodeBufferReader.prototype.readData=function(size){this.checkOffset(size);var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=NodeBufferReader},function(module,exports,__webpack_require__){"use strict";function StringReader(data){DataReader.call(this,data)}var DataReader=__webpack_require__(47);__webpack_require__(0).inherits(StringReader,DataReader),StringReader.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},StringReader.prototype.lastIndexOfSignature=function(sig){return this.data.lastIndexOf(sig)-this.zero},StringReader.prototype.readAndCheckSignature=function(sig){return sig===this.readData(4)},StringReader.prototype.readData=function(size){this.checkOffset(size);var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=StringReader},function(module,exports,__webpack_require__){"use strict";function ConvertWorker(destType){GenericWorker.call(this,"ConvertWorker to "+destType),this.destType=destType}var GenericWorker=__webpack_require__(3),utils=__webpack_require__(0);utils.inherits(ConvertWorker,GenericWorker),ConvertWorker.prototype.processChunk=function(chunk){this.push({data:utils.transformTo(this.destType,chunk.data),meta:chunk.meta})},module.exports=ConvertWorker},function(module,exports,__webpack_require__){"use strict";function ZipEntries(loadOptions){this.files=[],this.loadOptions=loadOptions}var readerFor=__webpack_require__(49),utils=__webpack_require__(0),sig=__webpack_require__(50),ZipEntry=__webpack_require__(127),support=(__webpack_require__(9),__webpack_require__(6));ZipEntries.prototype={checkSignature:function(expectedSignature){if(!this.reader.readAndCheckSignature(expectedSignature)){this.reader.index-=4;var signature=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+utils.pretty(signature)+", expected "+utils.pretty(expectedSignature)+")")}},isSignature:function(askedIndex,expectedSignature){var currentIndex=this.reader.index;this.reader.setIndex(askedIndex);var signature=this.reader.readString(4),result=signature===expectedSignature;return this.reader.setIndex(currentIndex),result},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var zipComment=this.reader.readData(this.zipCommentLength),decodeParamType=support.uint8array?"uint8array":"array",decodeContent=utils.transformTo(decodeParamType,zipComment);this.zipComment=this.loadOptions.decodeFileName(decodeContent)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var extraFieldId,extraFieldLength,extraFieldValue,extraDataSize=this.zip64EndOfCentralSize-44;0<extraDataSize;)extraFieldId=this.reader.readInt(2),extraFieldLength=this.reader.readInt(4),extraFieldValue=this.reader.readData(extraFieldLength),this.zip64ExtensibleData[extraFieldId]={id:extraFieldId,length:extraFieldLength,value:extraFieldValue}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var i,file;for(i=0;i<this.files.length;i++)file=this.files[i],this.reader.setIndex(file.localHeaderOffset),this.checkSignature(sig.LOCAL_FILE_HEADER),file.readLocalPart(this.reader),file.handleUTF8(),file.processAttributes()},readCentralDir:function(){var file;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(sig.CENTRAL_FILE_HEADER);)file=new ZipEntry({zip64:this.zip64},this.loadOptions),file.readCentralPart(this.reader),this.files.push(file);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var offset=this.reader.lastIndexOfSignature(sig.CENTRAL_DIRECTORY_END);if(offset<0){throw!this.isSignature(0,sig.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(offset);var endOfCentralDirOffset=offset;if(this.checkSignature(sig.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===utils.MAX_VALUE_16BITS||this.diskWithCentralDirStart===utils.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===utils.MAX_VALUE_16BITS||this.centralDirRecords===utils.MAX_VALUE_16BITS||this.centralDirSize===utils.MAX_VALUE_32BITS||this.centralDirOffset===utils.MAX_VALUE_32BITS){if(this.zip64=!0,(offset=this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(offset),this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,sig.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var expectedEndOfCentralDirOffset=this.centralDirOffset+this.centralDirSize;this.zip64&&(expectedEndOfCentralDirOffset+=20,expectedEndOfCentralDirOffset+=12+this.zip64EndOfCentralSize);var extraBytes=endOfCentralDirOffset-expectedEndOfCentralDirOffset;if(extraBytes>0)this.isSignature(endOfCentralDirOffset,sig.CENTRAL_FILE_HEADER)||(this.reader.zero=extraBytes);else if(extraBytes<0)throw new Error("Corrupted zip: missing "+Math.abs(extraBytes)+" bytes.")},prepareReader:function(data){this.reader=readerFor(data)},load:function(data){this.prepareReader(data),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},module.exports=ZipEntries},function(module,exports,__webpack_require__){"use strict";function ZipEntry(options,loadOptions){this.options=options,this.loadOptions=loadOptions}var readerFor=__webpack_require__(49),utils=__webpack_require__(0),CompressedObject=__webpack_require__(26),crc32fn=__webpack_require__(27),utf8=__webpack_require__(9),compressions=__webpack_require__(44),support=__webpack_require__(6),findCompression=function(compressionMethod){for(var method in compressions)if(compressions.hasOwnProperty(method)&&compressions[method].magic===compressionMethod)return compressions[method];return null};ZipEntry.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(reader){var compression,localExtraFieldsLength;if(reader.skip(22),this.fileNameLength=reader.readInt(2),localExtraFieldsLength=reader.readInt(2),this.fileName=reader.readData(this.fileNameLength),reader.skip(localExtraFieldsLength),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(compression=findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+utils.pretty(this.compressionMethod)+" unknown (inner file : "+utils.transformTo("string",this.fileName)+")");this.decompressed=new CompressedObject(this.compressedSize,this.uncompressedSize,this.crc32,compression,reader.readData(this.compressedSize))},readCentralPart:function(reader){this.versionMadeBy=reader.readInt(2),reader.skip(2),this.bitFlag=reader.readInt(2),this.compressionMethod=reader.readString(2),this.date=reader.readDate(),this.crc32=reader.readInt(4),this.compressedSize=reader.readInt(4),this.uncompressedSize=reader.readInt(4);var fileNameLength=reader.readInt(2);if(this.extraFieldsLength=reader.readInt(2),this.fileCommentLength=reader.readInt(2),this.diskNumberStart=reader.readInt(2),this.internalFileAttributes=reader.readInt(2),this.externalFileAttributes=reader.readInt(4),this.localHeaderOffset=reader.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");reader.skip(fileNameLength),this.readExtraFields(reader),this.parseZIP64ExtraField(reader),this.fileComment=reader.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var madeBy=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===madeBy&&(this.dosPermissions=63&this.externalFileAttributes),3===madeBy&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(reader){if(this.extraFields[1]){var extraReader=readerFor(this.extraFields[1].value);this.uncompressedSize===utils.MAX_VALUE_32BITS&&(this.uncompressedSize=extraReader.readInt(8)),this.compressedSize===utils.MAX_VALUE_32BITS&&(this.compressedSize=extraReader.readInt(8)),this.localHeaderOffset===utils.MAX_VALUE_32BITS&&(this.localHeaderOffset=extraReader.readInt(8)),this.diskNumberStart===utils.MAX_VALUE_32BITS&&(this.diskNumberStart=extraReader.readInt(4))}},readExtraFields:function(reader){var extraFieldId,extraFieldLength,extraFieldValue,end=reader.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});reader.index<end;)extraFieldId=reader.readInt(2),extraFieldLength=reader.readInt(2),extraFieldValue=reader.readData(extraFieldLength),this.extraFields[extraFieldId]={id:extraFieldId,length:extraFieldLength,value:extraFieldValue}},handleUTF8:function(){var decodeParamType=support.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=utf8.utf8decode(this.fileName),this.fileCommentStr=utf8.utf8decode(this.fileComment);else{var upath=this.findExtraFieldUnicodePath();if(null!==upath)this.fileNameStr=upath;else{var fileNameByteArray=utils.transformTo(decodeParamType,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(fileNameByteArray)}var ucomment=this.findExtraFieldUnicodeComment();if(null!==ucomment)this.fileCommentStr=ucomment;else{var commentByteArray=utils.transformTo(decodeParamType,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(commentByteArray)}}},findExtraFieldUnicodePath:function(){var upathField=this.extraFields[28789];if(upathField){var extraReader=readerFor(upathField.value);return 1!==extraReader.readInt(1)?null:crc32fn(this.fileName)!==extraReader.readInt(4)?null:utf8.utf8decode(extraReader.readData(upathField.length-5))}return null},findExtraFieldUnicodeComment:function(){var ucommentField=this.extraFields[25461];if(ucommentField){var extraReader=readerFor(ucommentField.value);return 1!==extraReader.readInt(1)?null:crc32fn(this.fileComment)!==extraReader.readInt(4)?null:utf8.utf8decode(extraReader.readData(ucommentField.length-5))}return null}},module.exports=ZipEntry},function(module,exports,__webpack_require__){"use strict";var StreamHelper=__webpack_require__(54),DataWorker=__webpack_require__(53),utf8=__webpack_require__(9),CompressedObject=__webpack_require__(26),GenericWorker=__webpack_require__(3),ZipObject=function(name,data,options){this.name=name,this.dir=options.dir,this.date=options.date,this.comment=options.comment,this.unixPermissions=options.unixPermissions,this.dosPermissions=options.dosPermissions,this._data=data,this._dataBinary=options.binary,this.options={compression:options.compression,compressionOptions:options.compressionOptions}};ZipObject.prototype={internalStream:function(type){var result=null,outputType="string";try{if(!type)throw new Error("No output type specified.");outputType=type.toLowerCase();var askUnicodeString="string"===outputType||"text"===outputType;"binarystring"!==outputType&&"text"!==outputType||(outputType="string"),result=this._decompressWorker();var isUnicodeString=!this._dataBinary;isUnicodeString&&!askUnicodeString&&(result=result.pipe(new utf8.Utf8EncodeWorker)),!isUnicodeString&&askUnicodeString&&(result=result.pipe(new utf8.Utf8DecodeWorker))}catch(e){result=new GenericWorker("error"),result.error(e)}return new StreamHelper(result,outputType,"")},async:function(type,onUpdate){return this.internalStream(type).accumulate(onUpdate)},nodeStream:function(type,onUpdate){return this.internalStream(type||"nodebuffer").toNodejsStream(onUpdate)},_compressWorker:function(compression,compressionOptions){if(this._data instanceof CompressedObject&&this._data.compression.magic===compression.magic)return this._data.getCompressedWorker();var result=this._decompressWorker();return this._dataBinary||(result=result.pipe(new utf8.Utf8EncodeWorker)),CompressedObject.createWorkerFrom(result,compression,compressionOptions)},_decompressWorker:function(){return this._data instanceof CompressedObject?this._data.getContentWorker():this._data instanceof GenericWorker?this._data:new DataWorker(this._data)}};for(var removedMethods=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],removedFn=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<removedMethods.length;i++)ZipObject.prototype[removedMethods[i]]=removedFn;module.exports=ZipObject},function(module,exports,__webpack_require__){__webpack_require__(142),module.exports=__webpack_require__(55).setImmediate},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(29);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var global=__webpack_require__(19),core=__webpack_require__(55),ctx=__webpack_require__(56),hide=__webpack_require__(134),$export=function $export(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype,target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype;IS_GLOBAL&&(source=name);for(key in source)(own=!IS_FORCED&&target&&void 0!==target[key])&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports,__webpack_require__){var dP=__webpack_require__(138),createDesc=__webpack_require__(139);module.exports=__webpack_require__(28)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(19).document&&document.documentElement},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(28)&&!__webpack_require__(58)(function(){return 7!=Object.defineProperty(__webpack_require__(57)("div"),"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(131),IE8_DOM_DEFINE=__webpack_require__(136),toPrimitive=__webpack_require__(141),dP=Object.defineProperty;exports.f=__webpack_require__(28)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(56),invoke=__webpack_require__(137),html=__webpack_require__(135),cel=__webpack_require__(57),global=__webpack_require__(19),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(132)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(29);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){var $export=__webpack_require__(133),$task=__webpack_require__(140);$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},function(module,exports,__webpack_require__){"use strict";function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}module.exports=PassThrough;var Transform=__webpack_require__(60),util=__webpack_require__(11);util.inherits=__webpack_require__(12),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){"use strict";function INTERNAL(){}function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,process.browser||(this.handled=UNHANDLED),resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)})}function getThen(obj){var then=obj&&obj.then;if(obj&&("object"===(void 0===obj?"undefined":_typeof(obj))||"function"==typeof obj)&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}function tryToUnwrap(){thenable(onSuccess,onError)}var called=!1,result=tryCatch(tryToUnwrap);"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}function resolve(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)}function reject(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)}function all(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)!function(value,i){function resolveFromAll(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))}self.resolve(value).then(resolveFromAll,function(error){called||(called=!0,handlers.reject(promise,error))})}(iterable[i],i);return promise}function race(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)!function(value){self.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}(iterable[i]);return promise}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},immediate=__webpack_require__(112),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];if(!process.browser)var UNHANDLED=["UNHANDLED"];module.exports=Promise,Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);if(process.browser||this.handled===UNHANDLED&&(this.handled=null),this.state!==PENDING){unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome)}else this.queue.push(new QueueItem(promise,onFulfilled,onRejected));return promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error,process.browser||self.handled===UNHANDLED&&immediate(function(){self.handled===UNHANDLED&&process.emit("unhandledRejection",error,self)});for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},Promise.resolve=resolve,Promise.reject=reject,Promise.all=all,Promise.race=race},function(module,exports,__webpack_require__){function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}var _Symbol=__webpack_require__(64),getRawTag=__webpack_require__(147),objectToString=__webpack_require__(148),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=_Symbol?_Symbol.toStringTag:void 0;module.exports=baseGetTag},function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},freeGlobal="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global;module.exports=freeGlobal},function(module,exports,__webpack_require__){function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}var _Symbol=__webpack_require__(64),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;module.exports=getRawTag},function(module,exports){function objectToString(value){return nativeObjectToString.call(value)}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;module.exports=objectToString},function(module,exports){function isObjectLike(value){return null!=value&&"object"==(void 0===value?"undefined":_typeof(value))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};module.exports=isObjectLike},function(module,exports,__webpack_require__){function isSymbol(value){return"symbol"==(void 0===value?"undefined":_typeof(value))||isObjectLike(value)&&baseGetTag(value)==symbolTag}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},baseGetTag=__webpack_require__(145),isObjectLike=__webpack_require__(149),symbolTag="[object Symbol]";module.exports=isSymbol},function(module,exports,__webpack_require__){var root=__webpack_require__(65),now=function(){return root.Date.now()};module.exports=now},function(module,exports,__webpack_require__){function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}var debounce=__webpack_require__(66),isObject=__webpack_require__(31),FUNC_ERROR_TEXT="Expected a function";module.exports=throttle},function(module,exports,__webpack_require__){function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var isObject=__webpack_require__(31),isSymbol=__webpack_require__(150),NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=toNumber},function(module,__webpack_exports__,__webpack_require__){"use strict";function proxyMouse(target,tracked){function dispatch(e){for(var i=tracked.length-1;i>=0;i--){var t=tracked[i],x=e.clientX,y=e.clientY;if(e.touches&&e.touches.length&&(x=e.touches[0].clientX,y=e.touches[0].clientY),contains(t,target,x,y)){t.dispatchEvent(clone(e));break}}}if("iframe"===target.nodeName||"IFRAME"===target.nodeName)try{this.target=target.contentDocument}catch(err){this.target=target}else this.target=target;for(var _arr=["mouseup","mousedown","click","touchstart"],_i=0;_i<_arr.length;_i++){var ev=_arr[_i];this.target.addEventListener(ev,function(e){return dispatch(e)},!1)}}function clone(e){var opts=Object.assign({},e,{bubbles:!1});try{return new MouseEvent(e.type,opts)}catch(err){var copy=document.createEvent("MouseEvents");return copy.initMouseEvent(e.type,!1,opts.cancelable,opts.view,opts.detail,opts.screenX,opts.screenY,opts.clientX,opts.clientY,opts.ctrlKey,opts.altKey,opts.shiftKey,opts.metaKey,opts.button,opts.relatedTarget),copy}}function contains(item,target,x,y){function rectContains(r,x,y){var top=r.top-offset.top,left=r.left-offset.left,bottom=top+r.height,right=left+r.width;return top<=y&&left<=x&&bottom>y&&right>x}var offset=target.getBoundingClientRect();if(!rectContains(item.getBoundingClientRect(),x,y))return!1;for(var rects=item.getClientRects(),i=0,len=rects.length;i<len;i++)if(rectContains(rects[i],x,y))return!0;return!1}__webpack_exports__.a={proxyMouse:proxyMouse}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function coords(el,container){var offset=container.getBoundingClientRect(),rect=el.getBoundingClientRect();return{top:rect.top-offset.top,left:rect.left-offset.left,height:el.scrollHeight,width:el.scrollWidth}}function setCoords(el,coords){el.style.top=coords.top+"px",el.style.left=coords.left+"px",el.style.height=coords.height+"px",el.style.width=coords.width+"px"}function contains(rect1,rect2){return rect2.right<=rect1.right&&rect2.left>=rect1.left&&rect2.top>=rect1.top&&rect2.bottom<=rect1.bottom}__webpack_require__.d(__webpack_exports__,"a",function(){return Pane}),__webpack_require__.d(__webpack_exports__,"b",function(){return Highlight}),__webpack_require__.d(__webpack_exports__,"c",function(){return Underline});var __WEBPACK_IMPORTED_MODULE_0__svg__=__webpack_require__(156),__WEBPACK_IMPORTED_MODULE_1__events__=__webpack_require__(154),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Pane=function(){function Pane(target){var container=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;_classCallCheck(this,Pane),this.target=target,this.element=__WEBPACK_IMPORTED_MODULE_0__svg__.a.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),__WEBPACK_IMPORTED_MODULE_1__events__.a.proxyMouse(this.target,this.marks),this.container=container,this.container.appendChild(this.element),this.render()}return _createClass(Pane,[{key:"addMark",value:function(mark){var g=__WEBPACK_IMPORTED_MODULE_0__svg__.a.createElement("g");return this.element.appendChild(g),mark.bind(g,this.container),this.marks.push(mark),mark.render(),mark}},{key:"removeMark",value:function(mark){var idx=this.marks.indexOf(mark);if(-1!==idx){var el=mark.unbind();this.element.removeChild(el),this.marks.splice(idx,1)}}},{key:"render",value:function(){setCoords(this.element,coords(this.target,this.container));var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.marks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.render()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),Pane}(),Mark=function(){function Mark(){_classCallCheck(this,Mark),this.element=null}return _createClass(Mark,[{key:"bind",value:function(element,container){this.element=element,this.container=container}},{key:"unbind",value:function(){var el=this.element;return this.element=null,el}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(e){this.element&&this.element.dispatchEvent(e)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var rects=[],el=this.element.firstChild;el;)rects.push(el.getBoundingClientRect()),el=el.nextSibling;return rects}},{key:"filteredRanges",value:function(){var rects=Array.from(this.range.getClientRects());return rects.filter(function(box){for(var i=0;i<rects.length;i++){if(rects[i]===box)return!0;if(contains(rects[i],box))return!1}return!0})}}]),Mark}(),Highlight=function(_Mark){function Highlight(range,className,data,attributes){_classCallCheck(this,Highlight);var _this=_possibleConstructorReturn(this,(Highlight.__proto__||Object.getPrototypeOf(Highlight)).call(this));return _this.range=range,_this.className=className,_this.data=data||{},_this.attributes=attributes||{},_this}return _inherits(Highlight,_Mark),_createClass(Highlight,[{key:"bind",value:function(element,container){_get(Highlight.prototype.__proto__||Object.getPrototypeOf(Highlight.prototype),"bind",this).call(this,element,container);for(var attr in this.data)this.data.hasOwnProperty(attr)&&(this.element.dataset[attr]=this.data[attr]);for(var attr in this.attributes)this.attributes.hasOwnProperty(attr)&&this.element.setAttribute(attr,this.attributes[attr]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var docFrag=this.element.ownerDocument.createDocumentFragment(),filtered=this.filteredRanges(),offset=this.element.getBoundingClientRect(),container=this.container.getBoundingClientRect(),i=0,len=filtered.length;i<len;i++){var r=filtered[i],el=__WEBPACK_IMPORTED_MODULE_0__svg__.a.createElement("rect");el.setAttribute("x",r.left-offset.left+container.left),el.setAttribute("y",r.top-offset.top+container.top),el.setAttribute("height",r.height),el.setAttribute("width",r.width),docFrag.appendChild(el)}this.element.appendChild(docFrag)}}]),Highlight}(Mark),Underline=function(_Highlight){function Underline(range,className,data,attributes){return _classCallCheck(this,Underline),_possibleConstructorReturn(this,(Underline.__proto__||Object.getPrototypeOf(Underline)).call(this,range,className,data,attributes))}return _inherits(Underline,_Highlight),_createClass(Underline,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var docFrag=this.element.ownerDocument.createDocumentFragment(),filtered=this.filteredRanges(),offset=this.element.getBoundingClientRect(),container=this.container.getBoundingClientRect(),i=0,len=filtered.length;i<len;i++){var r=filtered[i],rect=__WEBPACK_IMPORTED_MODULE_0__svg__.a.createElement("rect");rect.setAttribute("x",r.left-offset.left),rect.setAttribute("y",r.top-offset.top),rect.setAttribute("height",r.height),rect.setAttribute("width",r.width),rect.setAttribute("fill","none");var line=__WEBPACK_IMPORTED_MODULE_0__svg__.a.createElement("line");line.setAttribute("x1",r.left-offset.left+container.left),line.setAttribute("x2",r.left-offset.left+container.left+r.width),line.setAttribute("y1",r.top-offset.top+container.top+r.height-1),line.setAttribute("y2",r.top-offset.top+container.top+r.height-1),line.setAttribute("stroke-width",1),line.setAttribute("stroke","black"),line.setAttribute("stroke-linecap","square"),docFrag.appendChild(rect),docFrag.appendChild(line)}this.element.appendChild(docFrag)}}]),Underline}(Highlight)},function(module,__webpack_exports__,__webpack_require__){"use strict";function createElement(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}__webpack_exports__.a={createElement:createElement}},function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(7).assign,deflate=__webpack_require__(158),inflate=__webpack_require__(159),constants=__webpack_require__(69),pako={};assign(pako,deflate,inflate,constants),module.exports=pako},function(module,exports,__webpack_require__){"use strict";function Deflate(options){if(!(this instanceof Deflate))return new Deflate(options);this.options=utils.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK)throw new Error(msg[status]);if(opt.header&&zlib_deflate.deflateSetHeader(this.strm,opt.header),opt.dictionary){var dict;if(dict="string"==typeof opt.dictionary?strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)?new Uint8Array(opt.dictionary):opt.dictionary,(status=zlib_deflate.deflateSetDictionary(this.strm,dict))!==Z_OK)throw new Error(msg[status]);this._dict_set=!0}}function deflate(input,options){var deflator=new Deflate(options);if(deflator.push(input,!0),deflator.err)throw deflator.msg||msg[deflator.err];return deflator.result}function deflateRaw(input,options){return options=options||{},options.raw=!0,deflate(input,options)}function gzip(input,options){return options=options||{},options.gzip=!0,deflate(input,options)}var zlib_deflate=__webpack_require__(160),utils=__webpack_require__(7),strings=__webpack_require__(67),msg=__webpack_require__(32),ZStream=__webpack_require__(71),toString=Object.prototype.toString,Z_OK=0,Z_DEFAULT_COMPRESSION=-1,Z_DEFAULT_STRATEGY=0,Z_DEFLATED=8;Deflate.prototype.push=function(data,mode){var status,_mode,strm=this.strm,chunkSize=this.options.chunkSize;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?4:0,"string"==typeof data?strm.input=strings.string2buf(data):"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),1!==(status=zlib_deflate.deflate(strm,_mode))&&status!==Z_OK)return this.onEnd(status),this.ended=!0,!1;0!==strm.avail_out&&(0!==strm.avail_in||4!==_mode&&2!==_mode)||("string"===this.options.to?this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output,strm.next_out))):this.onData(utils.shrinkBuf(strm.output,strm.next_out)))}while((strm.avail_in>0||0===strm.avail_out)&&1!==status);return 4===_mode?(status=zlib_deflate.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===Z_OK):2!==_mode||(this.onEnd(Z_OK),strm.avail_out=0,!0)},Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate.prototype.onEnd=function(status){status===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Deflate=Deflate,exports.deflate=deflate,exports.deflateRaw=deflateRaw,exports.gzip=gzip},function(module,exports,__webpack_require__){"use strict";function Inflate(options){if(!(this instanceof Inflate))return new Inflate(options);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&0==(15&opt.windowBits)&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK)throw new Error(msg[status]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(input,options){var inflator=new Inflate(options);if(inflator.push(input,!0),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}function inflateRaw(input,options){return options=options||{},options.raw=!0,inflate(input,options)}var zlib_inflate=__webpack_require__(163),utils=__webpack_require__(7),strings=__webpack_require__(67),c=__webpack_require__(69),msg=__webpack_require__(32),ZStream=__webpack_require__(71),GZheader=__webpack_require__(161),toString=Object.prototype.toString;Inflate.prototype.push=function(data,mode){var status,_mode,next_out_utf8,tail,utf8str,dict,strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,allowBufError=!1;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof data?strm.input=strings.binstring2buf(data):"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH),status===c.Z_NEED_DICT&&dictionary&&(dict="string"==typeof dictionary?strings.string2buf(dictionary):"[object ArrayBuffer]"===toString.call(dictionary)?new Uint8Array(dictionary):dictionary,status=zlib_inflate.inflateSetDictionary(this.strm,dict)),status===c.Z_BUF_ERROR&&!0===allowBufError&&(status=c.Z_OK,allowBufError=!1),status!==c.Z_STREAM_END&&status!==c.Z_OK)return this.onEnd(status),this.ended=!0,!1;strm.next_out&&(0!==strm.avail_out&&status!==c.Z_STREAM_END&&(0!==strm.avail_in||_mode!==c.Z_FINISH&&_mode!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8),strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0),this.onData(utf8str)):this.onData(utils.shrinkBuf(strm.output,strm.next_out)))),0===strm.avail_in&&0===strm.avail_out&&(allowBufError=!0)}while((strm.avail_in>0||0===strm.avail_out)&&status!==c.Z_STREAM_END);return status===c.Z_STREAM_END&&(_mode=c.Z_FINISH),_mode===c.Z_FINISH?(status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===c.Z_OK):_mode!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),strm.avail_out=0,!0)},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate},function(module,exports,__webpack_require__){"use strict";function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b}function read_buf(strm,buf,start,size){var len=strm.avail_in;return len>size&&(len=size),0===len?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),1===strm.state.wrap?strm.adler=adler32(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)}function longest_match(s,cur_match){var match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+MAX_MATCH,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=MAX_MATCH-(strend-scan),scan=strend-MAX_MATCH,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var p,n,m,more,str,_w_size=s.w_size;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,n=s.hash_size,p=n;do{m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0}while(--n);n=_w_size,p=n;do{m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(0===s.strm.avail_in)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=MIN_MATCH)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&0!==s.strm.avail_in)}function deflate_stored(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),0===s.lookahead&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((0===s.strstart||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE;if(s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(s.strstart>s.block_start&&(flush_block_only(s,!1),s.strm.avail_out),BS_NEED_MORE)}function deflate_fast(s,flush){for(var hash_head,bflush;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head)),s.match_length>=MIN_MATCH)if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(s,flush){for(var hash_head,bflush,max_insert;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}else if(s.match_available){if(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return BS_NEED_MORE}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(s,flush){for(var bflush,prev,scan,strend,_win=s.window;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(scan=s.strstart-1,(prev=_win[scan])===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+MAX_MATCH;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(s,flush){for(var bflush;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(flush===Z_NO_FLUSH)return BS_NEED_MORE;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}function lm_init(s){s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return strm&&strm.state?(strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN,s=strm.state,s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,strm.adler=2===s.wrap?0:1,s.last_flush=Z_NO_FLUSH,trees._tr_init(s),Z_OK):err(strm,Z_STREAM_ERROR)}function deflateReset(strm){var ret=deflateResetKeep(strm);return ret===Z_OK&&lm_init(strm.state),ret}function deflateSetHeader(strm,head){return strm&&strm.state?2!==strm.state.wrap?Z_STREAM_ERROR:(strm.state.gzhead=head,Z_OK):Z_STREAM_ERROR}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return Z_STREAM_ERROR;var wrap=1;if(level===Z_DEFAULT_COMPRESSION&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED)return err(strm,Z_STREAM_ERROR);8===windowBits&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new utils.Buf8(2*s.w_size),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(strm,flush){var old_flush,s,beg,val;if(!strm||!strm.state||flush>Z_BLOCK||flush<0)return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;if(s=strm.state,!strm.output||!strm.input&&0!==strm.avail_in||s.status===FINISH_STATE&&flush!==Z_FINISH)return err(strm,0===strm.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,s.status===INIT_STATE)if(2===s.wrap)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=EXTRA_STATE):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,OS_CODE),s.status=BUSY_STATE);else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8,level_flags=-1;level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:6===s.level?2:3,header|=level_flags<<6,0!==s.strstart&&(header|=PRESET_DICT),header+=31-header%31,s.status=BUSY_STATE,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1}if(s.status===EXTRA_STATE)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending!==s.pending_buf_size));)put_byte(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=NAME_STATE)}else s.status=NAME_STATE;if(s.status===NAME_STATE)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.gzindex=0,s.status=COMMENT_STATE)}else s.status=COMMENT_STATE;if(s.status===COMMENT_STATE)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.status=HCRC_STATE)}else s.status=HCRC_STATE;if(s.status===HCRC_STATE&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=BUSY_STATE)):s.status=BUSY_STATE),0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,Z_OK}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH)return err(strm,Z_BUF_ERROR);if(s.status===FINISH_STATE&&0!==strm.avail_in)return err(strm,Z_BUF_ERROR);if(0!==strm.avail_in||0!==s.lookahead||flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE){var bstate=s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if(bstate!==BS_FINISH_STARTED&&bstate!==BS_FINISH_DONE||(s.status=FINISH_STATE),bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED)return 0===strm.avail_out&&(s.last_flush=-1),Z_OK;if(bstate===BS_BLOCK_DONE&&(flush===Z_PARTIAL_FLUSH?trees._tr_align(s):flush!==Z_BLOCK&&(trees._tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,Z_OK}return flush!==Z_FINISH?Z_OK:s.wrap<=0?Z_STREAM_END:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?Z_OK:Z_STREAM_END)}function deflateEnd(strm){var status;return strm&&strm.state?(status=strm.state.status)!==INIT_STATE&&status!==EXTRA_STATE&&status!==NAME_STATE&&status!==COMMENT_STATE&&status!==HCRC_STATE&&status!==BUSY_STATE&&status!==FINISH_STATE?err(strm,Z_STREAM_ERROR):(strm.state=null,status===BUSY_STATE?err(strm,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}function deflateSetDictionary(strm,dictionary){var s,str,n,wrap,avail,next,input,tmpDict,dictLength=dictionary.length;if(!strm||!strm.state)return Z_STREAM_ERROR;if(s=strm.state,2===(wrap=s.wrap)||1===wrap&&s.status!==INIT_STATE||s.lookahead)return Z_STREAM_ERROR;for(1===wrap&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size&&(0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0),tmpDict=new utils.Buf8(s.w_size),utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0),dictionary=tmpDict,dictLength=s.w_size),avail=strm.avail_in,next=strm.next_in,input=strm.input,strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=MIN_MATCH;){str=s.strstart,n=s.lookahead-(MIN_MATCH-1);do{s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK}var configuration_table,utils=__webpack_require__(7),trees=__webpack_require__(165),adler32=__webpack_require__(68),crc32=__webpack_require__(70),msg=__webpack_require__(32),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,L_CODES=286,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateSetDictionary=deflateSetDictionary,exports.deflateInfo="pako deflate (from Nodeca project)"},function(module,exports,__webpack_require__){"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader},function(module,exports,__webpack_require__){"use strict";module.exports=function(strm,start){var state,_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;state=strm.state,_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,0===(op=here>>>16&255))output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=12;break top}strm.msg="invalid literal/length code",state.mode=30;break top}len=65535&here,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,!(16&(op=here>>>16&255))){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=30;break top}if(dist=65535&here,op&=15,bits<op&&(hold+=input[_in++]<<bits,(bits+=8)<op&&(hold+=input[_in++]<<bits,bits+=8)),(dist+=hold&(1<<op)-1)>dmax){strm.msg="invalid distance too far back",state.mode=30;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if((op=dist-op)>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,(op-=wnext)<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){op=wnext,len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},function(module,exports,__webpack_require__){"use strict";function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return strm&&strm.state?(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(strm){var state;return strm&&strm.state?(state=strm.state,state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)):Z_STREAM_ERROR}function inflateReset2(strm,windowBits){var wrap,state;return strm&&strm.state?(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=1+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))):Z_STREAM_ERROR}function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,ret=inflateReset2(strm,windowBits),ret!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist,state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),copy-=dist,copy?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}function inflate(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,opts,n,here=0,hbuf=new utils.Buf8(4),order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR;state=strm.state,state.mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(0===state.wrap){state.mode=TYPEDO;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.flags=0,state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=BAD;break}if((15&hold)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(hold>>>=4,bits-=4,len=8+(15&hold),0===state.wbits)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=BAD;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=512&hold?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(255&state.flags)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(1024&state.flags&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=CHECK;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,hold>>>=1,bits-=1,3&hold){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type",state.mode=BAD}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=BAD;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(7&hold),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(127&hold),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=LIT;break}if(32&here_op){state.back=-1,state.mode=TYPE;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=BAD;break}state.extra=15&here_op,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=BAD;break}state.offset=here_val,state.extra=15&here_op,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=BAD;break}state.mode=MATCH;case MATCH:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if((copy=state.offset-copy)>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=LEN);break;case LIT:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=MEM,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(0===_in&&0===_out||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)}function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK}function inflateGetHeader(strm,head){var state;return strm&&strm.state?(state=strm.state,0==(2&state.wrap)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(strm,dictionary){var state,dictid,dictLength=dictionary.length;return strm&&strm.state?(state=strm.state,0!==state.wrap&&state.mode!==DICT?Z_STREAM_ERROR:state.mode===DICT&&(dictid=1,(dictid=adler32(dictid,dictionary,dictLength,0))!==state.check)?Z_DATA_ERROR:updatewindow(strm,dictionary,dictLength,dictLength)?(state.mode=MEM,Z_MEM_ERROR):(state.havedict=1,Z_OK)):Z_STREAM_ERROR}var lenfix,distfix,utils=__webpack_require__(7),adler32=__webpack_require__(68),crc32=__webpack_require__(70),inflate_fast=__webpack_require__(162),inflate_table=__webpack_require__(164),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,DEF_WBITS=15,virgin=!0;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)"},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(7),lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(type,lens,lens_index,codes,table,table_index,work,opts){var incr,fill,low,mask,next,end,here_bits,here_op,here_val,bits=opts.bits,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null,base_index=0,count=new utils.Buf16(16),offs=new utils.Buf16(16),extra=null,extra_index=0;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,(left-=count[len])<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,end=19):1===type?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do{fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&!((left-=count[curr+drop])<=0);)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},function(module,exports,__webpack_require__){"use strict";function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>Buf_size-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>Buf_size-s.bi_valid,s.bi_valid+=length-Buf_size):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[2*c],tree[2*c+1])}function bi_reverse(code,len){var res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1}function bi_flush(s){16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)}function gen_bitlen(s,desc){var h,n,m,bits,xbits,f,tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<HEAP_SIZE;h++)n=s.heap[h],bits=tree[2*tree[2*n+1]+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[2*n],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)(m=s.heap[--h])>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}}function gen_codes(tree,max_code,bl_count){var bits,n,next_code=new Array(MAX_BITS+1),code=0;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}}function tr_static_init(){var n,bits,length,code,dist,bl_count=new Array(MAX_BITS+1);for(length=0,code=0;code<LENGTH_CODES-1;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<D_CODES;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=MAX_BITS;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,L_CODES+1,bl_count),n=0;n<D_CODES;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(s){var n;for(n=0;n<L_CODES;n++)s.dyn_ltree[2*n]=0;for(n=0;n<D_CODES;n++)s.dyn_dtree[2*n]=0;for(n=0;n<BL_CODES;n++)s.bl_tree[2*n]=0;s.dyn_ltree[2*END_BLOCK]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function copy_block(s,buf,len,header){bi_windup(s),header&&(put_short(s,len),put_short(s,~len)),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}function smaller(tree,n,m,depth){var _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){for(var v=s.heap[k],j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist,lc,code,extra,lx=0;if(0!==s.last_lit)do{dist=s.pending_buf[s.d_buf+2*lx]<<8|s.pending_buf[s.d_buf+2*lx+1],lc=s.pending_buf[s.l_buf+lx],lx++,0===dist?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+LITERALS+1,ltree),extra=extra_lbits[code],0!==extra&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),0!==(extra=extra_dbits[code])&&(dist-=base_dist[code],send_bits(s,dist,extra)))}while(lx<s.last_lit);send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var n,m,node,tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,max_code=-1;for(s.heap_len=0,s.heap_max=HEAP_SIZE,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[2*node]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[2*REP_3_6]++):count<=10?s.bl_tree[2*REPZ_3_10]++:s.bl_tree[2*REPZ_11_138]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function send_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}function build_bl_tree(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=BL_CODES-1;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}function send_all_trees(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}function detect_data_type(s){var n,black_mask=4093624447;for(n=0;n<=31;n++,black_mask>>>=1)if(1&black_mask&&0!==s.dyn_ltree[2*n])return Z_BINARY;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return Z_TEXT;for(n=32;n<LITERALS;n++)if(0!==s.dyn_ltree[2*n])return Z_TEXT;return Z_BINARY}function _tr_init(s){static_init_done||(tr_static_init(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)}function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3),copy_block(s,buf,stored_len,!0)}function _tr_align(s){send_bits(s,STATIC_TREES<<1,3),send_code(s,END_BLOCK,static_ltree),bi_flush(s)}function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb,max_blindex=0;s.level>0?(s.strm.data_type===Z_UNKNOWN&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=build_bl_tree(s),opt_lenb=s.opt_len+3+7>>>3,(static_lenb=s.static_len+3+7>>>3)<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block(s,buf,stored_len,last):s.strategy===Z_FIXED||static_lenb===opt_lenb?(send_bits(s,(STATIC_TREES<<1)+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,(DYN_TREES<<1)+(last?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)}function _tr_tally(s,dist,lc){return s.pending_buf[s.d_buf+2*s.last_lit]=dist>>>8&255,s.pending_buf[s.d_buf+2*s.last_lit+1]=255&dist,s.pending_buf[s.l_buf+s.last_lit]=255&lc,s.last_lit++,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+LITERALS+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.last_lit===s.lit_bufsize-1}var utils=__webpack_require__(7),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(512);zero(_dist_code);var _length_code=new Array(256);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var static_l_desc,static_d_desc,static_bl_desc,static_init_done=!1;exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"})}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(36).deprecate},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_epubjs__=__webpack_require__(84);global.ePub=__WEBPACK_IMPORTED_MODULE_0_epubjs__.a,__webpack_exports__.default={name:"BookReader",props:{epubUrl:{type:String,required:!0},fontSize:{type:Number,default:100},themes:{type:Object,required:!0},theme:{type:String,required:!0},progress:{type:Number,required:!0},bookArea:{type:String,default:"area"},contentBookModify:{type:Number,default:0}},data:function(){return{book:null,rendition:null,section:null,toc:[],progressValue:0,slide:null,cfi:null,width:0,height:0,locations:null,ready:!1}},watch:{theme:function(val){this.setTheme(val)},fontSize:function(val){this.setFontSize(val)},progressValue:function(val){this.$emit("update:progress",val)}},methods:{initReader:function(){this.rendition=this.book.renderTo(this.bookArea,{contained:!0,height:this.height}),this.registerThemes(),this.setTheme(this.theme),this.setFontSize(this.fontSize),this.rendition.display()},registerThemes:function(){this.rendition.themes.register(this.themes)},goToPrevPage:function(){this.rendition.prev()},goToNextPage:function(){this.rendition.next()},setTheme:function(theme){this.rendition.themes.select(theme),document.body.style.background=this.themes[theme].body.background},setFontSize:function(size){this.rendition.themes.fontSize(size+"%")},goToExcerpt:function(cfi){cfi.toLowerCase().indexOf("xhtml")>0?this.rendition.display(cfi):(this.rendition.display("epubcfi("+cfi+")"),this.rendition.annotations.highlight("epubcfi("+cfi+")"))},onChange:function(value){var percentage=value/100,target=percentage>0?this.book.locations.cfiFromPercentage(percentage):0;this.rendition.display(target),1===percentage&&this.goToNextPage()},updateScreenSizeInfo:function(){this.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),this.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-this.contentBookModify},resizeToScreenSize:function(){this.updateScreenSizeInfo(),this.rendition.resize(this.width,this.height)},debounce:function(func,wait,immediate){var _this=this,_arguments=arguments,timeout=void 0;return function(){var context=_this,args=_arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},keyListener:function(e){37===(e.keyCode||e.which)&&this.rendition.prev(),39===(e.keyCode||e.which)&&this.rendition.next()}},mounted:function(){var _this2=this;this.book=new __WEBPACK_IMPORTED_MODULE_0_epubjs__.a(this.epubUrl,{}),this.book.loaded.navigation.then(function(_ref){var toc=_ref.toc;_this2.toc=toc,_this2.$emit("toc",_this2.toc),_this2.initReader(),_this2.rendition.on("click",function(){_this2.$emit("click")})}),this.book.ready.then(function(){return _this2.book.locations.generate()}).then(function(){_this2.locations=JSON.parse(_this2.book.locations.save()),_this2.ready=!0,_this2.rendition.on("relocated",function(location){var percent=_this2.book.locations.percentageFromCfi(location.start.cfi),percentage=Math.floor(100*percent);_this2.progressValue=percentage,_this2.$emit("relocated")})}),this.$root.$on("showPage",function(cfi){_this2.cfi=cfi,_this2.goToExcerpt(cfi)}),this.$root.$on("clearHighlight",function(){_this2.rendition.annotations.remove("epubcfi("+_this2.cfi+")")}),this.$nextTick(function(){window.addEventListener("resize",_this2.debounce(function(){_this2.resizeToScreenSize()},250))}),this.updateScreenSizeInfo()},created:function(){window.addEventListener("keyup",this.keyListener)},beforeDestroy:function(){window.removeEventListener("keyup",this.keyListener)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__tree_menu___=__webpack_require__(37);__webpack_exports__.default={name:"PreferencesDropdown",components:{TreeMenu:__WEBPACK_IMPORTED_MODULE_0__tree_menu___.a},props:{themes:{type:Object,required:!0},currentTheme:{type:String,required:!0},fontSize:{type:Number},value:{type:String,required:!0}},data:function(){return{opened:!1,openSearchWidget:!1,openContentWidget:!1,internalFontSize:this.fontSize,searchText:"",matches:[],searchResults:[],toc:null}},watch:{internalFontSize:function(val,oldVal){if(val<50||val>200)return void(this.internalFontSize=oldVal);this.$emit("update:fontSize",this.internalFontSize)}},methods:{toggleDropdown:function(){this.opened=!this.opened},selectTheme:function(key){this.$emit("update:currentTheme",key)},fontSizeIncrease:function(){this.internalFontSize+=10},fontSizeDecrease:function(){this.internalFontSize-=10},toggleSearchWidget:function(){this.openSearchWidget=!this.openSearchWidget},showContent:function(){this.openContentWidget=!this.openContentWidget,this.$root.$emit("showContent")},findText:function(value){var _this=this;this.$emit("input",value),fetch("http://localhost:8085/search?q="+value+"&uuid=01bf2ad2-b8f5-43cf-9089-1a1d0299bf83").then(function(res){return res.json()}).then(function(matches){_this.matches=matches,_this.matches.map(function(item){return item.cfis}).map(function(item){return item}).map(function(e){var _searchResults;(_searchResults=_this.searchResults).push.apply(_searchResults,_toConsumableArray(e))}),_this.$emit("searchResults",_this.searchResults)})},showPage:function(cfi){this.$root.$emit("showPage",cfi)},removeHighlight:function(){this.$root.$emit("clearHighlight")}},mounted:function(){var _this2=this;this.$root.$on("toc",function(toc){_this2.toc=toc})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={name:"TreeMenu",props:{subContent:Array},methods:{showPage:function(cfi){this.$root.$emit("showPage",cfi)}}}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports){function XMLReader(){}function _parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(1023&code);return String.fromCharCode(surrogate1,surrogate2)}return String.fromCharCode(code)}function entityReplacer(a){var k=a.slice(1,-1);return k in entityMap?entityMap[k]:"#"===k.charAt(0)?fixedFromCharCode(parseInt(k.substr(1).replace("x","0x"))):(errorHandler.error("entity not found:"+a),a)}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start),domBuilder.characters(xt,0,end-start),start=end}}function position(p,m){for(;p>=lineEnd&&(m=linePattern.exec(source));)lineStart=m.index,lineEnd=lineStart+m[0].length,locator.lineNumber++;locator.columnNumber=p-lineStart+1}for(var lineStart=0,lineEnd=0,linePattern=/.*(?:\r\n?|\n)|.*$/g,locator=domBuilder.locator,parseStack=[{currentNSMap:defaultNSMapCopy}],closeMap={},start=0;;){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc,text=doc.createTextNode(source.substr(start));doc.appendChild(text),domBuilder.currentElement=text}return}switch(tagStart>start&&appendText(tagStart),source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3),tagName=source.substring(tagStart+2,end),config=parseStack.pop();end<0?(tagName=source.substring(tagStart+2).replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName),end=tagStart+1+tagName.length):tagName.match(/\s</)&&(tagName=tagName.replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" maybe not complete"),end=tagStart+1+tagName.length);var localNSMap=config.localNSMap,endMatch=config.tagName==tagName;if(endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase()){if(domBuilder.endElement(config.uri,config.localName,tagName),localNSMap)for(var prefix in localNSMap)domBuilder.endPrefixMapping(prefix);endMatch||errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}else parseStack.push(config);end++;break;case"?":locator&&position(tagStart),end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart),end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes,currentNSMap=parseStack[parseStack.length-1].currentNSMap,end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler),len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)&&(el.closed=!0,entityMap.nbsp||errorHandler.warning("unclosed xml attribute")),locator&&len){for(var locator2=copyLocator(locator,{}),i=0;i<len;i++){var a=el[i];position(a.offset),a.locator=copyLocator(locator,{})}domBuilder.locator=locator2,appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el),domBuilder.locator=locator}else appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el);"http://www.w3.org/1999/xhtml"!==el.uri||el.closed?end++:end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)}}catch(e){errorHandler.error("element parse error: "+e),end=-1}end>start?start=end:appendText(Math.max(tagStart,start)+1)}}function copyLocator(f,t){return t.lineNumber=f.lineNumber,t.columnNumber=f.columnNumber,t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){for(var attrName,value,p=++start,s=S_TAG;;){var c=source.charAt(p);switch(c){case"=":if(s===S_ATTR)attrName=source.slice(start,p),s=S_EQ;else{if(s!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");s=S_EQ}break;case"'":case'"':if(s===S_EQ||s===S_ATTR){if(s===S_ATTR&&(errorHandler.warning('attribute value must after "="'),attrName=source.slice(start,p)),start=p+1,!((p=source.indexOf(c,start))>0))throw new Error("attribute value no end '"+c+"' match");value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),el.add(attrName,value,start-1),s=S_ATTR_END}else{if(s!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer),el.add(attrName,value,start),errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!"),start=p+1,s=S_ATTR_END}break;case"/":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s=S_TAG_CLOSE,el.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return errorHandler.error("unexpected end of input"),s==S_TAG&&el.setTagName(source.slice(start,p)),p;case">":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start,p),"/"===value.slice(-1)&&(el.closed=!0,value=value.slice(0,-1));case S_ATTR_SPACE:s===S_ATTR_SPACE&&(value=attrName),s==S_ATTR_NOQUOT_VALUE?(errorHandler.warning('attribute "'+value+'" missed quot(")!!'),el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)):("http://www.w3.org/1999/xhtml"===currentNSMap[""]&&value.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!'),el.add(value,value,start));break;case S_EQ:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" ")switch(s){case S_TAG:el.setTagName(source.slice(start,p)),s=S_TAG_SPACE;break;case S_ATTR:attrName=source.slice(start,p),s=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!'),el.add(attrName,value,start);case S_ATTR_END:s=S_TAG_SPACE}else switch(s){case S_ATTR_SPACE:el.tagName;"http://www.w3.org/1999/xhtml"===currentNSMap[""]&&attrName.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!'),el.add(attrName,attrName,start),start=p,s=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s=S_ATTR,start=p;break;case S_EQ:s=S_ATTR_NOQUOT_VALUE,start=p;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function appendElement(el,domBuilder,currentNSMap){for(var tagName=el.tagName,localNSMap=null,i=el.length;i--;){var a=el[i],qName=a.qName,value=a.value,nsp=qName.indexOf(":");if(nsp>0)var prefix=a.prefix=qName.slice(0,nsp),localName=qName.slice(nsp+1),nsPrefix="xmlns"===prefix&&localName;else localName=qName,prefix=null,nsPrefix="xmlns"===qName&&"";a.localName=localName,!1!==nsPrefix&&(null==localNSMap&&(localNSMap={},_copy(currentNSMap,currentNSMap={})),currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value,a.uri="http://www.w3.org/2000/xmlns/",domBuilder.startPrefixMapping(nsPrefix,value))}for(var i=el.length;i--;){a=el[i];var prefix=a.prefix;prefix&&("xml"===prefix&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==prefix&&(a.uri=currentNSMap[prefix||""]))}var nsp=tagName.indexOf(":");nsp>0?(prefix=el.prefix=tagName.slice(0,nsp),localName=el.localName=tagName.slice(nsp+1)):(prefix=null,localName=el.localName=tagName);var ns=el.uri=currentNSMap[prefix||""];if(domBuilder.startElement(ns,localName,tagName,el),!el.closed)return el.currentNSMap=currentNSMap,el.localNSMap=localNSMap,!0;if(domBuilder.endElement(ns,localName,tagName),localNSMap)for(prefix in localNSMap)domBuilder.endPrefixMapping(prefix)}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd),text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text))return/^script$/i.test(tagName)?(domBuilder.characters(text,0,text.length),elEndStart):(text=text.replace(/&#?\w+;/g,entityReplacer),domBuilder.characters(text,0,text.length),elEndStart)}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];return null==pos&&(pos=source.lastIndexOf("</"+tagName+">"),pos<elStartEnd&&(pos=source.lastIndexOf("</"+tagName)),closeMap[tagName]=pos),pos<elStartEnd}function _copy(source,target){for(var n in source)target[n]=source[n]}function parseDCC(source,start,domBuilder,errorHandler){switch(source.charAt(start+2)){case"-":if("-"===source.charAt(start+3)){var end=source.indexOf("--\x3e",start+4);return end>start?(domBuilder.comment(source,start+4,end-start-4),end+3):(errorHandler.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==source.substr(start+3,6)){var end=source.indexOf("]]>",start+9);return domBuilder.startCDATA(),domBuilder.characters(source,start+9,end-start-9),domBuilder.endCDATA(),end+3}var matchs=split(source,start),len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0],pubid=len>3&&/^public$/i.test(matchs[2][0])&&matchs[3][0],sysid=len>4&&matchs[4][0],lastMatch=matchs[len-1];return domBuilder.startDTD(name,pubid&&pubid.replace(/^(['"])(.*?)\1$/,"$2"),sysid&&sysid.replace(/^(['"])(.*?)\1$/,"$2")),domBuilder.endDTD(),lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){match[0].length;return domBuilder.processingInstruction(match[1],match[2]),end+2}return-1}return-1}function ElementAttributes(source){}function _set_proto_(thiz,parent){return thiz.__proto__=parent,thiz}function split(source,start){var match,buf=[],reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(reg.lastIndex=start,reg.exec(source);match=reg.exec(source);)if(buf.push(match),match[1])return buf}var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument(),_copy(defaultNSMap,defaultNSMap={}),_parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler),domBuilder.endDocument()}},ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName))throw new Error("invalid tagName:"+tagName);this.tagName=tagName},add:function(qName,value,offset){if(!tagNamePattern.test(qName))throw new Error("invalid attribute:"+qName);this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(thiz,parent){function p(){}p.prototype=parent,p=new p;for(parent in thiz)p[parent]=thiz[parent];return p}),exports.XMLReader=XMLReader},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(77)(),exports.push([module.i,"body {\n  position: relative; }\n\n.buton {\n  background-color: #4a4a4a;\n  border: none;\n  color: white;\n  padding: 13px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 22px;\n  margin: 26px -115px;\n  border-radius: 50%;\n  font-family: 'Montserrat', sans-serif; }\n\n.epub-container:hover > .hover {\n  visibility: visible; }\n\n.hover {\n  background-color: #f8f8f8;\n  font-family: 'Montserrat', sans-serif;\n  width: 129px;\n  margin-left: 93px;\n  padding-top: 5px;\n  text-align: center;\n  margin-top: -13px; }\n\n.text {\n  color: #8e8989;\n  font-size: 7pt; }\n\n.text-size {\n  border-radius: 115px;\n  color: #6b6b6b; }\n\n#little-letter {\n  font-size: 11pt;\n  padding: 8px 15px 4px; }\n\n#big-letter {\n  font-size: 15pt;\n  padding: 3px 14px; }\n\n#gray-line {\n  padding-bottom: 18px;\n  border-bottom-width: 2px;\n  border-bottom-style: solid;\n  border-bottom-color: #efefef; }\n\n.button-background {\n  border-radius: 119px;\n  font-family: 'Montserrat', sans-serif;\n  color: #6b6b6b;\n  margin-bottom: 9px;\n  font-size: 7pt;\n  width: 100px;\n  padding: 6px; }\n\n.button-background.current {\n  border: 2px dashed red; }\n\n#beige {\n  background-color: #f3e8d2; }\n\n#night {\n  background-color: #4a4a4a;\n  color: #f3f2f2; }\n\n.arrow {\n  position: absolute;\n  top: 50%;\n  margin-top: -32px;\n  font-size: 64px;\n  color: #E2E2E2;\n  font-family: arial, sans-serif;\n  font-weight: bold;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none; }\n\n.arrow:hover {\n  color: #777; }\n\n.arrow:active {\n  color: #000; }\n\n#area {\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 65%; }\n\n#area iframe {\n  border: none; }\n\n#prev {\n  left: 40px; }\n\n#next {\n  right: 40px; }\n\nbutton {\n  outline: none; }\n\n.highlight {\n  background-color: yellow; }\n\n.epub-reading-progress-bar {\n  position: absolute;\n  bottom: 30px;\n  left: 50%; }\n\n.my-find {\n  background-color: white;\n  border: none;\n  color: white;\n  padding: 15px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  margin-left: 68px;\n  border-radius: 50%; }\n\n.my-content {\n  margin-left: 78px; }\n\n.my-content > img {\n  width: 18px; }\n\n.search-widget {\n  overflow: auto;\n  position: fixed;\n  padding: 20px;\n  border: 5px solid #f1f1f1;\n  background: #fff;\n  border-radius: 5px;\n  font-family: 'Roboto', sans-serif;\n  width: 16%;\n  height: 81%;\n  z-index: 100; }\n\n.search-widget h3 {\n  margin-bottom: 20px;\n  text-align: center;\n  font-size: 24px;\n  font-weight: normal;\n  color: #424949; }\n\n.search-widget ul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  width: 250px; }\n\n.search-widget li {\n  border-bottom: 1px solid #eaeaea;\n  padding-bottom: 15px;\n  margin-bottom: 15px; }\n\n.search-widget li:before {\n  font-family: FontAwesome;\n  font-size: 20px;\n  vertical-align: bottom;\n  color: #dd3333;\n  margin-right: 14px; }\n",""])},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertInto+" "+options.insertAt.before);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");return options.attrs.type="text/css",addAttrs(style,options.attrs),insertStyleElement(options,style),style}function createLinkElement(options){var link=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result=options.transform(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=createLinkElement(options),update=updateLink.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,obj){var css=obj.css,media=obj.media;if(media&&style.setAttribute("media",media),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},isOldIE=function(fn){var memo;return function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}}(function(){return window&&document&&document.all&&!window.atob}),getTarget=function(target){return document.querySelector(target)},getElement=function(fn){var memo={};return function(target){if("function"==typeof target)return target();if(void 0===memo[target]){var styleTarget=getTarget.call(this,target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(166);module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){addStylesToDom(listToStyles(newList,options),options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports,__webpack_require__){var Component=__webpack_require__(33)(__webpack_require__(168),__webpack_require__(178),null,null);module.exports=Component.exports},function(module,exports,__webpack_require__){var Component=__webpack_require__(33)(__webpack_require__(169),__webpack_require__(180),null,null);module.exports=Component.exports},function(module,exports,__webpack_require__){var Component=__webpack_require__(33)(__webpack_require__(170),__webpack_require__(179),null,null);module.exports=Component.exports},function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_c("div",{staticClass:"epub-container"},[_vm._t("prev-btn",[_c("div",{staticClass:"arrow",attrs:{id:"prev"},on:{click:_vm.goToPrevPage}},[_vm._v("")])],{goToPrevPage:_vm.goToPrevPage}),_vm._v(" "),_vm._t("book-content",[_c("div",{attrs:{id:_vm.bookArea}})],{ready:_vm.ready}),_vm._v(" "),_vm._t("next-btn",[_c("div",{staticClass:"arrow",attrs:{id:"next"},on:{click:_vm.goToNextPage}},[_vm._v("")])],{goToNextPage:_vm.goToNextPage})],2),_vm._v(" "),_vm._t("progress-bar",[_c("div",{staticClass:"epub-reading-progress-bar"},[_c("input",{attrs:{size:"3",type:"range",max:"100",min:"0",step:"1"},domProps:{value:_vm.progress},on:{change:function($event){_vm.onChange($event.target.value)}}}),_vm._v(" %\n      "),_c("input",{attrs:{type:"text"},domProps:{value:_vm.progress},on:{change:function($event){_vm.onChange($event.target.value)}}})])],{onChange:_vm.onChange,ready:_vm.ready})],2)},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("ul",_vm._l(_vm.subContent,function(title){return _c("li",{key:title.id},[_c("a",{on:{click:function($event){_vm.showPage(title.href)}}},[_vm._v(_vm._s(title.label))]),_vm._v(" "),title.subitems?[_c("TreeMenu",{attrs:{subContent:title.subitems}})]:_vm._e()],2)}))},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm._t("book-content",[_c("button",{staticClass:"my-find my-content",on:{click:_vm.showContent}},[_c("img",{attrs:{src:"/static/left-alignment.svg",alt:""}})]),_vm._v(" "),_vm.openContentWidget?_c("div",{staticClass:"search-widget"},[_c("TreeMenu",{attrs:{subContent:_vm.toc}})],1):_vm._e()],{showContent:_vm.showContent}),_vm._v(" "),_vm._t("book-search",[_c("button",{staticClass:"my-find",on:{click:_vm.toggleSearchWidget}},[_c("img",{attrs:{src:"/static/search.svg",alt:""}})]),_vm._v(" "),_vm.openSearchWidget?_c("div",{staticClass:"search-widget"},[_c("input",{attrs:{type:"text"},domProps:{value:_vm.value},on:{change:function($event){_vm.findText($event.target.value)}}}),_vm._v(" "),_c("button",{on:{click:_vm.removeHighlight}},[_vm._v("x")]),_vm._v(" "),_c("ul",_vm._l(_vm.searchResults,function(excerpt,i){return _c("li",{key:i,on:{click:function($event){_vm.showPage(excerpt.cfi)}}},[_c("p",[_vm._v(_vm._s(excerpt.excerpt))])])}))]):_vm._e()],{toggleSearchWidget:_vm.toggleSearchWidget,findText:_vm.findText,removeHighlight:_vm.removeHighlight,showPage:_vm.showPage}),_vm._v(" "),_vm._t("book-appearance",[_c("button",{staticClass:"buton",on:{click:_vm.toggleDropdown}},[_vm._v("Aa")]),_vm._v(" "),_vm.opened?_c("div",{staticClass:"hover"},[_c("p",{staticClass:"text"},[_vm._v("TEXT")]),_vm._v(" "),_c("div",{attrs:{id:"gray-line"}},[_c("button",{staticClass:"text-size",attrs:{id:"little-letter"},on:{click:_vm.fontSizeDecrease}},[_vm._v("A")]),_vm._v(" "),_c("button",{staticClass:"text-size",attrs:{id:"big-letter"},on:{click:_vm.fontSizeIncrease}},[_vm._v("A")])]),_vm._v(" "),_c("p",{staticClass:"text"},[_vm._v("BACKGROUND")]),_vm._v(" "),_vm._l(_vm.themes,function(theme,key){return _c("button",{key:key,staticClass:"button-background",class:{current:key===_vm.currentTheme},style:theme.body,attrs:{id:"key"},on:{click:function($event){_vm.selectTheme(key)}}},[_vm._v(_vm._s(theme.name))])})],2):_vm._e()],{toggleDropdown:_vm.toggleDropdown,fontSizeDecrease:_vm.fontSizeDecrease,fontSizeIncrease:_vm.fontSizeIncrease,selectTheme:_vm.selectTheme})],2)},staticRenderFns:[]}}]);